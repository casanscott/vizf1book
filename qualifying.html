<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Qualifying | Visualizing Formula 1 Data in R</title>
  <meta name="description" content="This is a book documenting data visualizations of Formula 1 data." />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Qualifying | Visualizing Formula 1 Data in R" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="/F1_book_cover.PNG" />
  <meta property="og:description" content="This is a book documenting data visualizations of Formula 1 data." />
  <meta name="github-repo" content="casanscott/vizf1book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Qualifying | Visualizing Formula 1 Data in R" />
  
  <meta name="twitter:description" content="This is a book documenting data visualizations of Formula 1 data." />
  <meta name="twitter:image" content="/F1_book_cover.PNG" />

<meta name="author" content="Casan Scott, Ph.D." />


<meta name="date" content="2024-02-24" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction-to-formula-1.html"/>
<link rel="next" href="modeling-practice-and-qualifying-times.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Visualizing Formula 1 Data in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> About the book</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#cover-art"><i class="fa fa-check"></i><b>1.1</b> Cover Art</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#about-me"><i class="fa fa-check"></i><b>1.2</b> About me</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#why-did-i-write-this-book"><i class="fa fa-check"></i><b>1.3</b> Why did I write this book?</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#organization-of-this-book"><i class="fa fa-check"></i><b>1.4</b> Organization of this book</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#r"><i class="fa fa-check"></i><b>1.5</b> R</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#ggplot2"><i class="fa fa-check"></i><b>1.6</b> ggplot2</a></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="index.html#the-tidyverse"><i class="fa fa-check"></i><b>1.7</b> The <em>tidyverse</em></a></li>
<li class="chapter" data-level="1.8" data-path="index.html"><a href="index.html#data"><i class="fa fa-check"></i><b>1.8</b> Data</a></li>
<li class="chapter" data-level="1.9" data-path="index.html"><a href="index.html#data-visualization"><i class="fa fa-check"></i><b>1.9</b> Data Visualization</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-formula-1.html"><a href="introduction-to-formula-1.html"><i class="fa fa-check"></i><b>2</b> Introduction to Formula 1</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-formula-1.html"><a href="introduction-to-formula-1.html#data-1"><i class="fa fa-check"></i><b>2.1</b> Data</a></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-formula-1.html"><a href="introduction-to-formula-1.html#a-formula-1-weekend"><i class="fa fa-check"></i><b>2.2</b> A Formula 1 Weekend</a></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-formula-1.html"><a href="introduction-to-formula-1.html#practice-sessions"><i class="fa fa-check"></i><b>2.3</b> Practice Sessions</a></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-formula-1.html"><a href="introduction-to-formula-1.html#practice-times-by-driver"><i class="fa fa-check"></i><b>2.4</b> Practice Times by Driver</a></li>
<li class="chapter" data-level="2.5" data-path="introduction-to-formula-1.html"><a href="introduction-to-formula-1.html#next-chapter"><i class="fa fa-check"></i><b>2.5</b> Next Chapter</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="qualifying.html"><a href="qualifying.html"><i class="fa fa-check"></i><b>3</b> Qualifying</a>
<ul>
<li class="chapter" data-level="3.1" data-path="qualifying.html"><a href="qualifying.html#distribution-of-qualifying-times-by-session"><i class="fa fa-check"></i><b>3.1</b> Distribution of Qualifying Times by Session</a></li>
<li class="chapter" data-level="3.2" data-path="qualifying.html"><a href="qualifying.html#distribution-of-qualifying-times-by-year"><i class="fa fa-check"></i><b>3.2</b> Distribution of Qualifying Times by Year</a></li>
<li class="chapter" data-level="3.3" data-path="qualifying.html"><a href="qualifying.html#qualifying-times-by-grand-prix"><i class="fa fa-check"></i><b>3.3</b> Qualifying Times by Grand Prix</a></li>
<li class="chapter" data-level="3.4" data-path="qualifying.html"><a href="qualifying.html#car-progression-over-time"><i class="fa fa-check"></i><b>3.4</b> Car Progression Over Time</a></li>
<li class="chapter" data-level="3.5" data-path="qualifying.html"><a href="qualifying.html#next-chapter-1"><i class="fa fa-check"></i><b>3.5</b> Next Chapter</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="modeling-practice-and-qualifying-times.html"><a href="modeling-practice-and-qualifying-times.html"><i class="fa fa-check"></i><b>4</b> Modeling Practice and Qualifying Times</a>
<ul>
<li class="chapter" data-level="4.1" data-path="modeling-practice-and-qualifying-times.html"><a href="modeling-practice-and-qualifying-times.html#models"><i class="fa fa-check"></i><b>4.1</b> Models</a></li>
<li class="chapter" data-level="4.2" data-path="modeling-practice-and-qualifying-times.html"><a href="modeling-practice-and-qualifying-times.html#simple-linear-regression-model-practice-vs-qualifying-times"><i class="fa fa-check"></i><b>4.2</b> Simple Linear Regression Model: Practice vs Qualifying Times</a></li>
<li class="chapter" data-level="4.3" data-path="modeling-practice-and-qualifying-times.html"><a href="modeling-practice-and-qualifying-times.html#simple-linear-regression-model-qualifying-time-vs-year"><i class="fa fa-check"></i><b>4.3</b> Simple Linear Regression Model: Qualifying time vs Year</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="modeling-practice-and-qualifying-times.html"><a href="modeling-practice-and-qualifying-times.html#uncertainty-in-model-estimates"><i class="fa fa-check"></i><b>4.3.1</b> Uncertainty in model estimates</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="modeling-practice-and-qualifying-times.html"><a href="modeling-practice-and-qualifying-times.html#interaction-model"><i class="fa fa-check"></i><b>4.4</b> Interaction Model</a></li>
<li class="chapter" data-level="4.5" data-path="modeling-practice-and-qualifying-times.html"><a href="modeling-practice-and-qualifying-times.html#next-chapter-2"><i class="fa fa-check"></i><b>4.5</b> Next Chapter</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="drivers.html"><a href="drivers.html"><i class="fa fa-check"></i><b>5</b> Drivers</a>
<ul>
<li class="chapter" data-level="5.1" data-path="drivers.html"><a href="drivers.html#race-performance"><i class="fa fa-check"></i><b>5.1</b> Race Performance</a></li>
<li class="chapter" data-level="5.2" data-path="drivers.html"><a href="drivers.html#qualifying-pace"><i class="fa fa-check"></i><b>5.2</b> Qualifying Pace</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="drivers.html"><a href="drivers.html#section"><i class="fa fa-check"></i><b>5.2.1</b> 2023</a></li>
<li class="chapter" data-level="5.2.2" data-path="drivers.html"><a href="drivers.html#section-1"><i class="fa fa-check"></i><b>5.2.2</b> 2022</a></li>
<li class="chapter" data-level="5.2.3" data-path="drivers.html"><a href="drivers.html#section-2"><i class="fa fa-check"></i><b>5.2.3</b> 2021</a></li>
<li class="chapter" data-level="5.2.4" data-path="drivers.html"><a href="drivers.html#section-3"><i class="fa fa-check"></i><b>5.2.4</b> 2020</a></li>
<li class="chapter" data-level="5.2.5" data-path="drivers.html"><a href="drivers.html#section-4"><i class="fa fa-check"></i><b>5.2.5</b> 2019</a></li>
<li class="chapter" data-level="5.2.6" data-path="drivers.html"><a href="drivers.html#section-5"><i class="fa fa-check"></i><b>5.2.6</b> 2018</a></li>
<li class="chapter" data-level="5.2.7" data-path="drivers.html"><a href="drivers.html#section-6"><i class="fa fa-check"></i><b>5.2.7</b> 2017</a></li>
<li class="chapter" data-level="5.2.8" data-path="drivers.html"><a href="drivers.html#section-7"><i class="fa fa-check"></i><b>5.2.8</b> 2016</a></li>
<li class="chapter" data-level="5.2.9" data-path="drivers.html"><a href="drivers.html#section-8"><i class="fa fa-check"></i><b>5.2.9</b> 2015</a></li>
<li class="chapter" data-level="5.2.10" data-path="drivers.html"><a href="drivers.html#section-9"><i class="fa fa-check"></i><b>5.2.10</b> 2014</a></li>
<li class="chapter" data-level="5.2.11" data-path="drivers.html"><a href="drivers.html#next-chapter-3"><i class="fa fa-check"></i><b>5.2.11</b> Next Chapter</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="modeling-race-results.html"><a href="modeling-race-results.html"><i class="fa fa-check"></i><b>6</b> Modeling Race Results</a>
<ul>
<li class="chapter" data-level="6.1" data-path="modeling-race-results.html"><a href="modeling-race-results.html#starting-position-vs-finish-position"><i class="fa fa-check"></i><b>6.1</b> Starting Position vs Finish Position</a></li>
<li class="chapter" data-level="6.2" data-path="modeling-race-results.html"><a href="modeling-race-results.html#shortcomings-of-a-simple-linear-regression-model"><i class="fa fa-check"></i><b>6.2</b> Shortcomings of a simple linear regression model</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="modeling-race-results.html"><a href="modeling-race-results.html#linearity"><i class="fa fa-check"></i><b>6.2.1</b> Linearity</a></li>
<li class="chapter" data-level="6.2.2" data-path="modeling-race-results.html"><a href="modeling-race-results.html#homoscedasticity"><i class="fa fa-check"></i><b>6.2.2</b> Homoscedasticity</a></li>
<li class="chapter" data-level="6.2.3" data-path="modeling-race-results.html"><a href="modeling-race-results.html#independence"><i class="fa fa-check"></i><b>6.2.3</b> Independence</a></li>
<li class="chapter" data-level="6.2.4" data-path="modeling-race-results.html"><a href="modeling-race-results.html#normality"><i class="fa fa-check"></i><b>6.2.4</b> Normality</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="modeling-race-results.html"><a href="modeling-race-results.html#ordinal-regression-model"><i class="fa fa-check"></i><b>6.3</b> Ordinal regression model</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="modeling-race-results.html"><a href="modeling-race-results.html#prediction-grid"><i class="fa fa-check"></i><b>6.3.1</b> Prediction Grid</a></li>
<li class="chapter" data-level="6.3.2" data-path="modeling-race-results.html"><a href="modeling-race-results.html#yearly-differences-in-ordinal-regression-results"><i class="fa fa-check"></i><b>6.3.2</b> Yearly Differences in Ordinal Regression Results</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="modeling-race-results.html"><a href="modeling-race-results.html#explore-circuit-specific-models"><i class="fa fa-check"></i><b>6.4</b> Explore Circuit Specific Models</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="modeling-race-results.html"><a href="modeling-race-results.html#bahrain"><i class="fa fa-check"></i><b>6.4.1</b> Bahrain</a></li>
<li class="chapter" data-level="6.4.2" data-path="modeling-race-results.html"><a href="modeling-race-results.html#saudi-arabia"><i class="fa fa-check"></i><b>6.4.2</b> Saudi Arabia</a></li>
<li class="chapter" data-level="6.4.3" data-path="modeling-race-results.html"><a href="modeling-race-results.html#monaco"><i class="fa fa-check"></i><b>6.4.3</b> Monaco</a></li>
<li class="chapter" data-level="6.4.4" data-path="modeling-race-results.html"><a href="modeling-race-results.html#brazil"><i class="fa fa-check"></i><b>6.4.4</b> Brazil</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="modeling-race-results.html"><a href="modeling-race-results.html#appendix-probability-distributions-for-every-grand-prix"><i class="fa fa-check"></i><b>6.5</b> Appendix: Probability distributions for every Grand Prix</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="modeling-race-results.html"><a href="modeling-race-results.html#bahrain-1"><i class="fa fa-check"></i><b>6.5.1</b> Bahrain</a></li>
<li class="chapter" data-level="6.5.2" data-path="modeling-race-results.html"><a href="modeling-race-results.html#saudi-arabia-1"><i class="fa fa-check"></i><b>6.5.2</b> Saudi Arabia</a></li>
<li class="chapter" data-level="6.5.3" data-path="modeling-race-results.html"><a href="modeling-race-results.html#australia"><i class="fa fa-check"></i><b>6.5.3</b> Australia</a></li>
<li class="chapter" data-level="6.5.4" data-path="modeling-race-results.html"><a href="modeling-race-results.html#azerbaijan"><i class="fa fa-check"></i><b>6.5.4</b> Azerbaijan</a></li>
<li class="chapter" data-level="6.5.5" data-path="modeling-race-results.html"><a href="modeling-race-results.html#miami"><i class="fa fa-check"></i><b>6.5.5</b> Miami</a></li>
<li class="chapter" data-level="6.5.6" data-path="modeling-race-results.html"><a href="modeling-race-results.html#emilia-romagna"><i class="fa fa-check"></i><b>6.5.6</b> Emilia Romagna</a></li>
<li class="chapter" data-level="6.5.7" data-path="modeling-race-results.html"><a href="modeling-race-results.html#monaco-1"><i class="fa fa-check"></i><b>6.5.7</b> Monaco</a></li>
<li class="chapter" data-level="6.5.8" data-path="modeling-race-results.html"><a href="modeling-race-results.html#spain"><i class="fa fa-check"></i><b>6.5.8</b> Spain</a></li>
<li class="chapter" data-level="6.5.9" data-path="modeling-race-results.html"><a href="modeling-race-results.html#canada"><i class="fa fa-check"></i><b>6.5.9</b> Canada</a></li>
<li class="chapter" data-level="6.5.10" data-path="modeling-race-results.html"><a href="modeling-race-results.html#austria"><i class="fa fa-check"></i><b>6.5.10</b> Austria</a></li>
<li class="chapter" data-level="6.5.11" data-path="modeling-race-results.html"><a href="modeling-race-results.html#great-britain"><i class="fa fa-check"></i><b>6.5.11</b> Great Britain</a></li>
<li class="chapter" data-level="6.5.12" data-path="modeling-race-results.html"><a href="modeling-race-results.html#hungary"><i class="fa fa-check"></i><b>6.5.12</b> Hungary</a></li>
<li class="chapter" data-level="6.5.13" data-path="modeling-race-results.html"><a href="modeling-race-results.html#belgium"><i class="fa fa-check"></i><b>6.5.13</b> Belgium</a></li>
<li class="chapter" data-level="6.5.14" data-path="modeling-race-results.html"><a href="modeling-race-results.html#netherlands"><i class="fa fa-check"></i><b>6.5.14</b> Netherlands</a></li>
<li class="chapter" data-level="6.5.15" data-path="modeling-race-results.html"><a href="modeling-race-results.html#monza"><i class="fa fa-check"></i><b>6.5.15</b> Monza</a></li>
<li class="chapter" data-level="6.5.16" data-path="modeling-race-results.html"><a href="modeling-race-results.html#singapore"><i class="fa fa-check"></i><b>6.5.16</b> Singapore</a></li>
<li class="chapter" data-level="6.5.17" data-path="modeling-race-results.html"><a href="modeling-race-results.html#japan"><i class="fa fa-check"></i><b>6.5.17</b> Japan</a></li>
<li class="chapter" data-level="6.5.18" data-path="modeling-race-results.html"><a href="modeling-race-results.html#qatar"><i class="fa fa-check"></i><b>6.5.18</b> Qatar</a></li>
<li class="chapter" data-level="6.5.19" data-path="modeling-race-results.html"><a href="modeling-race-results.html#united-states-circuit-of-the-americas-in-austin-texas"><i class="fa fa-check"></i><b>6.5.19</b> United States (Circuit of the Americas in Austin, Texas)</a></li>
<li class="chapter" data-level="6.5.20" data-path="modeling-race-results.html"><a href="modeling-race-results.html#mexico"><i class="fa fa-check"></i><b>6.5.20</b> Mexico</a></li>
<li class="chapter" data-level="6.5.21" data-path="modeling-race-results.html"><a href="modeling-race-results.html#brazil-1"><i class="fa fa-check"></i><b>6.5.21</b> Brazil</a></li>
<li class="chapter" data-level="6.5.22" data-path="modeling-race-results.html"><a href="modeling-race-results.html#abu-dhabi"><i class="fa fa-check"></i><b>6.5.22</b> Abu Dhabi</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="modeling-race-results.html"><a href="modeling-race-results.html#next-chapter-4"><i class="fa fa-check"></i><b>6.6</b> Next Chapter</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="dnf-did-not-finish.html"><a href="dnf-did-not-finish.html"><i class="fa fa-check"></i><b>7</b> DNF (Did Not Finish)</a>
<ul>
<li class="chapter" data-level="7.1" data-path="dnf-did-not-finish.html"><a href="dnf-did-not-finish.html#logistic-regression"><i class="fa fa-check"></i><b>7.1</b> Logistic Regression</a></li>
<li class="chapter" data-level="7.2" data-path="dnf-did-not-finish.html"><a href="dnf-did-not-finish.html#yearly-differences"><i class="fa fa-check"></i><b>7.2</b> Yearly Differences</a></li>
<li class="chapter" data-level="7.3" data-path="dnf-did-not-finish.html"><a href="dnf-did-not-finish.html#differences-by-constructor"><i class="fa fa-check"></i><b>7.3</b> Differences by constructor</a></li>
<li class="chapter" data-level="7.4" data-path="dnf-did-not-finish.html"><a href="dnf-did-not-finish.html#dnfs-by-race-of-the-season"><i class="fa fa-check"></i><b>7.4</b> DNFs by race of the season</a></li>
<li class="chapter" data-level="7.5" data-path="dnf-did-not-finish.html"><a href="dnf-did-not-finish.html#next-chapter-5"><i class="fa fa-check"></i><b>7.5</b> Next Chapter</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="the-wdc-world-drivers-championship.html"><a href="the-wdc-world-drivers-championship.html"><i class="fa fa-check"></i><b>8</b> The WDC (World Drivers Championship)</a></li>
<li class="chapter" data-level="9" data-path="conclusions.html"><a href="conclusions.html"><i class="fa fa-check"></i><b>9</b> Conclusions</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Visualizing Formula 1 Data in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="qualifying" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Qualifying<a href="qualifying.html#qualifying" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Qualifying is one of the most important components of a Formula 1 Grand Prix weekend. Qualifying position determines the position where that driver starts the Grand Prix. Qualifying is actually composed of three different sessions: Q1, Q2, and Q3. All drivers take part in Q1, but only the top 15 fastest times are allowed to continue on to Q2. The fastest 10 times in Q2 make it to Q3. Q1 lasts 18 minutes, while Q2 lasts 15 minutes, and Q3 lasts 12 minutes. If a driver violates a rule or regulation, the penalties are issued following qualifying.</p>
<p>Qualifying data is readily available online. To scrape qualifying data drectly from www.formula1.com, you can use the <code>qualifying_scraper()</code> function from the <strong>drs</strong> package.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="qualifying.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb41-2"><a href="qualifying.html#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(drs)</span>
<span id="cb41-3"><a href="qualifying.html#cb41-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-4"><a href="qualifying.html#cb41-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-5"><a href="qualifying.html#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Scrape qualifying data</span></span>
<span id="cb41-6"><a href="qualifying.html#cb41-6" aria-hidden="true" tabindex="-1"></a>qualifying_2023 <span class="ot">&lt;-</span> <span class="fu">qualifying_scraper</span>(<span class="dv">2023</span>)</span>
<span id="cb41-7"><a href="qualifying.html#cb41-7" aria-hidden="true" tabindex="-1"></a>qualifying_2022 <span class="ot">&lt;-</span> <span class="fu">qualifying_scraper</span>(<span class="dv">2022</span>)</span>
<span id="cb41-8"><a href="qualifying.html#cb41-8" aria-hidden="true" tabindex="-1"></a>qualifying_2021 <span class="ot">&lt;-</span> <span class="fu">qualifying_scraper</span>(<span class="dv">2021</span>)</span>
<span id="cb41-9"><a href="qualifying.html#cb41-9" aria-hidden="true" tabindex="-1"></a>qualifying_2020 <span class="ot">&lt;-</span> <span class="fu">qualifying_scraper</span>(<span class="dv">2020</span>)</span>
<span id="cb41-10"><a href="qualifying.html#cb41-10" aria-hidden="true" tabindex="-1"></a>qualifying_2019 <span class="ot">&lt;-</span> <span class="fu">qualifying_scraper</span>(<span class="dv">2019</span>)</span>
<span id="cb41-11"><a href="qualifying.html#cb41-11" aria-hidden="true" tabindex="-1"></a>qualifying_2018 <span class="ot">&lt;-</span> <span class="fu">qualifying_scraper</span>(<span class="dv">2018</span>)</span>
<span id="cb41-12"><a href="qualifying.html#cb41-12" aria-hidden="true" tabindex="-1"></a>qualifying_2017 <span class="ot">&lt;-</span> <span class="fu">qualifying_scraper</span>(<span class="dv">2017</span>)</span>
<span id="cb41-13"><a href="qualifying.html#cb41-13" aria-hidden="true" tabindex="-1"></a>qualifying_2016 <span class="ot">&lt;-</span> <span class="fu">qualifying_scraper</span>(<span class="dv">2016</span>)</span>
<span id="cb41-14"><a href="qualifying.html#cb41-14" aria-hidden="true" tabindex="-1"></a>qualifying_2015 <span class="ot">&lt;-</span> <span class="fu">qualifying_scraper</span>(<span class="dv">2015</span>)</span>
<span id="cb41-15"><a href="qualifying.html#cb41-15" aria-hidden="true" tabindex="-1"></a>qualifying_2014 <span class="ot">&lt;-</span> <span class="fu">qualifying_scraper</span>(<span class="dv">2014</span>)</span>
<span id="cb41-16"><a href="qualifying.html#cb41-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-17"><a href="qualifying.html#cb41-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine all qualifying data</span></span>
<span id="cb41-18"><a href="qualifying.html#cb41-18" aria-hidden="true" tabindex="-1"></a>qualifying_allyears <span class="ot">&lt;-</span> <span class="fu">rbind</span>(qualifying_2023,</span>
<span id="cb41-19"><a href="qualifying.html#cb41-19" aria-hidden="true" tabindex="-1"></a>                             qualifying_2022,</span>
<span id="cb41-20"><a href="qualifying.html#cb41-20" aria-hidden="true" tabindex="-1"></a>                             qualifying_2021, </span>
<span id="cb41-21"><a href="qualifying.html#cb41-21" aria-hidden="true" tabindex="-1"></a>                             qualifying_2020,</span>
<span id="cb41-22"><a href="qualifying.html#cb41-22" aria-hidden="true" tabindex="-1"></a>                             qualifying_2019,</span>
<span id="cb41-23"><a href="qualifying.html#cb41-23" aria-hidden="true" tabindex="-1"></a>                             qualifying_2018,</span>
<span id="cb41-24"><a href="qualifying.html#cb41-24" aria-hidden="true" tabindex="-1"></a>                             qualifying_2017,</span>
<span id="cb41-25"><a href="qualifying.html#cb41-25" aria-hidden="true" tabindex="-1"></a>                             qualifying_2016,</span>
<span id="cb41-26"><a href="qualifying.html#cb41-26" aria-hidden="true" tabindex="-1"></a>                             qualifying_2015,</span>
<span id="cb41-27"><a href="qualifying.html#cb41-27" aria-hidden="true" tabindex="-1"></a>                             qualifying_2014)</span></code></pre></div>
<div id="distribution-of-qualifying-times-by-session" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Distribution of Qualifying Times by Session<a href="qualifying.html#distribution-of-qualifying-times-by-session" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><em>Note: Throughout this chapter, I’ll introduce various visualization types. However, I knowingly include some visualizations that are not ideal for a given example. I did this for two reasons: (1) I wanted to include as much code as possible, in hopes that you may be able to use it for your own data, and (2) I wanted to include examples where we are forced to “try again”.</em></p>
<p>One of the more basic ways to visualize qualifying times is to use a histogram. We can use histograms to plot the entire distribution of qualifying times from 2014 to 2023. In the figure below, I lump all qualifying times together (all sessions, drivers, teams, years, and circuits are included in the same distribution).</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="qualifying.html#cb42-1" aria-hidden="true" tabindex="-1"></a>qualifying_allyears <span class="sc">%&gt;%</span></span>
<span id="cb42-2"><a href="qualifying.html#cb42-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Q1_secs, Q2_secs, Q3_secs) <span class="sc">%&gt;%</span></span>
<span id="cb42-3"><a href="qualifying.html#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">everything</span>(), <span class="at">names_to =</span> <span class="st">&#39;qualifying_session&#39;</span>, <span class="at">values_to =</span> <span class="st">&#39;time&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb42-4"><a href="qualifying.html#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(time)) <span class="sc">+</span></span>
<span id="cb42-5"><a href="qualifying.html#cb42-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb42-6"><a href="qualifying.html#cb42-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb42-7"><a href="qualifying.html#cb42-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Qualifying Time (secs)&#39;</span>,</span>
<span id="cb42-8"><a href="qualifying.html#cb42-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Distribution of all qualifying times&#39;</span>,</span>
<span id="cb42-9"><a href="qualifying.html#cb42-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2014 - 2023&#39;</span>)<span class="sc">+</span></span>
<span id="cb42-10"><a href="qualifying.html#cb42-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb42-11"><a href="qualifying.html#cb42-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb42-12"><a href="qualifying.html#cb42-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-36-1.png" width="768" style="display: block; margin: auto;" /></p>
<p><br>
<br></p>
<div class="blackbox">
<div class="center">
<p><strong>How to create a histogram in R</strong></p>
</div>
<p>The histogram geometry, <code>geom_histogram()</code>, can be used to plot the distribution of a single continuous variable. <code>geom_histogram()</code> counts the number of observations in a given gib, and plots along the x-axis.</p>
<p>For more information on using <code>geom_histogram()</code> in <strong>ggplot2</strong>, visit this link: <a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html" class="uri">https://ggplot2.tidyverse.org/reference/geom_histogram.html</a></p>
</div>
<p><br>
<br></p>
<p>The plot above is not all that informative (at least in my opinion). Most people are probably not that interested in the distribution of all qualifying times, but rather the distribution by session, year, or some other grouping variable. Here’s a look at the distribution of qualifying times by session. Obviously, Q3 times should be faster than Q2 which is faster than Q1.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="qualifying.html#cb43-1" aria-hidden="true" tabindex="-1"></a>qualifying_allyears <span class="sc">%&gt;%</span></span>
<span id="cb43-2"><a href="qualifying.html#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(<span class="st">&#39;Q1_secs&#39;</span>, <span class="st">&#39;Q2_secs&#39;</span>, <span class="st">&#39;Q3_secs&#39;</span>),</span>
<span id="cb43-3"><a href="qualifying.html#cb43-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&#39;session&#39;</span>,</span>
<span id="cb43-4"><a href="qualifying.html#cb43-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&#39;time&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb43-5"><a href="qualifying.html#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">factor</span>(Year),</span>
<span id="cb43-6"><a href="qualifying.html#cb43-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">session =</span> <span class="fu">str_remove</span>(session, <span class="st">&#39;_secs&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb43-7"><a href="qualifying.html#cb43-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb43-8"><a href="qualifying.html#cb43-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">fill =</span> session),</span>
<span id="cb43-9"><a href="qualifying.html#cb43-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">show.legend =</span> T,</span>
<span id="cb43-10"><a href="qualifying.html#cb43-10" aria-hidden="true" tabindex="-1"></a>                 <span class="at">position=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb43-11"><a href="qualifying.html#cb43-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb43-12"><a href="qualifying.html#cb43-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Qualifying Time (secs)&#39;</span>,</span>
<span id="cb43-13"><a href="qualifying.html#cb43-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Distribution of all qualifying times&#39;</span>,</span>
<span id="cb43-14"><a href="qualifying.html#cb43-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2014 - 2023&#39;</span>)<span class="sc">+</span></span>
<span id="cb43-15"><a href="qualifying.html#cb43-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb43-16"><a href="qualifying.html#cb43-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb43-17"><a href="qualifying.html#cb43-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_d</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-37-1.png" width="768" style="display: block; margin: auto;" /></p>
<p><br>
<br></p>
<div class="blackbox">
<div class="center">
<p><strong>How to remove matched patterns in R</strong></p>
</div>
<p>In the code chunk above, I use the <code>str_remove()</code> function to remove text from the session variable name. At times, you will be left with sloppy variable names (like I did here). I wanted to remove the “_secs” suffix from the session factor names. <code>str_remove()</code> makes this incredibly easy to do.</p>
<p>For more information on using <code>str_remove()</code>, visit this link: <a href="https://stringr.tidyverse.org/reference/str_remove.html" class="uri">https://stringr.tidyverse.org/reference/str_remove.html</a></p>
</div>
<p><br>
<br></p>
<p>There are more participants in the slower sessions, so the height of the distributions in the above figure are going to be different. We can standardize the heights of the distributions by using the following argument:</p>
<p><code>geom_histogram(aes(x = time, y = ..density.., fill = session)</code></p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="qualifying.html#cb44-1" aria-hidden="true" tabindex="-1"></a>qualifying_allyears <span class="sc">%&gt;%</span></span>
<span id="cb44-2"><a href="qualifying.html#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(<span class="st">&#39;Q1_secs&#39;</span>, <span class="st">&#39;Q2_secs&#39;</span>, <span class="st">&#39;Q3_secs&#39;</span>),</span>
<span id="cb44-3"><a href="qualifying.html#cb44-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&#39;session&#39;</span>,</span>
<span id="cb44-4"><a href="qualifying.html#cb44-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&#39;time&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb44-5"><a href="qualifying.html#cb44-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">factor</span>(Year),</span>
<span id="cb44-6"><a href="qualifying.html#cb44-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">session =</span> <span class="fu">str_remove</span>(session, <span class="st">&#39;_secs&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb44-7"><a href="qualifying.html#cb44-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb44-8"><a href="qualifying.html#cb44-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">y =</span> ..density.., <span class="at">fill =</span> session),</span>
<span id="cb44-9"><a href="qualifying.html#cb44-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">show.legend =</span> T,</span>
<span id="cb44-10"><a href="qualifying.html#cb44-10" aria-hidden="true" tabindex="-1"></a>                 <span class="at">position=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb44-11"><a href="qualifying.html#cb44-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb44-12"><a href="qualifying.html#cb44-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Qualifying Time (secs)&#39;</span>,</span>
<span id="cb44-13"><a href="qualifying.html#cb44-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Distribution of all qualifying times&#39;</span>,</span>
<span id="cb44-14"><a href="qualifying.html#cb44-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2014 - 2023&#39;</span>)<span class="sc">+</span></span>
<span id="cb44-15"><a href="qualifying.html#cb44-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb44-16"><a href="qualifying.html#cb44-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb44-17"><a href="qualifying.html#cb44-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_d</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-38-1.png" width="768" style="display: block; margin: auto;" /></p>
<p>Even with this adjustment, the plot is still not very visually informative. As an alternative, we can split the plot by session:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="qualifying.html#cb45-1" aria-hidden="true" tabindex="-1"></a>qualifying_allyears <span class="sc">%&gt;%</span></span>
<span id="cb45-2"><a href="qualifying.html#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(<span class="st">&#39;Q1_secs&#39;</span>, <span class="st">&#39;Q2_secs&#39;</span>, <span class="st">&#39;Q3_secs&#39;</span>),</span>
<span id="cb45-3"><a href="qualifying.html#cb45-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&#39;session&#39;</span>,</span>
<span id="cb45-4"><a href="qualifying.html#cb45-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&#39;time&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb45-5"><a href="qualifying.html#cb45-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">factor</span>(Year),</span>
<span id="cb45-6"><a href="qualifying.html#cb45-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">session =</span> <span class="fu">str_remove</span>(session, <span class="st">&#39;_secs&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb45-7"><a href="qualifying.html#cb45-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb45-8"><a href="qualifying.html#cb45-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">y =</span> ..density.., <span class="at">fill =</span> session),</span>
<span id="cb45-9"><a href="qualifying.html#cb45-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">show.legend =</span> T,</span>
<span id="cb45-10"><a href="qualifying.html#cb45-10" aria-hidden="true" tabindex="-1"></a>                 <span class="at">position=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb45-11"><a href="qualifying.html#cb45-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb45-12"><a href="qualifying.html#cb45-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Qualifying Time (secs)&#39;</span>,</span>
<span id="cb45-13"><a href="qualifying.html#cb45-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Distribution of all qualifying times&#39;</span>,</span>
<span id="cb45-14"><a href="qualifying.html#cb45-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2014 - 2023&#39;</span>)<span class="sc">+</span></span>
<span id="cb45-15"><a href="qualifying.html#cb45-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb45-16"><a href="qualifying.html#cb45-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb45-17"><a href="qualifying.html#cb45-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span></span>
<span id="cb45-18"><a href="qualifying.html#cb45-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> session, <span class="at">ncol =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-39-1.png" width="960" style="display: block; margin: auto;" /></p>
<p>A little better, but… not great. We should revisit the best way to visualize times by session later. But for now, we will shift our focus to yearly differences.</p>
</div>
<div id="distribution-of-qualifying-times-by-year" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Distribution of Qualifying Times by Year<a href="qualifying.html#distribution-of-qualifying-times-by-year" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Visualizing the distribution of times by year is somewhat interesting, however. It is very easy to add a new dimension (year) to this histogram:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="qualifying.html#cb46-1" aria-hidden="true" tabindex="-1"></a>qualifying_allyears <span class="sc">%&gt;%</span></span>
<span id="cb46-2"><a href="qualifying.html#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(<span class="st">&#39;Q1_secs&#39;</span>, <span class="st">&#39;Q2_secs&#39;</span>, <span class="st">&#39;Q3_secs&#39;</span>),</span>
<span id="cb46-3"><a href="qualifying.html#cb46-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&#39;session&#39;</span>,</span>
<span id="cb46-4"><a href="qualifying.html#cb46-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&#39;time&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb46-5"><a href="qualifying.html#cb46-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">factor</span>(Year)) <span class="sc">%&gt;%</span></span>
<span id="cb46-6"><a href="qualifying.html#cb46-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb46-7"><a href="qualifying.html#cb46-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">fill =</span> Year),</span>
<span id="cb46-8"><a href="qualifying.html#cb46-8" aria-hidden="true" tabindex="-1"></a>                 <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">show.legend =</span> T,</span>
<span id="cb46-9"><a href="qualifying.html#cb46-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">position=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb46-10"><a href="qualifying.html#cb46-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb46-11"><a href="qualifying.html#cb46-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Qualifying Time (secs)&#39;</span>,</span>
<span id="cb46-12"><a href="qualifying.html#cb46-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Distribution of all qualifying times&#39;</span>,</span>
<span id="cb46-13"><a href="qualifying.html#cb46-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2014 - 2023&#39;</span>)<span class="sc">+</span></span>
<span id="cb46-14"><a href="qualifying.html#cb46-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb46-15"><a href="qualifying.html#cb46-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb46-16"><a href="qualifying.html#cb46-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_d</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-40-1.png" width="768" style="display: block; margin: auto;" /></p>
<p>T
his includes all qualifying sessions together. To clear things up a bit, I will group the data by year while retaining different plots for each session:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="qualifying.html#cb47-1" aria-hidden="true" tabindex="-1"></a>qualifying_allyears <span class="sc">%&gt;%</span></span>
<span id="cb47-2"><a href="qualifying.html#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(<span class="st">&#39;Q1_secs&#39;</span>, <span class="st">&#39;Q2_secs&#39;</span>, <span class="st">&#39;Q3_secs&#39;</span>),</span>
<span id="cb47-3"><a href="qualifying.html#cb47-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&#39;session&#39;</span>,</span>
<span id="cb47-4"><a href="qualifying.html#cb47-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&#39;time&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb47-5"><a href="qualifying.html#cb47-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">factor</span>(Year),</span>
<span id="cb47-6"><a href="qualifying.html#cb47-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">session =</span> <span class="fu">str_remove</span>(session, <span class="st">&#39;_secs&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb47-7"><a href="qualifying.html#cb47-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb47-8"><a href="qualifying.html#cb47-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">fill =</span> Year),</span>
<span id="cb47-9"><a href="qualifying.html#cb47-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">show.legend =</span> T,</span>
<span id="cb47-10"><a href="qualifying.html#cb47-10" aria-hidden="true" tabindex="-1"></a>                 <span class="at">position=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb47-11"><a href="qualifying.html#cb47-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb47-12"><a href="qualifying.html#cb47-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Qualifying Time (secs)&#39;</span>,</span>
<span id="cb47-13"><a href="qualifying.html#cb47-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Distribution of all qualifying times&#39;</span>,</span>
<span id="cb47-14"><a href="qualifying.html#cb47-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2014 - 2023&#39;</span>)<span class="sc">+</span></span>
<span id="cb47-15"><a href="qualifying.html#cb47-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb47-16"><a href="qualifying.html#cb47-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb47-17"><a href="qualifying.html#cb47-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span></span>
<span id="cb47-18"><a href="qualifying.html#cb47-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> session, <span class="at">scales =</span> <span class="st">&#39;free_y&#39;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-41-1.png" width="960" style="display: block; margin: auto;" /></p>
<p>This plot is still very tough to read! Luckily, <strong>ggplot</strong> is very flexible, so there’s a few different ways to try and remedy this:</p>
<p>Option 1: Use <code>facet_wrap()</code> to split the distributions into facets:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="qualifying.html#cb48-1" aria-hidden="true" tabindex="-1"></a>qualifying_allyears <span class="sc">%&gt;%</span></span>
<span id="cb48-2"><a href="qualifying.html#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(<span class="st">&#39;Q1_secs&#39;</span>, <span class="st">&#39;Q2_secs&#39;</span>, <span class="st">&#39;Q3_secs&#39;</span>),</span>
<span id="cb48-3"><a href="qualifying.html#cb48-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&#39;session&#39;</span>,</span>
<span id="cb48-4"><a href="qualifying.html#cb48-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&#39;time&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb48-5"><a href="qualifying.html#cb48-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">factor</span>(Year),</span>
<span id="cb48-6"><a href="qualifying.html#cb48-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">session =</span> <span class="fu">str_remove</span>(session, <span class="st">&#39;_secs&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb48-7"><a href="qualifying.html#cb48-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb48-8"><a href="qualifying.html#cb48-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">fill =</span> session),</span>
<span id="cb48-9"><a href="qualifying.html#cb48-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">show.legend =</span> T,</span>
<span id="cb48-10"><a href="qualifying.html#cb48-10" aria-hidden="true" tabindex="-1"></a>                 <span class="at">position=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb48-11"><a href="qualifying.html#cb48-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb48-12"><a href="qualifying.html#cb48-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Qualifying Time (secs)&#39;</span>,</span>
<span id="cb48-13"><a href="qualifying.html#cb48-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Distribution of all qualifying times&#39;</span>,</span>
<span id="cb48-14"><a href="qualifying.html#cb48-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2014 - 2023&#39;</span>,</span>
<span id="cb48-15"><a href="qualifying.html#cb48-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">&#39;&#39;</span>)<span class="sc">+</span></span>
<span id="cb48-16"><a href="qualifying.html#cb48-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb48-17"><a href="qualifying.html#cb48-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb48-18"><a href="qualifying.html#cb48-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&#39;bottom&#39;</span>) <span class="sc">+</span></span>
<span id="cb48-19"><a href="qualifying.html#cb48-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span></span>
<span id="cb48-20"><a href="qualifying.html#cb48-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> Year, <span class="at">ncol =</span> <span class="dv">5</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-42-1.png" width="1152" style="display: block; margin: auto;" /></p>
<p>Option 2: Use <code>geom_density()</code>, in lieu of <code>geom_histogram()</code>. <strong>ggplot</strong>’s density geometry is a smooth alternative to the histogram geometry.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="qualifying.html#cb49-1" aria-hidden="true" tabindex="-1"></a>qualifying_allyears <span class="sc">%&gt;%</span></span>
<span id="cb49-2"><a href="qualifying.html#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(<span class="st">&#39;Q1_secs&#39;</span>, <span class="st">&#39;Q2_secs&#39;</span>, <span class="st">&#39;Q3_secs&#39;</span>),</span>
<span id="cb49-3"><a href="qualifying.html#cb49-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&#39;session&#39;</span>,</span>
<span id="cb49-4"><a href="qualifying.html#cb49-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&#39;time&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb49-5"><a href="qualifying.html#cb49-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">factor</span>(Year),</span>
<span id="cb49-6"><a href="qualifying.html#cb49-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">session =</span> <span class="fu">str_remove</span>(session, <span class="st">&#39;_secs&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb49-7"><a href="qualifying.html#cb49-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb49-8"><a href="qualifying.html#cb49-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">fill =</span> session),</span>
<span id="cb49-9"><a href="qualifying.html#cb49-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">show.legend =</span> T,</span>
<span id="cb49-10"><a href="qualifying.html#cb49-10" aria-hidden="true" tabindex="-1"></a>                 <span class="at">position=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb49-11"><a href="qualifying.html#cb49-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb49-12"><a href="qualifying.html#cb49-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Qualifying Time (secs)&#39;</span>,</span>
<span id="cb49-13"><a href="qualifying.html#cb49-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Distribution of all qualifying times&#39;</span>,</span>
<span id="cb49-14"><a href="qualifying.html#cb49-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2014 - 2023&#39;</span>)<span class="sc">+</span></span>
<span id="cb49-15"><a href="qualifying.html#cb49-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb49-16"><a href="qualifying.html#cb49-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb49-17"><a href="qualifying.html#cb49-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&#39;bottom&#39;</span>) <span class="sc">+</span></span>
<span id="cb49-18"><a href="qualifying.html#cb49-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_d</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-43-1.png" width="768" style="display: block; margin: auto;" /></p>
<p><br>
<br></p>
<div class="blackbox">
<div class="center">
<p><strong>How to create a kernel density plot in R</strong></p>
</div>
<p>An alternative to using the histogram geometry, <code>geom_histogram()</code>, is the smoothed kernel density geometry, <code>geom_density()</code>. <code>geom_density()</code> calculates and plots a smoothed version of a histogram, commonly referred to as the kernel density estimate.</p>
<p>For more information on using <code>geom_density()</code> in <strong>ggplot2</strong>, visit this link: <a href="https://ggplot2.tidyverse.org/reference/geom_density.html" class="uri">https://ggplot2.tidyverse.org/reference/geom_density.html</a></p>
</div>
<p><br>
<br></p>
<p>These distributions include all qualifying sessions from 2014 to 2023, and the multi-modal nature of the distributions reflect this.</p>
<p>Or Option 3: Use <code>geom_density()</code> and <code>facet_wrap()</code> together.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="qualifying.html#cb50-1" aria-hidden="true" tabindex="-1"></a>qualifying_allyears <span class="sc">%&gt;%</span></span>
<span id="cb50-2"><a href="qualifying.html#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(<span class="st">&#39;Q1_secs&#39;</span>, <span class="st">&#39;Q2_secs&#39;</span>, <span class="st">&#39;Q3_secs&#39;</span>),</span>
<span id="cb50-3"><a href="qualifying.html#cb50-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&#39;session&#39;</span>,</span>
<span id="cb50-4"><a href="qualifying.html#cb50-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&#39;time&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb50-5"><a href="qualifying.html#cb50-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">factor</span>(Year),</span>
<span id="cb50-6"><a href="qualifying.html#cb50-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">session =</span> <span class="fu">str_remove</span>(session, <span class="st">&#39;_secs&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb50-7"><a href="qualifying.html#cb50-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb50-8"><a href="qualifying.html#cb50-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">fill =</span> session),</span>
<span id="cb50-9"><a href="qualifying.html#cb50-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">show.legend =</span> T,</span>
<span id="cb50-10"><a href="qualifying.html#cb50-10" aria-hidden="true" tabindex="-1"></a>                 <span class="at">position=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb50-11"><a href="qualifying.html#cb50-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb50-12"><a href="qualifying.html#cb50-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Qualifying Time (secs)&#39;</span>,</span>
<span id="cb50-13"><a href="qualifying.html#cb50-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Distribution of all qualifying times&#39;</span>,</span>
<span id="cb50-14"><a href="qualifying.html#cb50-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2014 - 2023&#39;</span>)<span class="sc">+</span></span>
<span id="cb50-15"><a href="qualifying.html#cb50-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb50-16"><a href="qualifying.html#cb50-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb50-17"><a href="qualifying.html#cb50-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&#39;bottom&#39;</span>) <span class="sc">+</span></span>
<span id="cb50-18"><a href="qualifying.html#cb50-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span></span>
<span id="cb50-19"><a href="qualifying.html#cb50-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> Year, <span class="at">ncol =</span> <span class="dv">5</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-44-1.png" width="1152" style="display: block; margin: auto;" /></p>
<p>Option 4: Ridgelines</p>
<p>One of my favorite ways to visualize shifts in a distribution over time is with <em>density ridgelines</em>. Density ridgelines are a way to visualize shifts in distributions across another variable. The name <em>ridgeline</em> was given because these plots give the impression of a mountain <em>ridge</em>. The density ridgeline is an alternative to standard density plots. The R package <strong>ggridges</strong> provides a very useful function called <code>geom_density_ridges_gradient()</code> that makes creating these plots very easy. I’ll use this function to create a ridgeline plot of our qualifying data.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="qualifying.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggridges)</span>
<span id="cb51-2"><a href="qualifying.html#cb51-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-3"><a href="qualifying.html#cb51-3" aria-hidden="true" tabindex="-1"></a>qualifying_allyears <span class="sc">%&gt;%</span></span>
<span id="cb51-4"><a href="qualifying.html#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(<span class="st">&#39;Q1_secs&#39;</span>, <span class="st">&#39;Q2_secs&#39;</span>, <span class="st">&#39;Q3_secs&#39;</span>),</span>
<span id="cb51-5"><a href="qualifying.html#cb51-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&#39;session&#39;</span>,</span>
<span id="cb51-6"><a href="qualifying.html#cb51-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&#39;time&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb51-7"><a href="qualifying.html#cb51-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">factor</span>(Year),</span>
<span id="cb51-8"><a href="qualifying.html#cb51-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">session =</span> <span class="fu">str_remove</span>(session, <span class="st">&#39;_secs&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb51-9"><a href="qualifying.html#cb51-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb51-10"><a href="qualifying.html#cb51-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density_ridges_gradient</span>(<span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">y =</span> Year, <span class="at">fill =</span> <span class="fu">stat</span>(x)),</span>
<span id="cb51-11"><a href="qualifying.html#cb51-11" aria-hidden="true" tabindex="-1"></a>                 <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">show.legend =</span> T,</span>
<span id="cb51-12"><a href="qualifying.html#cb51-12" aria-hidden="true" tabindex="-1"></a>                 <span class="at">position=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb51-13"><a href="qualifying.html#cb51-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb51-14"><a href="qualifying.html#cb51-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Qualifying Time (secs)&#39;</span>,</span>
<span id="cb51-15"><a href="qualifying.html#cb51-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Distribution of qualifying times&#39;</span>,</span>
<span id="cb51-16"><a href="qualifying.html#cb51-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;All Grands Prix: 2014 - 2023&#39;</span>)<span class="sc">+</span></span>
<span id="cb51-17"><a href="qualifying.html#cb51-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb51-18"><a href="qualifying.html#cb51-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb51-19"><a href="qualifying.html#cb51-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&#39;none&#39;</span>) <span class="sc">+</span></span>
<span id="cb51-20"><a href="qualifying.html#cb51-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-45-1.png" width="768" style="display: block; margin: auto;" /></p>
<p>Interesting! Let’s build on this idea and start ooking into differences by Grand Prix.</p>
</div>
<div id="qualifying-times-by-grand-prix" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Qualifying Times by Grand Prix<a href="qualifying.html#qualifying-times-by-grand-prix" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Perhaps, a more useful way to use histograms is to plot the distribution for one Grand Prix at a time. For instance, here’s the distribution of qualifying times at the Bahrain Grand Prix only:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="qualifying.html#cb52-1" aria-hidden="true" tabindex="-1"></a>qualifying_allyears <span class="sc">%&gt;%</span></span>
<span id="cb52-2"><a href="qualifying.html#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(<span class="st">&#39;Q1_secs&#39;</span>, <span class="st">&#39;Q2_secs&#39;</span>, <span class="st">&#39;Q3_secs&#39;</span>),</span>
<span id="cb52-3"><a href="qualifying.html#cb52-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&#39;session&#39;</span>,</span>
<span id="cb52-4"><a href="qualifying.html#cb52-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&#39;time&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb52-5"><a href="qualifying.html#cb52-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">factor</span>(Year),</span>
<span id="cb52-6"><a href="qualifying.html#cb52-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">session =</span> <span class="fu">str_remove</span>(session, <span class="st">&#39;_secs&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb52-7"><a href="qualifying.html#cb52-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Race <span class="sc">==</span> <span class="st">&#39;bahrain&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb52-8"><a href="qualifying.html#cb52-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb52-9"><a href="qualifying.html#cb52-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">fill =</span> Year),</span>
<span id="cb52-10"><a href="qualifying.html#cb52-10" aria-hidden="true" tabindex="-1"></a>                 <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">show.legend =</span> T,</span>
<span id="cb52-11"><a href="qualifying.html#cb52-11" aria-hidden="true" tabindex="-1"></a>                 <span class="at">position=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb52-12"><a href="qualifying.html#cb52-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb52-13"><a href="qualifying.html#cb52-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Qualifying Time (secs)&#39;</span>,</span>
<span id="cb52-14"><a href="qualifying.html#cb52-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Distribution of qualifying times at the Bahrain Grand Prix&#39;</span>,</span>
<span id="cb52-15"><a href="qualifying.html#cb52-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2014 - 2023&#39;</span>)<span class="sc">+</span></span>
<span id="cb52-16"><a href="qualifying.html#cb52-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb52-17"><a href="qualifying.html#cb52-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb52-18"><a href="qualifying.html#cb52-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_d</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-46-1.png" width="768" style="display: block; margin: auto;" /></p>
<p>I prefer to use <strong>ggridges</strong> for this type of task. So, I’ll create a ridgeline plot for the Bahrain Grand Prix here:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="qualifying.html#cb53-1" aria-hidden="true" tabindex="-1"></a>qualifying_allyears <span class="sc">%&gt;%</span></span>
<span id="cb53-2"><a href="qualifying.html#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(<span class="st">&#39;Q1_secs&#39;</span>, <span class="st">&#39;Q2_secs&#39;</span>, <span class="st">&#39;Q3_secs&#39;</span>),</span>
<span id="cb53-3"><a href="qualifying.html#cb53-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&#39;session&#39;</span>,</span>
<span id="cb53-4"><a href="qualifying.html#cb53-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&#39;time&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb53-5"><a href="qualifying.html#cb53-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">factor</span>(Year),</span>
<span id="cb53-6"><a href="qualifying.html#cb53-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">session =</span> <span class="fu">str_remove</span>(session, <span class="st">&#39;_secs&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb53-7"><a href="qualifying.html#cb53-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Race <span class="sc">==</span> <span class="st">&#39;bahrain&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb53-8"><a href="qualifying.html#cb53-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb53-9"><a href="qualifying.html#cb53-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density_ridges_gradient</span>(<span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">y =</span> Year, <span class="at">fill =</span> <span class="fu">stat</span>(x)),</span>
<span id="cb53-10"><a href="qualifying.html#cb53-10" aria-hidden="true" tabindex="-1"></a>                 <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">show.legend =</span> T,</span>
<span id="cb53-11"><a href="qualifying.html#cb53-11" aria-hidden="true" tabindex="-1"></a>                 <span class="at">position=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb53-12"><a href="qualifying.html#cb53-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb53-13"><a href="qualifying.html#cb53-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Qualifying Time (secs)&#39;</span>,</span>
<span id="cb53-14"><a href="qualifying.html#cb53-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Distribution of qualifying times at the Bahrain Grand Prix&#39;</span>,</span>
<span id="cb53-15"><a href="qualifying.html#cb53-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2014 - 2023&#39;</span>)<span class="sc">+</span></span>
<span id="cb53-16"><a href="qualifying.html#cb53-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb53-17"><a href="qualifying.html#cb53-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb53-18"><a href="qualifying.html#cb53-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&#39;none&#39;</span>) <span class="sc">+</span></span>
<span id="cb53-19"><a href="qualifying.html#cb53-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-47-1.png" width="768" style="display: block; margin: auto;" /></p>
<p>Much better!</p>
<p><br>
<br></p>
<div class="blackbox">
<div class="center">
<p><strong>How to create a ridgeline plot in R</strong></p>
</div>
<p>Density ridgelines are a way to visualize shifts in distributions across another variable. The name <em>ridgeline</em> was given because these plots give the impression of a mountain <em>ridge</em>.</p>
<p>The <strong>ggridges</strong> package provides two main geometries for creating ridgeline plots:</p>
<ul>
<li><code>geom_ridgeline()</code></li>
<li><code>geom_density_ridges()</code></li>
</ul>
<p><code>geom_ridgeline()</code> takes height values directly to draw ridglines, while <code>geom_density_ridges()</code> first estimates the data densities before drawing the ridgelines. In my opinion, <code>geom_density_ridges()</code> is easier to use.</p>
<p>For more information on <strong>ggridges</strong>, visit this link: <a href="https://cran.r-project.org/web/packages/ggridges/vignettes/introduction.html" class="uri">https://cran.r-project.org/web/packages/ggridges/vignettes/introduction.html</a></p>
</div>
<p><br>
<br></p>
<p>One challenge with the qualifying data is that the fastest drivers are counted three times and the slowest only once. All drivers will typically have a Q1 time, but the fastest cars are probably driving more conservatively. So, how do we make comparisons between drivers? I prefer taking each driver’s fastest time in their last session. So, if a driver made it to Q2 but not Q3, we should use his Q2 time. To use this data, we will need to further tidy up the data that we currently have using the following code:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="qualifying.html#cb54-1" aria-hidden="true" tabindex="-1"></a>qualifying_allyears <span class="ot">&lt;-</span> qualifying_allyears <span class="sc">%&gt;%</span></span>
<span id="cb54-2"><a href="qualifying.html#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Q_secs =</span> <span class="fu">case_when</span>(</span>
<span id="cb54-3"><a href="qualifying.html#cb54-3" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span><span class="fu">is.na</span>(Q3_secs) <span class="sc">~</span> Q3_secs,</span>
<span id="cb54-4"><a href="qualifying.html#cb54-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">is.na</span>(Q3_secs) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(Q2_secs) <span class="sc">~</span> Q2_secs,</span>
<span id="cb54-5"><a href="qualifying.html#cb54-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">is.na</span>(Q3_secs) <span class="sc">&amp;</span> <span class="fu">is.na</span>(Q2_secs) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(Q1_secs) <span class="sc">~</span> Q1_secs)) </span></code></pre></div>
<p>Now, I will use <code>geom_histogram()</code> / <code>geom_density()</code> to compare two Grands Prix: Bahrain vs Monaco.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="qualifying.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># histogram</span></span>
<span id="cb55-2"><a href="qualifying.html#cb55-2" aria-hidden="true" tabindex="-1"></a>qualifying_allyears <span class="sc">%&gt;%</span></span>
<span id="cb55-3"><a href="qualifying.html#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">factor</span>(Year)) <span class="sc">%&gt;%</span></span>
<span id="cb55-4"><a href="qualifying.html#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Race <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;bahrain&#39;</span>, <span class="st">&#39;monaco&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb55-5"><a href="qualifying.html#cb55-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb55-6"><a href="qualifying.html#cb55-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> Q_secs, <span class="at">fill =</span> Race),</span>
<span id="cb55-7"><a href="qualifying.html#cb55-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">show.legend =</span> T,</span>
<span id="cb55-8"><a href="qualifying.html#cb55-8" aria-hidden="true" tabindex="-1"></a>                 <span class="at">position=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb55-9"><a href="qualifying.html#cb55-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb55-10"><a href="qualifying.html#cb55-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&#39;Grand Prix&#39;</span>,</span>
<span id="cb55-11"><a href="qualifying.html#cb55-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&#39;Qualifying Time (secs)&#39;</span>,</span>
<span id="cb55-12"><a href="qualifying.html#cb55-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Distribution of qualifying times&#39;</span>,</span>
<span id="cb55-13"><a href="qualifying.html#cb55-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;Bahrain vs Monaco&#39;</span>)<span class="sc">+</span></span>
<span id="cb55-14"><a href="qualifying.html#cb55-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb55-15"><a href="qualifying.html#cb55-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>)) </span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-49-1.png" width="768" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="qualifying.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co">#density</span></span>
<span id="cb56-2"><a href="qualifying.html#cb56-2" aria-hidden="true" tabindex="-1"></a>qualifying_allyears <span class="sc">%&gt;%</span></span>
<span id="cb56-3"><a href="qualifying.html#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">factor</span>(Year)) <span class="sc">%&gt;%</span></span>
<span id="cb56-4"><a href="qualifying.html#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Race <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;bahrain&#39;</span>, <span class="st">&#39;monaco&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb56-5"><a href="qualifying.html#cb56-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb56-6"><a href="qualifying.html#cb56-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">x =</span> Q_secs, <span class="at">fill =</span> Race),</span>
<span id="cb56-7"><a href="qualifying.html#cb56-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">show.legend =</span> T,</span>
<span id="cb56-8"><a href="qualifying.html#cb56-8" aria-hidden="true" tabindex="-1"></a>                 <span class="at">position=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb56-9"><a href="qualifying.html#cb56-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb56-10"><a href="qualifying.html#cb56-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&#39;Grand Prix&#39;</span>,</span>
<span id="cb56-11"><a href="qualifying.html#cb56-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&#39;Qualifying Time (secs)&#39;</span>,</span>
<span id="cb56-12"><a href="qualifying.html#cb56-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Distribution of qualifying times&#39;</span>,</span>
<span id="cb56-13"><a href="qualifying.html#cb56-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;Bahrain vs Monaco&#39;</span>)<span class="sc">+</span></span>
<span id="cb56-14"><a href="qualifying.html#cb56-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb56-15"><a href="qualifying.html#cb56-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>)) </span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-49-2.png" width="768" style="display: block; margin: auto;" /></p>
<p>Clearly times in Bahrain are different than those at Monaco. In fact, all circuits are going to vary to some degree. The following figure shows the average qualifying times by Grand Prix.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="qualifying.html#cb57-1" aria-hidden="true" tabindex="-1"></a>qualifying_allyears <span class="sc">%&gt;%</span></span>
<span id="cb57-2"><a href="qualifying.html#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Race) <span class="sc">%&gt;%</span></span>
<span id="cb57-3"><a href="qualifying.html#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(Q_secs, <span class="at">na.rm =</span> T),</span>
<span id="cb57-4"><a href="qualifying.html#cb57-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">sd =</span> <span class="fu">sd</span>(Q_secs, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span> </span>
<span id="cb57-5"><a href="qualifying.html#cb57-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> mean, <span class="at">y =</span> <span class="fu">fct_reorder</span>(Race, mean))) <span class="sc">+</span></span>
<span id="cb57-6"><a href="qualifying.html#cb57-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">h =</span> <span class="dv">0</span>, <span class="at">w =</span> <span class="fl">0.3</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb57-7"><a href="qualifying.html#cb57-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="fu">seq</span>(<span class="dv">37</span>, <span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>), <span class="at">col =</span> <span class="st">&#39;grey&#39;</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">alpha =</span> <span class="fl">0.15</span>) <span class="sc">+</span></span>
<span id="cb57-8"><a href="qualifying.html#cb57-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb57-9"><a href="qualifying.html#cb57-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Average Qualifying Time (secs)&#39;</span>,</span>
<span id="cb57-10"><a href="qualifying.html#cb57-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Grand Prix&#39;</span>,</span>
<span id="cb57-11"><a href="qualifying.html#cb57-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Average Qualifying Times&#39;</span>,</span>
<span id="cb57-12"><a href="qualifying.html#cb57-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2014 - 2023&#39;</span>)<span class="sc">+</span></span>
<span id="cb57-13"><a href="qualifying.html#cb57-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb57-14"><a href="qualifying.html#cb57-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb57-15"><a href="qualifying.html#cb57-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-50-1.png" width="768" style="display: block; margin: auto;" /></p>
<p>A lot can happen during a qualifying session causing variability among the cars. There is a spectrum of performance across cars, drivers, sessions, and year. Therefore, it’s a good idea to include a measure of variance in this plot. So, we can add standard error bars to the plot we just made.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="qualifying.html#cb58-1" aria-hidden="true" tabindex="-1"></a>qualifying_allyears <span class="sc">%&gt;%</span></span>
<span id="cb58-2"><a href="qualifying.html#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Race) <span class="sc">%&gt;%</span></span>
<span id="cb58-3"><a href="qualifying.html#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(Q_secs, <span class="at">na.rm =</span> T),</span>
<span id="cb58-4"><a href="qualifying.html#cb58-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">sd =</span> <span class="fu">sd</span>(Q_secs, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span> </span>
<span id="cb58-5"><a href="qualifying.html#cb58-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">lower =</span> mean  <span class="sc">-</span> sd,</span>
<span id="cb58-6"><a href="qualifying.html#cb58-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">upper =</span> mean <span class="sc">+</span> sd) <span class="sc">%&gt;%</span> </span>
<span id="cb58-7"><a href="qualifying.html#cb58-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> mean, <span class="at">xmin =</span> lower, <span class="at">xmax =</span> upper, <span class="at">y =</span> <span class="fu">fct_reorder</span>(Race, mean))) <span class="sc">+</span></span>
<span id="cb58-8"><a href="qualifying.html#cb58-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_pointrange</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb58-9"><a href="qualifying.html#cb58-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="fu">seq</span>(<span class="dv">37</span>, <span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>), <span class="at">col =</span> <span class="st">&#39;grey&#39;</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">alpha =</span> <span class="fl">0.15</span>) <span class="sc">+</span></span>
<span id="cb58-10"><a href="qualifying.html#cb58-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb58-11"><a href="qualifying.html#cb58-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Average Qualifying Time \u00b1 SD (secs)&#39;</span>,</span>
<span id="cb58-12"><a href="qualifying.html#cb58-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Grand Prix&#39;</span>,</span>
<span id="cb58-13"><a href="qualifying.html#cb58-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Average Qualifying Times&#39;</span>,</span>
<span id="cb58-14"><a href="qualifying.html#cb58-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2014 - 2023&#39;</span>)<span class="sc">+</span></span>
<span id="cb58-15"><a href="qualifying.html#cb58-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb58-16"><a href="qualifying.html#cb58-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb58-17"><a href="qualifying.html#cb58-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-51-1.png" width="768" style="display: block; margin: auto;" /></p>
<p><br>
<br></p>
<div class="blackbox">
<div class="center">
<p><strong>Plotting a point-range in ggplot</strong></p>
</div>
<p>Similar to earlier plots using <code>stat_summary()</code>, we can manually construct a point-range in <strong>ggplot</strong> using the <code>geom_pointrange()</code>.</p>
<p>In the example above, the continuous variable is plotted along the x-axis. I wanted to plot the mean ± 1 standard deviation, so I pass arguments for <code>x</code>, <code>xmin</code> and <code>xmax</code> that define the mean, minimum, and maximum values in this geometry.</p>
<p>For more information on using <code>geom_pointrange()</code> in <strong>ggplot2</strong>, visit this link: <a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html" class="uri">https://ggplot2.tidyverse.org/reference/geom_linerange.html</a></p>
</div>
<p><br>
<br></p>
<p>Previously, we demonstrated that <em>practice</em> times vary by year. So, qualifying times must follow a similar pattern. Using the code below, we can plot the average qualifying times by year.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="qualifying.html#cb59-1" aria-hidden="true" tabindex="-1"></a>qualifying_allyears <span class="sc">%&gt;%</span></span>
<span id="cb59-2"><a href="qualifying.html#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">factor</span>(Year)) <span class="sc">%&gt;%</span></span>
<span id="cb59-3"><a href="qualifying.html#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year) <span class="sc">%&gt;%</span></span>
<span id="cb59-4"><a href="qualifying.html#cb59-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(Q_secs, <span class="at">na.rm =</span> T),</span>
<span id="cb59-5"><a href="qualifying.html#cb59-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">sd =</span> <span class="fu">sd</span>(Q_secs, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span> </span>
<span id="cb59-6"><a href="qualifying.html#cb59-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">lower =</span> mean  <span class="sc">-</span> sd,</span>
<span id="cb59-7"><a href="qualifying.html#cb59-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">upper =</span> mean <span class="sc">+</span> sd) <span class="sc">%&gt;%</span></span>
<span id="cb59-8"><a href="qualifying.html#cb59-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> mean, <span class="at">x =</span> Year)) <span class="sc">+</span></span>
<span id="cb59-9"><a href="qualifying.html#cb59-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb59-10"><a href="qualifying.html#cb59-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb59-11"><a href="qualifying.html#cb59-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Year&#39;</span>,</span>
<span id="cb59-12"><a href="qualifying.html#cb59-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Average Qualifying Time (secs)&#39;</span>,</span>
<span id="cb59-13"><a href="qualifying.html#cb59-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Average Qualifying Times&#39;</span>,</span>
<span id="cb59-14"><a href="qualifying.html#cb59-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2014 - 2023&#39;</span>)<span class="sc">+</span></span>
<span id="cb59-15"><a href="qualifying.html#cb59-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb59-16"><a href="qualifying.html#cb59-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb59-17"><a href="qualifying.html#cb59-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-52-1.png" width="768" style="display: block; margin: auto;" /></p>
<p>This plot computes an average for all cars and circuits. This collection of qualifying times will undoubtedly include lots of variability! Using <code>geom_pointrange()</code>, we can try to capture that variability in the plot below:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="qualifying.html#cb60-1" aria-hidden="true" tabindex="-1"></a>qualifying_allyears <span class="sc">%&gt;%</span></span>
<span id="cb60-2"><a href="qualifying.html#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">factor</span>(Year)) <span class="sc">%&gt;%</span></span>
<span id="cb60-3"><a href="qualifying.html#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year) <span class="sc">%&gt;%</span></span>
<span id="cb60-4"><a href="qualifying.html#cb60-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(Q_secs, <span class="at">na.rm =</span> T),</span>
<span id="cb60-5"><a href="qualifying.html#cb60-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">sd =</span> <span class="fu">sd</span>(Q_secs, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span> </span>
<span id="cb60-6"><a href="qualifying.html#cb60-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">lower =</span> mean  <span class="sc">-</span> sd,</span>
<span id="cb60-7"><a href="qualifying.html#cb60-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">upper =</span> mean <span class="sc">+</span> sd) <span class="sc">%&gt;%</span></span>
<span id="cb60-8"><a href="qualifying.html#cb60-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> mean, <span class="at">ymin =</span> lower, <span class="at">ymax =</span> upper, <span class="at">x =</span> Year)) <span class="sc">+</span></span>
<span id="cb60-9"><a href="qualifying.html#cb60-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_pointrange</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb60-10"><a href="qualifying.html#cb60-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb60-11"><a href="qualifying.html#cb60-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Year&#39;</span>,</span>
<span id="cb60-12"><a href="qualifying.html#cb60-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Average Qualifying Time \u00b1 SD (secs)&#39;</span>,</span>
<span id="cb60-13"><a href="qualifying.html#cb60-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Average Qualifying Times&#39;</span>,</span>
<span id="cb60-14"><a href="qualifying.html#cb60-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2014 - 2023&#39;</span>)<span class="sc">+</span></span>
<span id="cb60-15"><a href="qualifying.html#cb60-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb60-16"><a href="qualifying.html#cb60-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb60-17"><a href="qualifying.html#cb60-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-53-1.png" width="768" style="display: block; margin: auto;" /></p>
<p>To chip away at this variability, we can replicate this plot for just a handful of circuits (i.e. Australia, Monaco, Brazil, Austria, Canada, and the United States). Below, I use <code>facet_wrap()</code> to split the figure and assign each circuit its own facet. Notice how much tighter the standard deviations have become… much better!</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="qualifying.html#cb61-1" aria-hidden="true" tabindex="-1"></a>qualifying_allyears <span class="sc">%&gt;%</span></span>
<span id="cb61-2"><a href="qualifying.html#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Race <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;australia&#39;</span>, <span class="st">&#39;monaco&#39;</span>, <span class="st">&#39;brazil&#39;</span>, <span class="st">&#39;austria&#39;</span>, <span class="st">&#39;canada&#39;</span>, <span class="st">&#39;united-states&#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb61-3"><a href="qualifying.html#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">factor</span>(Year)) <span class="sc">%&gt;%</span></span>
<span id="cb61-4"><a href="qualifying.html#cb61-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year, Race) <span class="sc">%&gt;%</span></span>
<span id="cb61-5"><a href="qualifying.html#cb61-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(Q_secs, <span class="at">na.rm =</span> T),</span>
<span id="cb61-6"><a href="qualifying.html#cb61-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">sd =</span> <span class="fu">sd</span>(Q_secs, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span> </span>
<span id="cb61-7"><a href="qualifying.html#cb61-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">lower =</span> mean  <span class="sc">-</span> sd,</span>
<span id="cb61-8"><a href="qualifying.html#cb61-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">upper =</span> mean <span class="sc">+</span> sd) <span class="sc">%&gt;%</span> </span>
<span id="cb61-9"><a href="qualifying.html#cb61-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb61-10"><a href="qualifying.html#cb61-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> mean, <span class="at">ymin =</span> lower, <span class="at">ymax =</span> upper, <span class="at">x =</span> Year)) <span class="sc">+</span></span>
<span id="cb61-11"><a href="qualifying.html#cb61-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_pointrange</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb61-12"><a href="qualifying.html#cb61-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb61-13"><a href="qualifying.html#cb61-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Year&#39;</span>,</span>
<span id="cb61-14"><a href="qualifying.html#cb61-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Average Qualifying Time \u00b1 SD (secs)&#39;</span>,</span>
<span id="cb61-15"><a href="qualifying.html#cb61-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Average Qualifying Times&#39;</span>,</span>
<span id="cb61-16"><a href="qualifying.html#cb61-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2014 - 2023&#39;</span>)<span class="sc">+</span></span>
<span id="cb61-17"><a href="qualifying.html#cb61-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">18</span>),</span>
<span id="cb61-18"><a href="qualifying.html#cb61-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">15</span>),</span>
<span id="cb61-19"><a href="qualifying.html#cb61-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb61-20"><a href="qualifying.html#cb61-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust=</span><span class="dv">1</span>, <span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb61-21"><a href="qualifying.html#cb61-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb61-22"><a href="qualifying.html#cb61-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb61-23"><a href="qualifying.html#cb61-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb61-24"><a href="qualifying.html#cb61-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>)) <span class="sc">+</span></span>
<span id="cb61-25"><a href="qualifying.html#cb61-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> Race, <span class="at">scales =</span> <span class="st">&#39;free_y&#39;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-54-1.png" width="1152" style="display: block; margin: auto;" /></p>
<p>In the next section, we will dive a bit deeper into qualifying time progression.</p>
</div>
<div id="car-progression-over-time" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Car Progression Over Time<a href="qualifying.html#car-progression-over-time" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>How does car development progress over time? Below, we can look at how the qualifying pace changes over time for the first race of most years: the Australian Grand Prix.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="qualifying.html#cb62-1" aria-hidden="true" tabindex="-1"></a>qualifying_allyears <span class="sc">%&gt;%</span></span>
<span id="cb62-2"><a href="qualifying.html#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">factor</span>(Year)) <span class="sc">%&gt;%</span></span>
<span id="cb62-3"><a href="qualifying.html#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Race <span class="sc">==</span> <span class="st">&#39;australia&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb62-4"><a href="qualifying.html#cb62-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(Year, Q_secs)) <span class="sc">+</span></span>
<span id="cb62-5"><a href="qualifying.html#cb62-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">h =</span> <span class="dv">0</span>, <span class="at">w =</span> <span class="fl">0.3</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb62-6"><a href="qualifying.html#cb62-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb62-7"><a href="qualifying.html#cb62-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Year&#39;</span>,</span>
<span id="cb62-8"><a href="qualifying.html#cb62-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Best Qualifying Time (secs)&#39;</span>,</span>
<span id="cb62-9"><a href="qualifying.html#cb62-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Australian Grand Prix Qualifying&#39;</span>,</span>
<span id="cb62-10"><a href="qualifying.html#cb62-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2014 - 2023&#39;</span>) <span class="sc">+</span></span>
<span id="cb62-11"><a href="qualifying.html#cb62-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb62-12"><a href="qualifying.html#cb62-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-55-1.png" width="768" style="display: block; margin: auto;" /></p>
<p>During 2014 qualifying in Australia, rain arrived during Q2. I will color these points in blue below.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="qualifying.html#cb63-1" aria-hidden="true" tabindex="-1"></a>qualifying_allyears <span class="sc">%&gt;%</span></span>
<span id="cb63-2"><a href="qualifying.html#cb63-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">factor</span>(Year)) <span class="sc">%&gt;%</span></span>
<span id="cb63-3"><a href="qualifying.html#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Race <span class="sc">==</span> <span class="st">&#39;australia&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb63-4"><a href="qualifying.html#cb63-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rain =</span> <span class="fu">ifelse</span>(Year <span class="sc">==</span> <span class="st">&#39;2014&#39;</span> <span class="sc">&amp;</span> Q_secs <span class="sc">&gt;</span> <span class="dv">100</span>, <span class="st">&#39;rain during Q2 &amp; Q3&#39;</span>, <span class="st">&#39; &#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb63-5"><a href="qualifying.html#cb63-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb63-6"><a href="qualifying.html#cb63-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(Year, Q_secs),</span>
<span id="cb63-7"><a href="qualifying.html#cb63-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">seed=</span> <span class="dv">123</span>, <span class="at">h =</span> <span class="dv">0</span>, <span class="at">w =</span> <span class="fl">0.3</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb63-8"><a href="qualifying.html#cb63-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(Year, Q_secs, <span class="at">col =</span> rain), </span>
<span id="cb63-9"><a href="qualifying.html#cb63-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">seed =</span> <span class="dv">123</span>, <span class="at">h =</span> <span class="dv">0</span>, <span class="at">w =</span> <span class="fl">0.3</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb63-10"><a href="qualifying.html#cb63-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb63-11"><a href="qualifying.html#cb63-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Year&#39;</span>,</span>
<span id="cb63-12"><a href="qualifying.html#cb63-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Best Qualifying Time (secs)&#39;</span>,</span>
<span id="cb63-13"><a href="qualifying.html#cb63-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Australian Grand Prix Qualifying&#39;</span>,</span>
<span id="cb63-14"><a href="qualifying.html#cb63-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2014 - 2023&#39;</span>) <span class="sc">+</span></span>
<span id="cb63-15"><a href="qualifying.html#cb63-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_manual</span>(<span class="st">&quot;&quot;</span>, <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&#39;rain during Q2 &amp; Q3&#39;</span> <span class="ot">=</span> <span class="st">&#39;cornflowerblue&#39;</span>, <span class="st">&#39; &#39;</span> <span class="ot">=</span> <span class="st">&#39;transparent&#39;</span>)) <span class="sc">+</span></span>
<span id="cb63-16"><a href="qualifying.html#cb63-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb63-17"><a href="qualifying.html#cb63-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-56-1.png" width="768" style="display: block; margin: auto;" /></p>
<p><br>
<br></p>
<div class="blackbox">
<div class="center">
<p><strong>Reproducible <em>jittering</em> in ggplot</strong></p>
</div>
<p>In the plot above, I had to get a bit creative. My goal was to highlight the times in 2014 by using a blue color. And, I only wanted a single label for those times. My solution was to plot all points as a first layer, and then re-plot the data using a conditional coloring if the data was labeled with <code>rain</code>. The first layer was randomly jittered, so I needed to preserve that randomness for the second layer. To accomplish this, I passed an argument for a random seed (i.e. <code>seed = 123</code>) to ensure that the <em>jitter</em> was reproducible.</p>
<p>For more information on <em>jittering</em> in <strong>ggplot2</strong>, visit this link: <a href="https://ggplot2.tidyverse.org/reference/position_jitter.html" class="uri">https://ggplot2.tidyverse.org/reference/position_jitter.html</a></p>
</div>
<p><br>
<br></p>
<p>These times set during a rainy qualifying session would complicate our understanding of a car’s progression over time. To avoid their influence, we can filter the rain-influenced times from Q2 and Q3 in 2014, and re-plot below. I’ll add a best-fit linear regression line that describes the improvement of qualifying times from 2014 to 2022, on average.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="qualifying.html#cb64-1" aria-hidden="true" tabindex="-1"></a>qualifying_allyears <span class="sc">%&gt;%</span></span>
<span id="cb64-2"><a href="qualifying.html#cb64-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Race <span class="sc">==</span> <span class="st">&#39;australia&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb64-3"><a href="qualifying.html#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rain =</span> <span class="fu">ifelse</span>(Year <span class="sc">==</span> <span class="dv">2014</span> <span class="sc">&amp;</span> Q_secs <span class="sc">&gt;</span> <span class="dv">100</span>, <span class="st">&#39;rain during Q2&#39;</span>, <span class="st">&#39; &#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb64-4"><a href="qualifying.html#cb64-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rain <span class="sc">==</span> <span class="st">&#39; &#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb64-5"><a href="qualifying.html#cb64-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(Year, Q_secs)) <span class="sc">+</span></span>
<span id="cb64-6"><a href="qualifying.html#cb64-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">seed=</span> <span class="dv">123</span>, <span class="at">h =</span> <span class="dv">0</span>, <span class="at">w =</span> <span class="fl">0.3</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb64-7"><a href="qualifying.html#cb64-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_smooth</span>(<span class="at">method =</span> <span class="st">&#39;lm&#39;</span>, <span class="at">se =</span> F, <span class="at">size =</span> <span class="fl">0.3</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb64-8"><a href="qualifying.html#cb64-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb64-9"><a href="qualifying.html#cb64-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Year&#39;</span>,</span>
<span id="cb64-10"><a href="qualifying.html#cb64-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Best Qualifying Time (secs)&#39;</span>,</span>
<span id="cb64-11"><a href="qualifying.html#cb64-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Australian Grand Prix Qualifying&#39;</span>,</span>
<span id="cb64-12"><a href="qualifying.html#cb64-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2014 - 2023&#39;</span>) <span class="sc">+</span></span>
<span id="cb64-13"><a href="qualifying.html#cb64-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">2014</span>, <span class="dv">2015</span>, <span class="dv">2016</span>, <span class="dv">2017</span>, <span class="dv">2018</span>, <span class="dv">2019</span>, <span class="dv">2020</span>, <span class="dv">2021</span>, <span class="dv">2022</span>)) <span class="sc">+</span></span>
<span id="cb64-14"><a href="qualifying.html#cb64-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb64-15"><a href="qualifying.html#cb64-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-57-1.png" width="768" style="display: block; margin: auto;" /></p>
<p><br>
<br></p>
<div class="blackbox">
<div class="center">
<p><strong>Adding a best-fit line in ggplot</strong></p>
</div>
<p>The <code>stat_smooth()</code> function in <strong>ggplot2</strong> can help aid the eye in observing patterns in the data. If no method is declared in the function call, a <strong>loess</strong> (locally estimated scatter plot smoothing) function is fit to the data.</p>
<p>In the example above, I add <code>method = "lm"</code> to the function call, which adds a linear model to the data. By default, <code>stat_smooth()</code> also adds a 95% confidence interval around the fit. In the example above, I disabled the confidence interval by adding <code>se = FALSE</code> to the call.</p>
<p>For more information on best-fit lines, or smoothed conditional means, in <strong>ggplot2</strong>, visit this link: <a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html" class="uri">https://ggplot2.tidyverse.org/reference/geom_smooth.html</a></p>
</div>
<p><br>
<br></p>
<p>While the <code>stat_smooth()</code> function allows us to easily add a linear regression line to the scatter plot, it doesn’t quantify the coefficient estimates. In the next chapter, we will explore using linear regression models to estimate the relationship between practice times, qualifying times, and more!</p>
</div>
<div id="next-chapter-1" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> Next Chapter<a href="qualifying.html#next-chapter-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In the next chapter, I will explore the relationship between practice pace and qualifying pace.</p>
<div style="page-break-after: always;"></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction-to-formula-1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="modeling-practice-and-qualifying-times.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/02-qualifying.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
