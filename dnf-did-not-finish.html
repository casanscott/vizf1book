<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 DNF (Did Not Finish) | Visualizing Formula 1 Data in R</title>
  <meta name="description" content="This is a book documenting data visualizations of Formula 1 data." />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 DNF (Did Not Finish) | Visualizing Formula 1 Data in R" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="/F1_book_cover.PNG" />
  <meta property="og:description" content="This is a book documenting data visualizations of Formula 1 data." />
  <meta name="github-repo" content="casanscott/vizf1book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 DNF (Did Not Finish) | Visualizing Formula 1 Data in R" />
  
  <meta name="twitter:description" content="This is a book documenting data visualizations of Formula 1 data." />
  <meta name="twitter:image" content="/F1_book_cover.PNG" />

<meta name="author" content="Casan Scott, Ph.D." />


<meta name="date" content="2024-02-24" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="modeling-race-results.html"/>
<link rel="next" href="the-wdc-world-drivers-championship.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Visualizing Formula 1 Data in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> About the book</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#cover-art"><i class="fa fa-check"></i><b>1.1</b> Cover Art</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#about-me"><i class="fa fa-check"></i><b>1.2</b> About me</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#why-did-i-write-this-book"><i class="fa fa-check"></i><b>1.3</b> Why did I write this book?</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#organization-of-this-book"><i class="fa fa-check"></i><b>1.4</b> Organization of this book</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#r"><i class="fa fa-check"></i><b>1.5</b> R</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#ggplot2"><i class="fa fa-check"></i><b>1.6</b> ggplot2</a></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="index.html#the-tidyverse"><i class="fa fa-check"></i><b>1.7</b> The <em>tidyverse</em></a></li>
<li class="chapter" data-level="1.8" data-path="index.html"><a href="index.html#data"><i class="fa fa-check"></i><b>1.8</b> Data</a></li>
<li class="chapter" data-level="1.9" data-path="index.html"><a href="index.html#data-visualization"><i class="fa fa-check"></i><b>1.9</b> Data Visualization</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-formula-1.html"><a href="introduction-to-formula-1.html"><i class="fa fa-check"></i><b>2</b> Introduction to Formula 1</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-formula-1.html"><a href="introduction-to-formula-1.html#data-1"><i class="fa fa-check"></i><b>2.1</b> Data</a></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-formula-1.html"><a href="introduction-to-formula-1.html#a-formula-1-weekend"><i class="fa fa-check"></i><b>2.2</b> A Formula 1 Weekend</a></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-formula-1.html"><a href="introduction-to-formula-1.html#practice-sessions"><i class="fa fa-check"></i><b>2.3</b> Practice Sessions</a></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-formula-1.html"><a href="introduction-to-formula-1.html#practice-times-by-driver"><i class="fa fa-check"></i><b>2.4</b> Practice Times by Driver</a></li>
<li class="chapter" data-level="2.5" data-path="introduction-to-formula-1.html"><a href="introduction-to-formula-1.html#next-chapter"><i class="fa fa-check"></i><b>2.5</b> Next Chapter</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="qualifying.html"><a href="qualifying.html"><i class="fa fa-check"></i><b>3</b> Qualifying</a>
<ul>
<li class="chapter" data-level="3.1" data-path="qualifying.html"><a href="qualifying.html#distribution-of-qualifying-times-by-session"><i class="fa fa-check"></i><b>3.1</b> Distribution of Qualifying Times by Session</a></li>
<li class="chapter" data-level="3.2" data-path="qualifying.html"><a href="qualifying.html#distribution-of-qualifying-times-by-year"><i class="fa fa-check"></i><b>3.2</b> Distribution of Qualifying Times by Year</a></li>
<li class="chapter" data-level="3.3" data-path="qualifying.html"><a href="qualifying.html#qualifying-times-by-grand-prix"><i class="fa fa-check"></i><b>3.3</b> Qualifying Times by Grand Prix</a></li>
<li class="chapter" data-level="3.4" data-path="qualifying.html"><a href="qualifying.html#car-progression-over-time"><i class="fa fa-check"></i><b>3.4</b> Car Progression Over Time</a></li>
<li class="chapter" data-level="3.5" data-path="qualifying.html"><a href="qualifying.html#next-chapter-1"><i class="fa fa-check"></i><b>3.5</b> Next Chapter</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="modeling-practice-and-qualifying-times.html"><a href="modeling-practice-and-qualifying-times.html"><i class="fa fa-check"></i><b>4</b> Modeling Practice and Qualifying Times</a>
<ul>
<li class="chapter" data-level="4.1" data-path="modeling-practice-and-qualifying-times.html"><a href="modeling-practice-and-qualifying-times.html#models"><i class="fa fa-check"></i><b>4.1</b> Models</a></li>
<li class="chapter" data-level="4.2" data-path="modeling-practice-and-qualifying-times.html"><a href="modeling-practice-and-qualifying-times.html#simple-linear-regression-model-practice-vs-qualifying-times"><i class="fa fa-check"></i><b>4.2</b> Simple Linear Regression Model: Practice vs Qualifying Times</a></li>
<li class="chapter" data-level="4.3" data-path="modeling-practice-and-qualifying-times.html"><a href="modeling-practice-and-qualifying-times.html#simple-linear-regression-model-qualifying-time-vs-year"><i class="fa fa-check"></i><b>4.3</b> Simple Linear Regression Model: Qualifying time vs Year</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="modeling-practice-and-qualifying-times.html"><a href="modeling-practice-and-qualifying-times.html#uncertainty-in-model-estimates"><i class="fa fa-check"></i><b>4.3.1</b> Uncertainty in model estimates</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="modeling-practice-and-qualifying-times.html"><a href="modeling-practice-and-qualifying-times.html#interaction-model"><i class="fa fa-check"></i><b>4.4</b> Interaction Model</a></li>
<li class="chapter" data-level="4.5" data-path="modeling-practice-and-qualifying-times.html"><a href="modeling-practice-and-qualifying-times.html#next-chapter-2"><i class="fa fa-check"></i><b>4.5</b> Next Chapter</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="drivers.html"><a href="drivers.html"><i class="fa fa-check"></i><b>5</b> Drivers</a>
<ul>
<li class="chapter" data-level="5.1" data-path="drivers.html"><a href="drivers.html#race-performance"><i class="fa fa-check"></i><b>5.1</b> Race Performance</a></li>
<li class="chapter" data-level="5.2" data-path="drivers.html"><a href="drivers.html#qualifying-pace"><i class="fa fa-check"></i><b>5.2</b> Qualifying Pace</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="drivers.html"><a href="drivers.html#section"><i class="fa fa-check"></i><b>5.2.1</b> 2023</a></li>
<li class="chapter" data-level="5.2.2" data-path="drivers.html"><a href="drivers.html#section-1"><i class="fa fa-check"></i><b>5.2.2</b> 2022</a></li>
<li class="chapter" data-level="5.2.3" data-path="drivers.html"><a href="drivers.html#section-2"><i class="fa fa-check"></i><b>5.2.3</b> 2021</a></li>
<li class="chapter" data-level="5.2.4" data-path="drivers.html"><a href="drivers.html#section-3"><i class="fa fa-check"></i><b>5.2.4</b> 2020</a></li>
<li class="chapter" data-level="5.2.5" data-path="drivers.html"><a href="drivers.html#section-4"><i class="fa fa-check"></i><b>5.2.5</b> 2019</a></li>
<li class="chapter" data-level="5.2.6" data-path="drivers.html"><a href="drivers.html#section-5"><i class="fa fa-check"></i><b>5.2.6</b> 2018</a></li>
<li class="chapter" data-level="5.2.7" data-path="drivers.html"><a href="drivers.html#section-6"><i class="fa fa-check"></i><b>5.2.7</b> 2017</a></li>
<li class="chapter" data-level="5.2.8" data-path="drivers.html"><a href="drivers.html#section-7"><i class="fa fa-check"></i><b>5.2.8</b> 2016</a></li>
<li class="chapter" data-level="5.2.9" data-path="drivers.html"><a href="drivers.html#section-8"><i class="fa fa-check"></i><b>5.2.9</b> 2015</a></li>
<li class="chapter" data-level="5.2.10" data-path="drivers.html"><a href="drivers.html#section-9"><i class="fa fa-check"></i><b>5.2.10</b> 2014</a></li>
<li class="chapter" data-level="5.2.11" data-path="drivers.html"><a href="drivers.html#next-chapter-3"><i class="fa fa-check"></i><b>5.2.11</b> Next Chapter</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="modeling-race-results.html"><a href="modeling-race-results.html"><i class="fa fa-check"></i><b>6</b> Modeling Race Results</a>
<ul>
<li class="chapter" data-level="6.1" data-path="modeling-race-results.html"><a href="modeling-race-results.html#starting-position-vs-finish-position"><i class="fa fa-check"></i><b>6.1</b> Starting Position vs Finish Position</a></li>
<li class="chapter" data-level="6.2" data-path="modeling-race-results.html"><a href="modeling-race-results.html#shortcomings-of-a-simple-linear-regression-model"><i class="fa fa-check"></i><b>6.2</b> Shortcomings of a simple linear regression model</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="modeling-race-results.html"><a href="modeling-race-results.html#linearity"><i class="fa fa-check"></i><b>6.2.1</b> Linearity</a></li>
<li class="chapter" data-level="6.2.2" data-path="modeling-race-results.html"><a href="modeling-race-results.html#homoscedasticity"><i class="fa fa-check"></i><b>6.2.2</b> Homoscedasticity</a></li>
<li class="chapter" data-level="6.2.3" data-path="modeling-race-results.html"><a href="modeling-race-results.html#independence"><i class="fa fa-check"></i><b>6.2.3</b> Independence</a></li>
<li class="chapter" data-level="6.2.4" data-path="modeling-race-results.html"><a href="modeling-race-results.html#normality"><i class="fa fa-check"></i><b>6.2.4</b> Normality</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="modeling-race-results.html"><a href="modeling-race-results.html#ordinal-regression-model"><i class="fa fa-check"></i><b>6.3</b> Ordinal regression model</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="modeling-race-results.html"><a href="modeling-race-results.html#prediction-grid"><i class="fa fa-check"></i><b>6.3.1</b> Prediction Grid</a></li>
<li class="chapter" data-level="6.3.2" data-path="modeling-race-results.html"><a href="modeling-race-results.html#yearly-differences-in-ordinal-regression-results"><i class="fa fa-check"></i><b>6.3.2</b> Yearly Differences in Ordinal Regression Results</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="modeling-race-results.html"><a href="modeling-race-results.html#explore-circuit-specific-models"><i class="fa fa-check"></i><b>6.4</b> Explore Circuit Specific Models</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="modeling-race-results.html"><a href="modeling-race-results.html#bahrain"><i class="fa fa-check"></i><b>6.4.1</b> Bahrain</a></li>
<li class="chapter" data-level="6.4.2" data-path="modeling-race-results.html"><a href="modeling-race-results.html#saudi-arabia"><i class="fa fa-check"></i><b>6.4.2</b> Saudi Arabia</a></li>
<li class="chapter" data-level="6.4.3" data-path="modeling-race-results.html"><a href="modeling-race-results.html#monaco"><i class="fa fa-check"></i><b>6.4.3</b> Monaco</a></li>
<li class="chapter" data-level="6.4.4" data-path="modeling-race-results.html"><a href="modeling-race-results.html#brazil"><i class="fa fa-check"></i><b>6.4.4</b> Brazil</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="modeling-race-results.html"><a href="modeling-race-results.html#appendix-probability-distributions-for-every-grand-prix"><i class="fa fa-check"></i><b>6.5</b> Appendix: Probability distributions for every Grand Prix</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="modeling-race-results.html"><a href="modeling-race-results.html#bahrain-1"><i class="fa fa-check"></i><b>6.5.1</b> Bahrain</a></li>
<li class="chapter" data-level="6.5.2" data-path="modeling-race-results.html"><a href="modeling-race-results.html#saudi-arabia-1"><i class="fa fa-check"></i><b>6.5.2</b> Saudi Arabia</a></li>
<li class="chapter" data-level="6.5.3" data-path="modeling-race-results.html"><a href="modeling-race-results.html#australia"><i class="fa fa-check"></i><b>6.5.3</b> Australia</a></li>
<li class="chapter" data-level="6.5.4" data-path="modeling-race-results.html"><a href="modeling-race-results.html#azerbaijan"><i class="fa fa-check"></i><b>6.5.4</b> Azerbaijan</a></li>
<li class="chapter" data-level="6.5.5" data-path="modeling-race-results.html"><a href="modeling-race-results.html#miami"><i class="fa fa-check"></i><b>6.5.5</b> Miami</a></li>
<li class="chapter" data-level="6.5.6" data-path="modeling-race-results.html"><a href="modeling-race-results.html#emilia-romagna"><i class="fa fa-check"></i><b>6.5.6</b> Emilia Romagna</a></li>
<li class="chapter" data-level="6.5.7" data-path="modeling-race-results.html"><a href="modeling-race-results.html#monaco-1"><i class="fa fa-check"></i><b>6.5.7</b> Monaco</a></li>
<li class="chapter" data-level="6.5.8" data-path="modeling-race-results.html"><a href="modeling-race-results.html#spain"><i class="fa fa-check"></i><b>6.5.8</b> Spain</a></li>
<li class="chapter" data-level="6.5.9" data-path="modeling-race-results.html"><a href="modeling-race-results.html#canada"><i class="fa fa-check"></i><b>6.5.9</b> Canada</a></li>
<li class="chapter" data-level="6.5.10" data-path="modeling-race-results.html"><a href="modeling-race-results.html#austria"><i class="fa fa-check"></i><b>6.5.10</b> Austria</a></li>
<li class="chapter" data-level="6.5.11" data-path="modeling-race-results.html"><a href="modeling-race-results.html#great-britain"><i class="fa fa-check"></i><b>6.5.11</b> Great Britain</a></li>
<li class="chapter" data-level="6.5.12" data-path="modeling-race-results.html"><a href="modeling-race-results.html#hungary"><i class="fa fa-check"></i><b>6.5.12</b> Hungary</a></li>
<li class="chapter" data-level="6.5.13" data-path="modeling-race-results.html"><a href="modeling-race-results.html#belgium"><i class="fa fa-check"></i><b>6.5.13</b> Belgium</a></li>
<li class="chapter" data-level="6.5.14" data-path="modeling-race-results.html"><a href="modeling-race-results.html#netherlands"><i class="fa fa-check"></i><b>6.5.14</b> Netherlands</a></li>
<li class="chapter" data-level="6.5.15" data-path="modeling-race-results.html"><a href="modeling-race-results.html#monza"><i class="fa fa-check"></i><b>6.5.15</b> Monza</a></li>
<li class="chapter" data-level="6.5.16" data-path="modeling-race-results.html"><a href="modeling-race-results.html#singapore"><i class="fa fa-check"></i><b>6.5.16</b> Singapore</a></li>
<li class="chapter" data-level="6.5.17" data-path="modeling-race-results.html"><a href="modeling-race-results.html#japan"><i class="fa fa-check"></i><b>6.5.17</b> Japan</a></li>
<li class="chapter" data-level="6.5.18" data-path="modeling-race-results.html"><a href="modeling-race-results.html#qatar"><i class="fa fa-check"></i><b>6.5.18</b> Qatar</a></li>
<li class="chapter" data-level="6.5.19" data-path="modeling-race-results.html"><a href="modeling-race-results.html#united-states-circuit-of-the-americas-in-austin-texas"><i class="fa fa-check"></i><b>6.5.19</b> United States (Circuit of the Americas in Austin, Texas)</a></li>
<li class="chapter" data-level="6.5.20" data-path="modeling-race-results.html"><a href="modeling-race-results.html#mexico"><i class="fa fa-check"></i><b>6.5.20</b> Mexico</a></li>
<li class="chapter" data-level="6.5.21" data-path="modeling-race-results.html"><a href="modeling-race-results.html#brazil-1"><i class="fa fa-check"></i><b>6.5.21</b> Brazil</a></li>
<li class="chapter" data-level="6.5.22" data-path="modeling-race-results.html"><a href="modeling-race-results.html#abu-dhabi"><i class="fa fa-check"></i><b>6.5.22</b> Abu Dhabi</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="modeling-race-results.html"><a href="modeling-race-results.html#next-chapter-4"><i class="fa fa-check"></i><b>6.6</b> Next Chapter</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="dnf-did-not-finish.html"><a href="dnf-did-not-finish.html"><i class="fa fa-check"></i><b>7</b> DNF (Did Not Finish)</a>
<ul>
<li class="chapter" data-level="7.1" data-path="dnf-did-not-finish.html"><a href="dnf-did-not-finish.html#logistic-regression"><i class="fa fa-check"></i><b>7.1</b> Logistic Regression</a></li>
<li class="chapter" data-level="7.2" data-path="dnf-did-not-finish.html"><a href="dnf-did-not-finish.html#yearly-differences"><i class="fa fa-check"></i><b>7.2</b> Yearly Differences</a></li>
<li class="chapter" data-level="7.3" data-path="dnf-did-not-finish.html"><a href="dnf-did-not-finish.html#differences-by-constructor"><i class="fa fa-check"></i><b>7.3</b> Differences by constructor</a></li>
<li class="chapter" data-level="7.4" data-path="dnf-did-not-finish.html"><a href="dnf-did-not-finish.html#dnfs-by-race-of-the-season"><i class="fa fa-check"></i><b>7.4</b> DNFs by race of the season</a></li>
<li class="chapter" data-level="7.5" data-path="dnf-did-not-finish.html"><a href="dnf-did-not-finish.html#next-chapter-5"><i class="fa fa-check"></i><b>7.5</b> Next Chapter</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="the-wdc-world-drivers-championship.html"><a href="the-wdc-world-drivers-championship.html"><i class="fa fa-check"></i><b>8</b> The WDC (World Drivers Championship)</a></li>
<li class="chapter" data-level="9" data-path="conclusions.html"><a href="conclusions.html"><i class="fa fa-check"></i><b>9</b> Conclusions</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Visualizing Formula 1 Data in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="dnf-did-not-finish" class="section level1 hasAnchor" number="7">
<h1><span class="header-section-number">Chapter 7</span> DNF (Did Not Finish)<a href="dnf-did-not-finish.html#dnf-did-not-finish" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>There are lots of reasons a car may DNF from a race. Mechanical failure, crashes, and even precautionary considerations can lead to a car retiring early from a race. DNFs are almost always unexpected, and can have substantial influence on the outcome of the race for other drivers (see Abu Dhabi 2021). But, are there any identifiable risk factors for DNFs? For example, are there differences among the constructors or engine suppliers? Are certain drivers more prone to be involved in a crash? We can explore these ideas with a model!</p>
<p>Throughout this chapter, I will be attempting to answer the following question:</p>
<p><strong><em>What is the probability that a car DNFs?</em></strong></p>
<p>A DNF, naturally, is a binary event: a car finished the race, or it <em>does not</em>. This is important to note prior to modeling. If we were to try and use a linear model to model this <strong>binary response</strong>, the predicted outcome could be any number between negative infinity and positive infinity. Which …. doesn’t make sense. Generalized Linear Models (GLM) allow you to build a linear relationship between the response and predictors, even when their underlying relationship is not linear and variance is not constant.</p>
<p>Recall from last chapter that we ran into a scenario where we failed to meet the assumptions of the linear regression model. This happens quite often actually! Without going into too much detail, there are three common situations where linear regression models are a poor choice:</p>
<ul>
<li>The response is a <strong>count</strong></li>
<li>The response is <strong>binary or a proportion</strong></li>
<li>The response is <strong>positive continuous</strong></li>
</ul>
<div id="logistic-regression" class="section level2 hasAnchor" number="7.1">
<h2><span class="header-section-number">7.1</span> Logistic Regression<a href="dnf-did-not-finish.html#logistic-regression" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A logistic regression model allows me to estimate the effect that a predictor variable (or more than one predictor) has on the <em>probability</em> of a given outcome. It is actually a simpler implementation of the <strong>ordinal regression model</strong> from last chapter. The ordinal regression model estimates the probability of many ordered levels of an outcome (i.e. P1, P2, P3, etc.), while a <strong>logistic regression model</strong> estimates the probability of only two possibilities: a car finishes or does not.</p>
<p>A logistic regression model will use a transformation function, the <em>logistic function</em>, that allows us to relate the outcome (<strong>finish</strong> vs <strong>DNF</strong>) to a value between 0 and 1. So, the logistic function maps a typical probability range (0,1) to an unbounded range (-infinity, infinity). The logit function is defined mathematically as:</p>
<p><span class="math display">\[logit(x) = log(\frac{x}{1-x})\]</span></p>
<p>The <em>inverse logit</em> function maps an unbounded range back to a probability range (0,1).</p>
<p><span class="math display">\[logit^{-1}(x) = \frac{e^{x}}{1 + e^{x}}\]</span></p>
<p>To visualize how the logit and inverse logit functions work, I made the following figures. I create some sample data called <code>x</code>. I then plot <code>x</code> vs <code>logit(x)</code>. Hopefully this helps!</p>
<p>Here is a plot of the linear predictor vs linear predictors transformed to probabilities using the inverse logit function.</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="dnf-did-not-finish.html#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create sample data</span></span>
<span id="cb211-2"><a href="dnf-did-not-finish.html#cb211-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">10</span>, <span class="dv">10</span>, <span class="fl">0.1</span>)</span>
<span id="cb211-3"><a href="dnf-did-not-finish.html#cb211-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-4"><a href="dnf-did-not-finish.html#cb211-4" aria-hidden="true" tabindex="-1"></a><span class="co"># apply an inverse logit function to x</span></span>
<span id="cb211-5"><a href="dnf-did-not-finish.html#cb211-5" aria-hidden="true" tabindex="-1"></a>inv_logit_x <span class="ot">&lt;-</span> <span class="fu">exp</span>(x) <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> <span class="fu">exp</span>(x))</span>
<span id="cb211-6"><a href="dnf-did-not-finish.html#cb211-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-7"><a href="dnf-did-not-finish.html#cb211-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot these two variables</span></span>
<span id="cb211-8"><a href="dnf-did-not-finish.html#cb211-8" aria-hidden="true" tabindex="-1"></a><span class="fu">qplot</span>(x, inv_logit_x) <span class="sc">+</span></span>
<span id="cb211-9"><a href="dnf-did-not-finish.html#cb211-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y=</span><span class="fu">expression</span>(<span class="fu">paste</span>(logit<span class="sc">^-</span><span class="dv">1</span>,<span class="st">&quot;(x)&quot;</span>))) <span class="sc">+</span></span>
<span id="cb211-10"><a href="dnf-did-not-finish.html#cb211-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-197-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>We can also use the <code>plogis()</code> function to perform the inverse logit transformation. See here:</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="dnf-did-not-finish.html#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot these two variables</span></span>
<span id="cb212-2"><a href="dnf-did-not-finish.html#cb212-2" aria-hidden="true" tabindex="-1"></a><span class="fu">qplot</span>(x, <span class="fu">plogis</span>(x)) <span class="sc">+</span></span>
<span id="cb212-3"><a href="dnf-did-not-finish.html#cb212-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y=</span><span class="fu">expression</span>(<span class="fu">paste</span>(logit<span class="sc">^-</span><span class="dv">1</span>,<span class="st">&quot;(x)&quot;</span>))) <span class="sc">+</span></span>
<span id="cb212-4"><a href="dnf-did-not-finish.html#cb212-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-198-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>A logistic regression model should allow us to analyze our data to understand how the probability of a DNF varies across various predictor variables. One research question that I have is:</p>
<p><em>Does the probability of a DNF vary across years?</em></p>
<p>Well, in an attempt to answer that question, one could simply calculate the proportion of DNFs from 2014 to 2023. There are better ways!</p>
<p>To demonstrate how to use a logistic regression model to answer this type of question, I will start with an even simpler example. If we were to pool all years together and calculate the proportion of cars that DNF, that calculation would reveal that 17.2% of cars DNF from a race:</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="dnf-did-not-finish.html#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(races_allyears_dnf<span class="sc">$</span>DNF, <span class="at">na.rm =</span> T)</span></code></pre></div>
<pre><code>## [1] 0.1719205</code></pre>
<p>A more statistically sound way to estimate this rate is to use a logistic regression model. The most basic logistic regression model would be an intercept-only model. Notice that the transformed intercept of this model is identical to the manually calculated proportion of 17.2%.</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="dnf-did-not-finish.html#cb215-1" aria-hidden="true" tabindex="-1"></a>dnf.model<span class="fl">.0</span> <span class="ot">&lt;-</span> <span class="fu">glm</span>(DNF <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data =</span> races_allyears_dnf,</span>
<span id="cb215-2"><a href="dnf-did-not-finish.html#cb215-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">&#39;logit&#39;</span>))</span>
<span id="cb215-3"><a href="dnf-did-not-finish.html#cb215-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb215-4"><a href="dnf-did-not-finish.html#cb215-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Transform the coefficient to probability scale</span></span>
<span id="cb215-5"><a href="dnf-did-not-finish.html#cb215-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plogis</span>(<span class="fu">coef</span>(dnf.model<span class="fl">.0</span>))</span></code></pre></div>
<pre><code>## (Intercept) 
##   0.1719205</code></pre>
<p>Let’s expand this model in the next section.</p>
</div>
<div id="yearly-differences" class="section level2 hasAnchor" number="7.2">
<h2><span class="header-section-number">7.2</span> Yearly Differences<a href="dnf-did-not-finish.html#yearly-differences" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Ok, back to our original research question! Does the proportion of DNFs <em>vary over time</em>? One would think! I would assume that as a regulation era evolves, the engineers will build increasingly dependable cars. Let’s see if the data backs this up. In the code below, I will fit a logistic regression model using <code>glm()</code> and transform the coefficient estimates using the <code>plogis()</code> function.</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="dnf-did-not-finish.html#cb217-1" aria-hidden="true" tabindex="-1"></a>dnf.model<span class="fl">.1</span> <span class="ot">&lt;-</span> <span class="fu">glm</span>(DNF <span class="sc">~</span> <span class="dv">0</span> <span class="sc">+</span> Year, <span class="at">data =</span> races_allyears_dnf,</span>
<span id="cb217-2"><a href="dnf-did-not-finish.html#cb217-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">&#39;logit&#39;</span>))</span>
<span id="cb217-3"><a href="dnf-did-not-finish.html#cb217-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-4"><a href="dnf-did-not-finish.html#cb217-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Transform the coefficient to probability scale</span></span>
<span id="cb217-5"><a href="dnf-did-not-finish.html#cb217-5" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">Probability =</span> <span class="fu">plogis</span>(<span class="fu">coef</span>(dnf.model<span class="fl">.1</span>)))</span></code></pre></div>
<pre><code>##          Probability
## Year2014   0.2088452
## Year2015   0.1994681
## Year2016   0.1709957
## Year2017   0.2275000
## Year2018   0.1952381
## Year2019   0.1380952
## Year2020   0.1617647
## Year2021   0.1250000
## Year2022   0.1642857
## Year2023   0.1366743</code></pre>
<p>It looks like the data support this to some degree. Just by looking at this table, it appears that the proportion is trending downward but also bouncing around from year to year. We can plot this data to make it a little more clear:</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="dnf-did-not-finish.html#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(dnf.model<span class="fl">.1</span>, <span class="at">exp =</span> T) <span class="sc">%&gt;%</span></span>
<span id="cb219-2"><a href="dnf-did-not-finish.html#cb219-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">term =</span> <span class="fu">str_remove</span>(term, <span class="st">&quot;Year&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb219-3"><a href="dnf-did-not-finish.html#cb219-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(term, estimate)) <span class="sc">+</span></span>
<span id="cb219-4"><a href="dnf-did-not-finish.html#cb219-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">group =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb219-5"><a href="dnf-did-not-finish.html#cb219-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb219-6"><a href="dnf-did-not-finish.html#cb219-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb219-7"><a href="dnf-did-not-finish.html#cb219-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;Estimated Probability of a DNF&#39;</span>,</span>
<span id="cb219-8"><a href="dnf-did-not-finish.html#cb219-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&#39;Year&#39;</span>,</span>
<span id="cb219-9"><a href="dnf-did-not-finish.html#cb219-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Yearly trend in DNF Probability&#39;</span>) <span class="sc">+</span></span>
<span id="cb219-10"><a href="dnf-did-not-finish.html#cb219-10" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>()) <span class="sc">+</span></span>
<span id="cb219-11"><a href="dnf-did-not-finish.html#cb219-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-202-1.png" width="960" style="display: block; margin: auto;" /></p>
<p>If we were to look at the number of DNFs by track, some locations stand out. For instance, Baku, Australia, and the U.S. Grand Prix all have DNF percentages of at least 20% since 2014.</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="dnf-did-not-finish.html#cb220-1" aria-hidden="true" tabindex="-1"></a>races_allyears_dnf <span class="sc">%&gt;%</span></span>
<span id="cb220-2"><a href="dnf-did-not-finish.html#cb220-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Circuit) <span class="sc">%&gt;%</span></span>
<span id="cb220-3"><a href="dnf-did-not-finish.html#cb220-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="st">`</span><span class="at">% of DNFs</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(<span class="fu">mean</span>(DNF, <span class="at">na.rm =</span> T), <span class="dv">3</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb220-4"><a href="dnf-did-not-finish.html#cb220-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb220-5"><a href="dnf-did-not-finish.html#cb220-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(<span class="st">`</span><span class="at">% of DNFs</span><span class="st">`</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb220-6"><a href="dnf-did-not-finish.html#cb220-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">% of DNFs</span><span class="st">`</span> <span class="ot">=</span> scales<span class="sc">::</span><span class="fu">percent</span>(<span class="st">`</span><span class="at">% of DNFs</span><span class="st">`</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb220-7"><a href="dnf-did-not-finish.html#cb220-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>()</span></code></pre></div>
<div id="usjkanfprw" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#usjkanfprw table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#usjkanfprw thead, #usjkanfprw tbody, #usjkanfprw tfoot, #usjkanfprw tr, #usjkanfprw td, #usjkanfprw th {
  border-style: none;
}

#usjkanfprw p {
  margin: 0;
  padding: 0;
}

#usjkanfprw .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#usjkanfprw .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#usjkanfprw .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#usjkanfprw .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#usjkanfprw .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#usjkanfprw .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#usjkanfprw .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#usjkanfprw .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#usjkanfprw .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#usjkanfprw .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#usjkanfprw .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#usjkanfprw .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#usjkanfprw .gt_spanner_row {
  border-bottom-style: hidden;
}

#usjkanfprw .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#usjkanfprw .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#usjkanfprw .gt_from_md > :first-child {
  margin-top: 0;
}

#usjkanfprw .gt_from_md > :last-child {
  margin-bottom: 0;
}

#usjkanfprw .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#usjkanfprw .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#usjkanfprw .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#usjkanfprw .gt_row_group_first td {
  border-top-width: 2px;
}

#usjkanfprw .gt_row_group_first th {
  border-top-width: 2px;
}

#usjkanfprw .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#usjkanfprw .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#usjkanfprw .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#usjkanfprw .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#usjkanfprw .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#usjkanfprw .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#usjkanfprw .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#usjkanfprw .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#usjkanfprw .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#usjkanfprw .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#usjkanfprw .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#usjkanfprw .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#usjkanfprw .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#usjkanfprw .gt_left {
  text-align: left;
}

#usjkanfprw .gt_center {
  text-align: center;
}

#usjkanfprw .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#usjkanfprw .gt_font_normal {
  font-weight: normal;
}

#usjkanfprw .gt_font_bold {
  font-weight: bold;
}

#usjkanfprw .gt_font_italic {
  font-style: italic;
}

#usjkanfprw .gt_super {
  font-size: 65%;
}

#usjkanfprw .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#usjkanfprw .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#usjkanfprw .gt_indent_1 {
  text-indent: 5px;
}

#usjkanfprw .gt_indent_2 {
  text-indent: 10px;
}

#usjkanfprw .gt_indent_3 {
  text-indent: 15px;
}

#usjkanfprw .gt_indent_4 {
  text-indent: 20px;
}

#usjkanfprw .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Circuit">Circuit</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="% of DNFs">% of DNFs</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Circuit" class="gt_row gt_left">australia</td>
<td headers="% of DNFs" class="gt_row gt_right">26.10%</td></tr>
    <tr><td headers="Circuit" class="gt_row gt_left">azerbaijan</td>
<td headers="% of DNFs" class="gt_row gt_right">24.20%</td></tr>
    <tr><td headers="Circuit" class="gt_row gt_left">germany</td>
<td headers="% of DNFs" class="gt_row gt_right">22.10%</td></tr>
    <tr><td headers="Circuit" class="gt_row gt_left">singapore</td>
<td headers="% of DNFs" class="gt_row gt_right">21.50%</td></tr>
    <tr><td headers="Circuit" class="gt_row gt_left">malaysia</td>
<td headers="% of DNFs" class="gt_row gt_right">20.50%</td></tr>
    <tr><td headers="Circuit" class="gt_row gt_left">saudi-arabia</td>
<td headers="% of DNFs" class="gt_row gt_right">20.00%</td></tr>
    <tr><td headers="Circuit" class="gt_row gt_left">united-states</td>
<td headers="% of DNFs" class="gt_row gt_right">20.00%</td></tr>
    <tr><td headers="Circuit" class="gt_row gt_left">canada</td>
<td headers="% of DNFs" class="gt_row gt_right">19.50%</td></tr>
    <tr><td headers="Circuit" class="gt_row gt_left">great-britain</td>
<td headers="% of DNFs" class="gt_row gt_right">19.20%</td></tr>
    <tr><td headers="Circuit" class="gt_row gt_left">austria</td>
<td headers="% of DNFs" class="gt_row gt_right">19.10%</td></tr>
    <tr><td headers="Circuit" class="gt_row gt_left">monaco</td>
<td headers="% of DNFs" class="gt_row gt_right">18.50%</td></tr>
    <tr><td headers="Circuit" class="gt_row gt_left">italy</td>
<td headers="% of DNFs" class="gt_row gt_right">18.30%</td></tr>
    <tr><td headers="Circuit" class="gt_row gt_left">europe</td>
<td headers="% of DNFs" class="gt_row gt_right">18.20%</td></tr>
    <tr><td headers="Circuit" class="gt_row gt_left">bahrain</td>
<td headers="% of DNFs" class="gt_row gt_right">17.90%</td></tr>
    <tr><td headers="Circuit" class="gt_row gt_left">russia</td>
<td headers="% of DNFs" class="gt_row gt_right">16.60%</td></tr>
    <tr><td headers="Circuit" class="gt_row gt_left">belgium</td>
<td headers="% of DNFs" class="gt_row gt_right">16.20%</td></tr>
    <tr><td headers="Circuit" class="gt_row gt_left">brazil</td>
<td headers="% of DNFs" class="gt_row gt_right">15.60%</td></tr>
    <tr><td headers="Circuit" class="gt_row gt_left">mexico</td>
<td headers="% of DNFs" class="gt_row gt_right">15.40%</td></tr>
    <tr><td headers="Circuit" class="gt_row gt_left">hungary</td>
<td headers="% of DNFs" class="gt_row gt_right">15.20%</td></tr>
    <tr><td headers="Circuit" class="gt_row gt_left">las-vegas</td>
<td headers="% of DNFs" class="gt_row gt_right">15.00%</td></tr>
    <tr><td headers="Circuit" class="gt_row gt_left">styria</td>
<td headers="% of DNFs" class="gt_row gt_right">15.00%</td></tr>
    <tr><td headers="Circuit" class="gt_row gt_left">abu-dhabi</td>
<td headers="% of DNFs" class="gt_row gt_right">13.40%</td></tr>
    <tr><td headers="Circuit" class="gt_row gt_left">netherlands</td>
<td headers="% of DNFs" class="gt_row gt_right">13.30%</td></tr>
    <tr><td headers="Circuit" class="gt_row gt_left">japan</td>
<td headers="% of DNFs" class="gt_row gt_right">12.80%</td></tr>
    <tr><td headers="Circuit" class="gt_row gt_left">france</td>
<td headers="% of DNFs" class="gt_row gt_right">12.50%</td></tr>
    <tr><td headers="Circuit" class="gt_row gt_left">miami</td>
<td headers="% of DNFs" class="gt_row gt_right">12.50%</td></tr>
    <tr><td headers="Circuit" class="gt_row gt_left">spain</td>
<td headers="% of DNFs" class="gt_row gt_right">12.30%</td></tr>
    <tr><td headers="Circuit" class="gt_row gt_left">china</td>
<td headers="% of DNFs" class="gt_row gt_right">12.10%</td></tr>
    <tr><td headers="Circuit" class="gt_row gt_left">qatar</td>
<td headers="% of DNFs" class="gt_row gt_right">10.00%</td></tr>
    <tr><td headers="Circuit" class="gt_row gt_left">turkey</td>
<td headers="% of DNFs" class="gt_row gt_right">10.00%</td></tr>
    <tr><td headers="Circuit" class="gt_row gt_left">portugal</td>
<td headers="% of DNFs" class="gt_row gt_right">5.00%</td></tr>
  </tbody>
  
  
</table>
</div>
<p>We can add an interaction term to this model, and make a yearly estimate for each circuit in our data.</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="dnf-did-not-finish.html#cb221-1" aria-hidden="true" tabindex="-1"></a>dnf.model<span class="fl">.2</span> <span class="ot">&lt;-</span> <span class="fu">glm</span>(DNF <span class="sc">~</span> <span class="dv">0</span> <span class="sc">+</span> Year<span class="sc">:</span>Circuit, <span class="at">data =</span> races_allyears_dnf,</span>
<span id="cb221-2"><a href="dnf-did-not-finish.html#cb221-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">&#39;logit&#39;</span>))</span></code></pre></div>
<p>Here’s a comparison of this updated model’s output across a few different circuits:</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="dnf-did-not-finish.html#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(dnf.model<span class="fl">.2</span>, <span class="at">exp =</span> T) <span class="sc">%&gt;%</span></span>
<span id="cb222-2"><a href="dnf-did-not-finish.html#cb222-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">term =</span> <span class="fu">str_remove</span>(term, <span class="st">&quot;Year&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb222-3"><a href="dnf-did-not-finish.html#cb222-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(term, <span class="at">sep =</span> <span class="st">&#39;:Circuit&#39;</span>, <span class="fu">c</span>(<span class="st">&quot;Year&quot;</span>, <span class="st">&quot;Circuit&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb222-4"><a href="dnf-did-not-finish.html#cb222-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Circuit <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;monaco&#39;</span>, <span class="st">&#39;united-states&#39;</span>, <span class="st">&#39;great-britain&#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb222-5"><a href="dnf-did-not-finish.html#cb222-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(Year, estimate, <span class="at">group =</span> Circuit, <span class="at">col =</span> Circuit)) <span class="sc">+</span></span>
<span id="cb222-6"><a href="dnf-did-not-finish.html#cb222-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb222-7"><a href="dnf-did-not-finish.html#cb222-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb222-8"><a href="dnf-did-not-finish.html#cb222-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb222-9"><a href="dnf-did-not-finish.html#cb222-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;Estimated Probability of a DNF&#39;</span>,</span>
<span id="cb222-10"><a href="dnf-did-not-finish.html#cb222-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&#39;Year&#39;</span>,</span>
<span id="cb222-11"><a href="dnf-did-not-finish.html#cb222-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Yearly trend in DNF Probability&#39;</span>) <span class="sc">+</span></span>
<span id="cb222-12"><a href="dnf-did-not-finish.html#cb222-12" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>()) <span class="sc">+</span></span>
<span id="cb222-13"><a href="dnf-did-not-finish.html#cb222-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb222-14"><a href="dnf-did-not-finish.html#cb222-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb222-15"><a href="dnf-did-not-finish.html#cb222-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb222-16"><a href="dnf-did-not-finish.html#cb222-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust=</span><span class="dv">1</span>, <span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb222-17"><a href="dnf-did-not-finish.html#cb222-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb222-18"><a href="dnf-did-not-finish.html#cb222-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">18</span>),</span>
<span id="cb222-19"><a href="dnf-did-not-finish.html#cb222-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb222-20"><a href="dnf-did-not-finish.html#cb222-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">14</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-205-1.png" width="960" style="display: block; margin: auto;" /></p>
<p>An alternative to fitting an estimate for each race-year combination is to model both the year and track estimates, but not as an interaction term.</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="dnf-did-not-finish.html#cb223-1" aria-hidden="true" tabindex="-1"></a>dnf.model<span class="fl">.3</span> <span class="ot">&lt;-</span> <span class="fu">glm</span>(DNF <span class="sc">~</span> <span class="dv">0</span> <span class="sc">+</span> Year <span class="sc">+</span> Circuit, <span class="at">data =</span> races_allyears_dnf,</span>
<span id="cb223-2"><a href="dnf-did-not-finish.html#cb223-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">&#39;logit&#39;</span>))</span></code></pre></div>
<p>As we can see in the figure below, this model assumes a consistent yearly effect and adjusts the probability estimate up or down based on the circuit. So, for that rainy 2015 U.S. Grand Prix, this model gives a more <em>sober</em> result.</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="dnf-did-not-finish.html#cb224-1" aria-hidden="true" tabindex="-1"></a><span class="fu">emmeans</span>(dnf.model<span class="fl">.3</span>, <span class="sc">~</span> Circuit <span class="sc">+</span> Year, <span class="at">type =</span> <span class="st">&#39;response&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb224-2"><a href="dnf-did-not-finish.html#cb224-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb224-3"><a href="dnf-did-not-finish.html#cb224-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Circuit <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;monaco&#39;</span>, <span class="st">&#39;united-states&#39;</span>, <span class="st">&#39;great-britain&#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb224-4"><a href="dnf-did-not-finish.html#cb224-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(Year, prob, <span class="at">group =</span> Circuit, <span class="at">col =</span> Circuit)) <span class="sc">+</span></span>
<span id="cb224-5"><a href="dnf-did-not-finish.html#cb224-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb224-6"><a href="dnf-did-not-finish.html#cb224-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb224-7"><a href="dnf-did-not-finish.html#cb224-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb224-8"><a href="dnf-did-not-finish.html#cb224-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;Estimated Probability of a DNF&#39;</span>,</span>
<span id="cb224-9"><a href="dnf-did-not-finish.html#cb224-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&#39;Year&#39;</span>,</span>
<span id="cb224-10"><a href="dnf-did-not-finish.html#cb224-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Yearly trend in DNF Probability&#39;</span>) <span class="sc">+</span></span>
<span id="cb224-11"><a href="dnf-did-not-finish.html#cb224-11" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>())  <span class="sc">+</span></span>
<span id="cb224-12"><a href="dnf-did-not-finish.html#cb224-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb224-13"><a href="dnf-did-not-finish.html#cb224-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb224-14"><a href="dnf-did-not-finish.html#cb224-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb224-15"><a href="dnf-did-not-finish.html#cb224-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust=</span><span class="dv">1</span>, <span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb224-16"><a href="dnf-did-not-finish.html#cb224-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb224-17"><a href="dnf-did-not-finish.html#cb224-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">18</span>),</span>
<span id="cb224-18"><a href="dnf-did-not-finish.html#cb224-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb224-19"><a href="dnf-did-not-finish.html#cb224-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">14</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-207-1.png" width="960" style="display: block; margin: auto;" /></p>
</div>
<div id="differences-by-constructor" class="section level2 hasAnchor" number="7.3">
<h2><span class="header-section-number">7.3</span> Differences by constructor<a href="dnf-did-not-finish.html#differences-by-constructor" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We could use a similar approach to estimate the probability of a DNF by constructor. One could hypothesize that the car with the best power unit, Mercedes, could run the engine at a more conservative mode, thus reducing the risk of failure. Let’s see if the data shows any significant shifts in DNF probability by constructor.</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="dnf-did-not-finish.html#cb225-1" aria-hidden="true" tabindex="-1"></a>dnf.model<span class="fl">.4</span> <span class="ot">&lt;-</span> <span class="fu">glm</span>(DNF <span class="sc">~</span> <span class="dv">0</span> <span class="sc">+</span> Car, <span class="at">data =</span> races_allyears_dnf,</span>
<span id="cb225-2"><a href="dnf-did-not-finish.html#cb225-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">&#39;logit&#39;</span>))</span></code></pre></div>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="dnf-did-not-finish.html#cb226-1" aria-hidden="true" tabindex="-1"></a><span class="fu">emmeans</span>(dnf.model<span class="fl">.4</span>, <span class="sc">~</span> Car, <span class="at">type =</span> <span class="st">&#39;response&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb226-2"><a href="dnf-did-not-finish.html#cb226-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb226-3"><a href="dnf-did-not-finish.html#cb226-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(prob, <span class="fu">fct_reorder</span>(Car, <span class="fu">desc</span>(prob)))) <span class="sc">+</span></span>
<span id="cb226-4"><a href="dnf-did-not-finish.html#cb226-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb226-5"><a href="dnf-did-not-finish.html#cb226-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb226-6"><a href="dnf-did-not-finish.html#cb226-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb226-7"><a href="dnf-did-not-finish.html#cb226-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Estimated Probability of a DNF&#39;</span>,</span>
<span id="cb226-8"><a href="dnf-did-not-finish.html#cb226-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Constructor&#39;</span>,</span>
<span id="cb226-9"><a href="dnf-did-not-finish.html#cb226-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;DNF Probability by Constructor&#39;</span>) <span class="sc">+</span></span>
<span id="cb226-10"><a href="dnf-did-not-finish.html#cb226-10" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>()) <span class="sc">+</span></span>
<span id="cb226-11"><a href="dnf-did-not-finish.html#cb226-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-209-1.png" width="960" style="display: block; margin: auto;" /></p>
<p>There certainly appears to be some variability in DNF probability across the various constructors. During the Turbo-hybrid era, Mercedes unquestionably had the best power unit (overall). And according to this data, Mercedes also had the lowest probability of a DNF from 2014 to 2023 (Red Bull was quite reliable in 2023). In fact, McLaren using a Mercedes power unit had the third lowest DNF probability. Does this vary by year?</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="dnf-did-not-finish.html#cb227-1" aria-hidden="true" tabindex="-1"></a>dnf.model<span class="fl">.5</span> <span class="ot">&lt;-</span> <span class="fu">glm</span>(DNF <span class="sc">~</span> <span class="dv">0</span> <span class="sc">+</span> Car<span class="sc">:</span>Year, <span class="at">data =</span> races_allyears_dnf,</span>
<span id="cb227-2"><a href="dnf-did-not-finish.html#cb227-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">&#39;logit&#39;</span>))</span></code></pre></div>
<p>After fitting the model, I’ll focus on the top 3 teams over this ten year period: Mercedes, Ferrari, and Red Bull. It looks like Mercedes had consistently low DNF rates, while Red Bull experienced an improvement over the last few years.</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="dnf-did-not-finish.html#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="fu">emmeans</span>(dnf.model<span class="fl">.5</span>, <span class="sc">~</span> Car<span class="sc">:</span>Year, <span class="at">type =</span> <span class="st">&#39;response&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb228-2"><a href="dnf-did-not-finish.html#cb228-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb228-3"><a href="dnf-did-not-finish.html#cb228-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Year),</span>
<span id="cb228-4"><a href="dnf-did-not-finish.html#cb228-4" aria-hidden="true" tabindex="-1"></a>         <span class="sc">!</span><span class="fu">is.na</span>(prob),</span>
<span id="cb228-5"><a href="dnf-did-not-finish.html#cb228-5" aria-hidden="true" tabindex="-1"></a>         Car <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;Mercedes&#39;</span>, <span class="st">&#39;Ferrari&#39;</span>, </span>
<span id="cb228-6"><a href="dnf-did-not-finish.html#cb228-6" aria-hidden="true" tabindex="-1"></a>                            <span class="st">&#39;Red Bull Racing Honda RBPT&#39;</span>, <span class="st">&#39;Red Bull Racing RBPT&#39;</span>, <span class="st">&#39;Red Bull Racing Renault&#39;</span>, <span class="st">&#39;Red Bull Racing Honda&#39;</span>, <span class="st">&#39;Red Bull Racing TAG Heuer&#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb228-7"><a href="dnf-did-not-finish.html#cb228-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">constructor =</span> <span class="fu">case_when</span>(</span>
<span id="cb228-8"><a href="dnf-did-not-finish.html#cb228-8" aria-hidden="true" tabindex="-1"></a>    Car <span class="sc">!=</span> <span class="st">&#39;Mercedes&#39;</span> <span class="sc">&amp;</span> Car <span class="sc">!=</span> <span class="st">&#39;Ferrari&#39;</span> <span class="sc">~</span> <span class="st">&#39;Red Bull&#39;</span>, </span>
<span id="cb228-9"><a href="dnf-did-not-finish.html#cb228-9" aria-hidden="true" tabindex="-1"></a>    Car <span class="sc">==</span> <span class="st">&#39;Mercedes&#39;</span> <span class="sc">~</span> <span class="st">&#39;Mercedes&#39;</span>, </span>
<span id="cb228-10"><a href="dnf-did-not-finish.html#cb228-10" aria-hidden="true" tabindex="-1"></a>    Car <span class="sc">==</span> <span class="st">&#39;Ferrari&#39;</span> <span class="sc">~</span> <span class="st">&#39;Ferrari&#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb228-11"><a href="dnf-did-not-finish.html#cb228-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(Year, prob, <span class="at">group =</span> constructor, <span class="at">col =</span> constructor)) <span class="sc">+</span></span>
<span id="cb228-12"><a href="dnf-did-not-finish.html#cb228-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>() <span class="sc">+</span></span>
<span id="cb228-13"><a href="dnf-did-not-finish.html#cb228-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb228-14"><a href="dnf-did-not-finish.html#cb228-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb228-15"><a href="dnf-did-not-finish.html#cb228-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;Estimated Probability of a DNF&#39;</span>,</span>
<span id="cb228-16"><a href="dnf-did-not-finish.html#cb228-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="st">&#39;Constructor&#39;</span>,</span>
<span id="cb228-17"><a href="dnf-did-not-finish.html#cb228-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;DNF Probability by Year &amp; Constructor&#39;</span>) <span class="sc">+</span></span>
<span id="cb228-18"><a href="dnf-did-not-finish.html#cb228-18" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>()) <span class="sc">+</span></span>
<span id="cb228-19"><a href="dnf-did-not-finish.html#cb228-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb228-20"><a href="dnf-did-not-finish.html#cb228-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb228-21"><a href="dnf-did-not-finish.html#cb228-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb228-22"><a href="dnf-did-not-finish.html#cb228-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust=</span><span class="dv">1</span>, <span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb228-23"><a href="dnf-did-not-finish.html#cb228-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb228-24"><a href="dnf-did-not-finish.html#cb228-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">18</span>),</span>
<span id="cb228-25"><a href="dnf-did-not-finish.html#cb228-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb228-26"><a href="dnf-did-not-finish.html#cb228-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">14</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-211-1.png" width="960" style="display: block; margin: auto;" /></p>
<p>Here’s a look at each all teams, separated by year:</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="dnf-did-not-finish.html#cb229-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span>
<span id="cb229-2"><a href="dnf-did-not-finish.html#cb229-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-3"><a href="dnf-did-not-finish.html#cb229-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-4"><a href="dnf-did-not-finish.html#cb229-4" aria-hidden="true" tabindex="-1"></a><span class="fu">emmeans</span>(dnf.model<span class="fl">.5</span>, <span class="sc">~</span> Car<span class="sc">:</span>Year, <span class="at">type =</span> <span class="st">&#39;response&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb229-5"><a href="dnf-did-not-finish.html#cb229-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb229-6"><a href="dnf-did-not-finish.html#cb229-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(prob)) <span class="sc">%&gt;%</span> </span>
<span id="cb229-7"><a href="dnf-did-not-finish.html#cb229-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year) <span class="sc">%&gt;%</span></span>
<span id="cb229-8"><a href="dnf-did-not-finish.html#cb229-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rank =</span> <span class="fu">rank</span>(prob)) <span class="sc">%&gt;%</span></span>
<span id="cb229-9"><a href="dnf-did-not-finish.html#cb229-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb229-10"><a href="dnf-did-not-finish.html#cb229-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">constructor =</span> <span class="fu">reorder_within</span>(Car, <span class="fu">desc</span>(rank), Year)) <span class="sc">%&gt;%</span></span>
<span id="cb229-11"><a href="dnf-did-not-finish.html#cb229-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(prob, constructor)) <span class="sc">+</span></span>
<span id="cb229-12"><a href="dnf-did-not-finish.html#cb229-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb229-13"><a href="dnf-did-not-finish.html#cb229-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb229-14"><a href="dnf-did-not-finish.html#cb229-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb229-15"><a href="dnf-did-not-finish.html#cb229-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Estimated Probability of a DNF&#39;</span>,</span>
<span id="cb229-16"><a href="dnf-did-not-finish.html#cb229-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Constructor&#39;</span>,</span>
<span id="cb229-17"><a href="dnf-did-not-finish.html#cb229-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;DNF Probability by Constructor&#39;</span>) <span class="sc">+</span></span>
<span id="cb229-18"><a href="dnf-did-not-finish.html#cb229-18" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>()) <span class="sc">+</span></span>
<span id="cb229-19"><a href="dnf-did-not-finish.html#cb229-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb229-20"><a href="dnf-did-not-finish.html#cb229-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> Year, <span class="at">scales =</span> <span class="st">&#39;free_y&#39;</span>, <span class="at">ncol =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb229-21"><a href="dnf-did-not-finish.html#cb229-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_reordered</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-212-1.png" width="960" style="display: block; margin: auto;" /></p>
</div>
<div id="dnfs-by-race-of-the-season" class="section level2 hasAnchor" number="7.4">
<h2><span class="header-section-number">7.4</span> DNFs by race of the season<a href="dnf-did-not-finish.html#dnfs-by-race-of-the-season" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Another possible explanatory variable of DNFs is race number of the season. There is probably more uncertainty about the engineering of the car at the beginning of a season. So, one could hypothesize that the probability of DNF’ing decreases over the course of a season. Let’s try and model this idea.</p>
<p>First, we’ll need to label each race in chronological order. For example, Bahrain was race #1 in 2021, 2022, and 2023.</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="dnf-did-not-finish.html#cb230-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Number each race during each of our ten years</span></span>
<span id="cb230-2"><a href="dnf-did-not-finish.html#cb230-2" aria-hidden="true" tabindex="-1"></a>circuit_numbers <span class="ot">&lt;-</span> races_allyears_dnf <span class="sc">%&gt;%</span> </span>
<span id="cb230-3"><a href="dnf-did-not-finish.html#cb230-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Year, Circuit) <span class="sc">%&gt;%</span></span>
<span id="cb230-4"><a href="dnf-did-not-finish.html#cb230-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year) <span class="sc">%&gt;%</span> </span>
<span id="cb230-5"><a href="dnf-did-not-finish.html#cb230-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">race_number =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">n</span>())</span>
<span id="cb230-6"><a href="dnf-did-not-finish.html#cb230-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-7"><a href="dnf-did-not-finish.html#cb230-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Add the race number to our race result dataframe</span></span>
<span id="cb230-8"><a href="dnf-did-not-finish.html#cb230-8" aria-hidden="true" tabindex="-1"></a>races_allyears_dnf_numbered <span class="ot">&lt;-</span> races_allyears_dnf <span class="sc">%&gt;%</span></span>
<span id="cb230-9"><a href="dnf-did-not-finish.html#cb230-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(circuit_numbers, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&#39;Year&#39;</span>, <span class="st">&#39;Circuit&#39;</span>))</span></code></pre></div>
<p>We can fit a model to our data using race number of the season as a single predictor variable.</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="dnf-did-not-finish.html#cb231-1" aria-hidden="true" tabindex="-1"></a>dnf.model<span class="fl">.6</span> <span class="ot">&lt;-</span> <span class="fu">glm</span>(DNF <span class="sc">~</span> race_number, <span class="at">data =</span> races_allyears_dnf_numbered,</span>
<span id="cb231-2"><a href="dnf-did-not-finish.html#cb231-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">&#39;logit&#39;</span>))</span></code></pre></div>
<p>If we look at the summary output below, we can see that the p-value is &gt; 0.05, demonstrating that this is not a statistically significant at the 0.05 level. What does this mean? See the text box below for more detail and resouces on p-values.</p>
<p><br>
<br></p>
<div class="blackbox">
<div class="center">
<p><strong>Interpreting p-values</strong></p>
</div>
<p>What is a p-value? My favorite definition is provided in <em>Statistics: Unlocking the Power of Data</em> by Lock, Lock, Lock, Lock, and Lock. (It’s a family of statisticians with the last name Lock):</p>
<p><strong>p-value</strong>: the proportion of sample, if the null hypothesis is true, that would give a statistic as extreme, or more extreme, as the observed sample.</p>
<p>Essentially, we use the p-value to measure strength of evidence, in a statistical sense. It can describe how <em>unusual</em> our data is. If our data is very unusual, it suggests there is evidence of a real relationship. I am taking some liberties with this explanation, so if you are interesting in legitimately learning about hypothesis testing and p-values, I <strong>highly</strong> recommend reading the Lock book and visiting this fantastic simulator:</p>
<p><a href="https://www.lock5stat.com/StatKey/" class="uri">https://www.lock5stat.com/StatKey/</a></p>
</div>
<p><br>
<br></p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="dnf-did-not-finish.html#cb232-1" aria-hidden="true" tabindex="-1"></a><span class="co"># print summary</span></span>
<span id="cb232-2"><a href="dnf-did-not-finish.html#cb232-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(dnf.model<span class="fl">.6</span>)</span></code></pre></div>
<pre><code>## 
## Call:
## glm(formula = DNF ~ race_number, family = binomial(link = &quot;logit&quot;), 
##     data = races_allyears_dnf_numbered)
## 
## Deviance Residuals: 
##     Min       1Q   Median       3Q      Max  
## -0.6471  -0.6290  -0.6078  -0.5838   1.9418  
## 
## Coefficients:
##             Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept) -1.44469    0.08239 -17.534   &lt;2e-16 ***
## race_number -0.01255    0.00712  -1.762    0.078 .  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 3785.2  on 4123  degrees of freedom
## Residual deviance: 3782.0  on 4122  degrees of freedom
## AIC: 3786
## 
## Number of Fisher Scoring iterations: 4</code></pre>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="dnf-did-not-finish.html#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="co"># exponentiate the coefficients</span></span>
<span id="cb234-2"><a href="dnf-did-not-finish.html#cb234-2" aria-hidden="true" tabindex="-1"></a><span class="fu">exp</span>(<span class="fu">cbind</span>(<span class="at">OR =</span> <span class="fu">coef</span>(dnf.model<span class="fl">.6</span>), <span class="fu">confint</span>(dnf.model<span class="fl">.6</span>)))</span></code></pre></div>
<pre><code>##                    OR     2.5 %    97.5 %
## (Intercept) 0.2358199 0.2003353 0.2767322
## race_number 0.9875320 0.9738144 1.0013839</code></pre>
<p>So, let’s just accept that these results indicate a non-significant predictor in race number. What could cause that? For one, DNFs in this dataset include both crashes and mechanical failures. Obviously crashes should be more random, while mechanical failures may not be.</p>
<p>Nonetheless, this <em>is</em> a book about data visualization. So… let’s at least plot these results.</p>
<p>First, I’ll need to tidy of some model predictions for this model.</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="dnf-did-not-finish.html#cb236-1" aria-hidden="true" tabindex="-1"></a><span class="co"># define the new data</span></span>
<span id="cb236-2"><a href="dnf-did-not-finish.html#cb236-2" aria-hidden="true" tabindex="-1"></a>new.data.logreg <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">race_number =</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">22</span>, <span class="dv">1</span>))</span>
<span id="cb236-3"><a href="dnf-did-not-finish.html#cb236-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb236-4"><a href="dnf-did-not-finish.html#cb236-4" aria-hidden="true" tabindex="-1"></a><span class="co"># compute the fitted lines and SE&#39;s</span></span>
<span id="cb236-5"><a href="dnf-did-not-finish.html#cb236-5" aria-hidden="true" tabindex="-1"></a>predictions.model6 <span class="ot">&lt;-</span>  <span class="fu">predict</span>(dnf.model<span class="fl">.6</span>,</span>
<span id="cb236-6"><a href="dnf-did-not-finish.html#cb236-6" aria-hidden="true" tabindex="-1"></a>                               <span class="at">newdata =</span> new.data.logreg,</span>
<span id="cb236-7"><a href="dnf-did-not-finish.html#cb236-7" aria-hidden="true" tabindex="-1"></a>                               <span class="at">type =</span> <span class="st">&quot;link&quot;</span>,</span>
<span id="cb236-8"><a href="dnf-did-not-finish.html#cb236-8" aria-hidden="true" tabindex="-1"></a>                               <span class="at">se.fit =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb236-9"><a href="dnf-did-not-finish.html#cb236-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb236-10"><a href="dnf-did-not-finish.html#cb236-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ll =</span> fit <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> se.fit,</span>
<span id="cb236-11"><a href="dnf-did-not-finish.html#cb236-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">ul =</span> fit <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> se.fit) <span class="sc">%&gt;%</span></span>
<span id="cb236-12"><a href="dnf-did-not-finish.html#cb236-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>( <span class="sc">-</span>se.fit) <span class="sc">%&gt;%</span> </span>
<span id="cb236-13"><a href="dnf-did-not-finish.html#cb236-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_all</span>(plogis) <span class="sc">%&gt;%</span></span>
<span id="cb236-14"><a href="dnf-did-not-finish.html#cb236-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(new.data.logreg)</span></code></pre></div>
<p>And then, we can plot observed data along with the logistic regression model fit line using this code:</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="dnf-did-not-finish.html#cb237-1" aria-hidden="true" tabindex="-1"></a>predictions.model6 <span class="sc">%&gt;%</span> </span>
<span id="cb237-2"><a href="dnf-did-not-finish.html#cb237-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> race_number)) <span class="sc">+</span></span>
<span id="cb237-3"><a href="dnf-did-not-finish.html#cb237-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> ll, <span class="at">ymax =</span> ul),</span>
<span id="cb237-4"><a href="dnf-did-not-finish.html#cb237-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb237-5"><a href="dnf-did-not-finish.html#cb237-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> fit)) <span class="sc">+</span></span>
<span id="cb237-6"><a href="dnf-did-not-finish.html#cb237-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_dots</span>(<span class="at">data =</span> races_allyears_dnf_numbered,</span>
<span id="cb237-7"><a href="dnf-did-not-finish.html#cb237-7" aria-hidden="true" tabindex="-1"></a>            <span class="fu">aes</span>(<span class="at">y =</span> DNF, </span>
<span id="cb237-8"><a href="dnf-did-not-finish.html#cb237-8" aria-hidden="true" tabindex="-1"></a>                <span class="at">side =</span> <span class="fu">ifelse</span>(DNF <span class="sc">==</span> <span class="dv">0</span>, <span class="st">&quot;top&quot;</span>, <span class="st">&quot;bottom&quot;</span>), <span class="at">col=</span> <span class="fu">factor</span>(DNF)),</span>
<span id="cb237-9"><a href="dnf-did-not-finish.html#cb237-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">scale =</span> <span class="fl">0.25</span>, <span class="at">size =</span> <span class="dv">5</span>, <span class="at">alpha =</span> <span class="fl">0.1</span>, <span class="at">show.legend =</span> T) <span class="sc">+</span></span>
<span id="cb237-10"><a href="dnf-did-not-finish.html#cb237-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>),<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;firebrick4&quot;</span>, <span class="st">&quot;darkgrey&quot;</span>)) <span class="sc">+</span></span>
<span id="cb237-11"><a href="dnf-did-not-finish.html#cb237-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="st">&quot;Probability of a DNF&quot;</span>,</span>
<span id="cb237-12"><a href="dnf-did-not-finish.html#cb237-12" aria-hidden="true" tabindex="-1"></a>                     <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb237-13"><a href="dnf-did-not-finish.html#cb237-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Race number of the season&#39;</span>,</span>
<span id="cb237-14"><a href="dnf-did-not-finish.html#cb237-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">color=</span><span class="st">&quot;DNF = 1 </span><span class="sc">\n</span><span class="st">Race Finish = 0&quot;</span>,</span>
<span id="cb237-15"><a href="dnf-did-not-finish.html#cb237-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Probability of DNF by race number of a season&#39;</span>,</span>
<span id="cb237-16"><a href="dnf-did-not-finish.html#cb237-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;All Grands Prix: 2014 - 2023&#39;</span>) <span class="sc">+</span></span>
<span id="cb237-17"><a href="dnf-did-not-finish.html#cb237-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">colour =</span> <span class="fu">guide_legend</span>(<span class="at">override.aes =</span> <span class="fu">list</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="fl">0.5</span>))) <span class="sc">+</span></span>
<span id="cb237-18"><a href="dnf-did-not-finish.html#cb237-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb237-19"><a href="dnf-did-not-finish.html#cb237-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb237-20"><a href="dnf-did-not-finish.html#cb237-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-217-1.png" width="960" style="display: block; margin: auto;" /></p>
<p>This figure perhaps further explains the reason behind the insignificant p-value. There is no meaningful trend in the proportion of DNFs over the course of a racing season.</p>
<p><br>
<br></p>
<div class="blackbox">
<div class="center">
<p><strong>Adding dots to a ggplot</strong></p>
</div>
<p>In the figure above, I used <code>stat_dots()</code> to describe the distribution of data along the top and bottom of the x-axis. <code>stat_dots()</code> is one of many very useful functions included in the <strong>ggdist</strong> R package. The <strong>ggdist</strong> package provides a flexible set of <strong>ggplot2</strong> geometries and statistics designed especially for visualizing distributions and uncertainty.</p>
<p>For more information on plotting dots with <strong>ggdist</strong> read this great article:</p>
<p><a href="https://mjskay.github.io/ggdist/articles/dotsinterval.html" class="uri">https://mjskay.github.io/ggdist/articles/dotsinterval.html</a></p>
</div>
<p><br>
<br></p>
<p>Even though this model was a dud, we can attempt to add some clarity by including a year x race number interaction term. This updated interaction model will estimate a race number coefficient for each year of our data (2014 - 2023).</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="dnf-did-not-finish.html#cb238-1" aria-hidden="true" tabindex="-1"></a>dnf.model<span class="fl">.7</span> <span class="ot">&lt;-</span> <span class="fu">glm</span>(DNF <span class="sc">~</span> race_number<span class="sc">:</span>Year, <span class="at">data =</span> races_allyears_dnf_numbered,</span>
<span id="cb238-2"><a href="dnf-did-not-finish.html#cb238-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">&#39;logit&#39;</span>))</span>
<span id="cb238-3"><a href="dnf-did-not-finish.html#cb238-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-4"><a href="dnf-did-not-finish.html#cb238-4" aria-hidden="true" tabindex="-1"></a><span class="co"># print summary</span></span>
<span id="cb238-5"><a href="dnf-did-not-finish.html#cb238-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(dnf.model<span class="fl">.7</span>)</span></code></pre></div>
<pre><code>## 
## Call:
## glm(formula = DNF ~ race_number:Year, family = binomial(link = &quot;logit&quot;), 
##     data = races_allyears_dnf_numbered)
## 
## Deviance Residuals: 
##     Min       1Q   Median       3Q      Max  
## -0.7011  -0.6438  -0.6067  -0.5360   2.1296  
## 
## Coefficients:
##                       Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept)          -1.432272   0.084067 -17.037   &lt;2e-16 ***
## race_number:Year2014 -0.004151   0.013219  -0.314   0.7535    
## race_number:Year2015  0.003021   0.012967   0.233   0.8158    
## race_number:Year2016 -0.011753   0.011620  -1.011   0.3118    
## race_number:Year2017  0.007720   0.011900   0.649   0.5165    
## race_number:Year2018 -0.003605   0.011632  -0.310   0.7566    
## race_number:Year2019 -0.027829   0.012974  -2.145   0.0320 *  
## race_number:Year2020 -0.033301   0.021577  -1.543   0.1227    
## race_number:Year2021 -0.036300   0.014261  -2.545   0.0109 *  
## race_number:Year2022 -0.019308   0.013265  -1.456   0.1455    
## race_number:Year2023 -0.023999   0.012037  -1.994   0.0462 *  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 3785.2  on 4123  degrees of freedom
## Residual deviance: 3766.8  on 4113  degrees of freedom
## AIC: 3788.8
## 
## Number of Fisher Scoring iterations: 4</code></pre>
<p>When we look at the summary output from the model, some years are significant while most are not. <em>Oy vey</em>!</p>
<p>But, I’m not going to let this stop us from creating a cool figure. So, let’s proceed with a visualization.</p>
<p>Before plotting, I’ll need to construct a prediction grid, make predictions using the model, and then tidy up the predictions ina dataframe.</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="dnf-did-not-finish.html#cb240-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Construct a prediction grid</span></span>
<span id="cb240-2"><a href="dnf-did-not-finish.html#cb240-2" aria-hidden="true" tabindex="-1"></a>model.grid <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">race_number =</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">22</span>, <span class="dv">1</span>), </span>
<span id="cb240-3"><a href="dnf-did-not-finish.html#cb240-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">Year =</span> <span class="fu">c</span>(<span class="st">&#39;2014&#39;</span>, <span class="st">&#39;2015&#39;</span>, <span class="st">&#39;2016&#39;</span>, <span class="st">&#39;2017&#39;</span>, <span class="st">&#39;2018&#39;</span>, <span class="st">&#39;2019&#39;</span>, <span class="st">&#39;2020&#39;</span>, <span class="st">&#39;2021&#39;</span>, <span class="st">&#39;2022&#39;</span>, <span class="st">&#39;2023&#39;</span>))</span>
<span id="cb240-4"><a href="dnf-did-not-finish.html#cb240-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-5"><a href="dnf-did-not-finish.html#cb240-5" aria-hidden="true" tabindex="-1"></a>model.grid<span class="sc">$</span>prob <span class="ot">&lt;-</span> <span class="fu">predict</span>(dnf.model<span class="fl">.7</span>, <span class="at">type=</span><span class="st">&#39;response&#39;</span>, <span class="at">newdata=</span>model.grid)</span>
<span id="cb240-6"><a href="dnf-did-not-finish.html#cb240-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-7"><a href="dnf-did-not-finish.html#cb240-7" aria-hidden="true" tabindex="-1"></a><span class="co"># compute the fitted lines and SE&#39;s</span></span>
<span id="cb240-8"><a href="dnf-did-not-finish.html#cb240-8" aria-hidden="true" tabindex="-1"></a>dnf.model.lines <span class="ot">&lt;-</span> <span class="fu">predict</span>(dnf.model<span class="fl">.7</span>,</span>
<span id="cb240-9"><a href="dnf-did-not-finish.html#cb240-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">newdata =</span> model.grid,</span>
<span id="cb240-10"><a href="dnf-did-not-finish.html#cb240-10" aria-hidden="true" tabindex="-1"></a>          <span class="at">type =</span> <span class="st">&quot;link&quot;</span>,</span>
<span id="cb240-11"><a href="dnf-did-not-finish.html#cb240-11" aria-hidden="true" tabindex="-1"></a>          <span class="at">se.fit =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb240-12"><a href="dnf-did-not-finish.html#cb240-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb240-13"><a href="dnf-did-not-finish.html#cb240-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ll =</span> fit <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> se.fit,</span>
<span id="cb240-14"><a href="dnf-did-not-finish.html#cb240-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">ul =</span> fit <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> se.fit) <span class="sc">%&gt;%</span></span>
<span id="cb240-15"><a href="dnf-did-not-finish.html#cb240-15" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>( <span class="sc">-</span>se.fit) <span class="sc">%&gt;%</span> </span>
<span id="cb240-16"><a href="dnf-did-not-finish.html#cb240-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_all</span>(plogis) <span class="sc">%&gt;%</span></span>
<span id="cb240-17"><a href="dnf-did-not-finish.html#cb240-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(model.grid) <span class="sc">%&gt;%</span></span>
<span id="cb240-18"><a href="dnf-did-not-finish.html#cb240-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">uncertainty =</span> ul<span class="sc">-</span>ll)</span></code></pre></div>
<p>Now, I’ll try plotting the model as a grid space, colored by the probability of a DNF.</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="dnf-did-not-finish.html#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dnf.model.lines) <span class="sc">+</span></span>
<span id="cb241-2"><a href="dnf-did-not-finish.html#cb241-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="fu">aes</span>(race_number, Year, <span class="at">fill=</span>prob)) <span class="sc">+</span></span>
<span id="cb241-3"><a href="dnf-did-not-finish.html#cb241-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>())<span class="sc">+</span></span>
<span id="cb241-4"><a href="dnf-did-not-finish.html#cb241-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Race number of the season&#39;</span>, </span>
<span id="cb241-5"><a href="dnf-did-not-finish.html#cb241-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Year&#39;</span>,</span>
<span id="cb241-6"><a href="dnf-did-not-finish.html#cb241-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill=</span> <span class="st">&#39;Estimated Probability of a DNF&#39;</span>,</span>
<span id="cb241-7"><a href="dnf-did-not-finish.html#cb241-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Probability of a DNF by Year and Race Number of the Season&#39;</span>,</span>
<span id="cb241-8"><a href="dnf-did-not-finish.html#cb241-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;All Grands Prix: 2014 - 2023&#39;</span>) <span class="sc">+</span></span>
<span id="cb241-9"><a href="dnf-did-not-finish.html#cb241-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span> </span>
<span id="cb241-10"><a href="dnf-did-not-finish.html#cb241-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_tufte</span>(<span class="at">base_family=</span><span class="st">&quot;Helvetica&quot;</span>)  <span class="sc">+</span></span>
<span id="cb241-11"><a href="dnf-did-not-finish.html#cb241-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">15</span>),</span>
<span id="cb241-12"><a href="dnf-did-not-finish.html#cb241-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">13</span>),</span>
<span id="cb241-13"><a href="dnf-did-not-finish.html#cb241-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&#39;bottom&#39;</span>, </span>
<span id="cb241-14"><a href="dnf-did-not-finish.html#cb241-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.spacing.x =</span> <span class="fu">unit</span>(<span class="fl">0.5</span>, <span class="st">&#39;cm&#39;</span>),</span>
<span id="cb241-15"><a href="dnf-did-not-finish.html#cb241-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb241-16"><a href="dnf-did-not-finish.html#cb241-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb241-17"><a href="dnf-did-not-finish.html#cb241-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust=</span><span class="dv">1</span>, <span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb241-18"><a href="dnf-did-not-finish.html#cb241-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>))  <span class="sc">+</span></span>
<span id="cb241-19"><a href="dnf-did-not-finish.html#cb241-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">22</span>, <span class="dv">1</span>),</span>
<span id="cb241-20"><a href="dnf-did-not-finish.html#cb241-20" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">22</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb241-21"><a href="dnf-did-not-finish.html#cb241-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_colorbar</span>(<span class="at">barwidth =</span> <span class="dv">12</span>,</span>
<span id="cb241-22"><a href="dnf-did-not-finish.html#cb241-22" aria-hidden="true" tabindex="-1"></a>                               <span class="at">barheight =</span> <span class="fl">1.0</span>, </span>
<span id="cb241-23"><a href="dnf-did-not-finish.html#cb241-23" aria-hidden="true" tabindex="-1"></a>                               <span class="at">title.vjust =</span> <span class="fl">0.75</span>)) </span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-220-1.png" width="960" style="display: block; margin: auto;" /></p>
<p>Pretty Interesting! Despite the varying amounts of statistical significance, this visualization does a good job of describing how DNF probability varies over the course of each season. For instance, in the early years of the turbo-hybrid era, DNFs were consistently high. The probability then proceeds to drop off toward the end of the era in 2019, 2020, and 2021. We see the same type of progression repeat itself under the new ground effects regulations in 2022 and 2023.</p>
</div>
<div id="next-chapter-5" class="section level2 hasAnchor" number="7.5">
<h2><span class="header-section-number">7.5</span> Next Chapter<a href="dnf-did-not-finish.html#next-chapter-5" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In the next chapter, we will visualize championship title fights.</p>
<div style="page-break-after: always;"></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="modeling-race-results.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="the-wdc-world-drivers-championship.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/06-dnf.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
