<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Introduction to Formula 1 | Visualizing Formula 1 Data in R</title>
  <meta name="description" content="This is a book documenting data visualizations of Formula 1 data." />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Introduction to Formula 1 | Visualizing Formula 1 Data in R" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="/F1_book_cover.PNG" />
  <meta property="og:description" content="This is a book documenting data visualizations of Formula 1 data." />
  <meta name="github-repo" content="casanscott/vizf1book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Introduction to Formula 1 | Visualizing Formula 1 Data in R" />
  
  <meta name="twitter:description" content="This is a book documenting data visualizations of Formula 1 data." />
  <meta name="twitter:image" content="/F1_book_cover.PNG" />

<meta name="author" content="Casan Scott, Ph.D." />


<meta name="date" content="2024-02-24" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="qualifying.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Visualizing Formula 1 Data in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> About the book</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#cover-art"><i class="fa fa-check"></i><b>1.1</b> Cover Art</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#about-me"><i class="fa fa-check"></i><b>1.2</b> About me</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#why-did-i-write-this-book"><i class="fa fa-check"></i><b>1.3</b> Why did I write this book?</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#organization-of-this-book"><i class="fa fa-check"></i><b>1.4</b> Organization of this book</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#r"><i class="fa fa-check"></i><b>1.5</b> R</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#ggplot2"><i class="fa fa-check"></i><b>1.6</b> ggplot2</a></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="index.html#the-tidyverse"><i class="fa fa-check"></i><b>1.7</b> The <em>tidyverse</em></a></li>
<li class="chapter" data-level="1.8" data-path="index.html"><a href="index.html#data"><i class="fa fa-check"></i><b>1.8</b> Data</a></li>
<li class="chapter" data-level="1.9" data-path="index.html"><a href="index.html#data-visualization"><i class="fa fa-check"></i><b>1.9</b> Data Visualization</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-formula-1.html"><a href="introduction-to-formula-1.html"><i class="fa fa-check"></i><b>2</b> Introduction to Formula 1</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-formula-1.html"><a href="introduction-to-formula-1.html#data-1"><i class="fa fa-check"></i><b>2.1</b> Data</a></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-formula-1.html"><a href="introduction-to-formula-1.html#a-formula-1-weekend"><i class="fa fa-check"></i><b>2.2</b> A Formula 1 Weekend</a></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-formula-1.html"><a href="introduction-to-formula-1.html#practice-sessions"><i class="fa fa-check"></i><b>2.3</b> Practice Sessions</a></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-formula-1.html"><a href="introduction-to-formula-1.html#practice-times-by-driver"><i class="fa fa-check"></i><b>2.4</b> Practice Times by Driver</a></li>
<li class="chapter" data-level="2.5" data-path="introduction-to-formula-1.html"><a href="introduction-to-formula-1.html#next-chapter"><i class="fa fa-check"></i><b>2.5</b> Next Chapter</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="qualifying.html"><a href="qualifying.html"><i class="fa fa-check"></i><b>3</b> Qualifying</a>
<ul>
<li class="chapter" data-level="3.1" data-path="qualifying.html"><a href="qualifying.html#distribution-of-qualifying-times-by-session"><i class="fa fa-check"></i><b>3.1</b> Distribution of Qualifying Times by Session</a></li>
<li class="chapter" data-level="3.2" data-path="qualifying.html"><a href="qualifying.html#distribution-of-qualifying-times-by-year"><i class="fa fa-check"></i><b>3.2</b> Distribution of Qualifying Times by Year</a></li>
<li class="chapter" data-level="3.3" data-path="qualifying.html"><a href="qualifying.html#qualifying-times-by-grand-prix"><i class="fa fa-check"></i><b>3.3</b> Qualifying Times by Grand Prix</a></li>
<li class="chapter" data-level="3.4" data-path="qualifying.html"><a href="qualifying.html#car-progression-over-time"><i class="fa fa-check"></i><b>3.4</b> Car Progression Over Time</a></li>
<li class="chapter" data-level="3.5" data-path="qualifying.html"><a href="qualifying.html#next-chapter-1"><i class="fa fa-check"></i><b>3.5</b> Next Chapter</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="modeling-practice-and-qualifying-times.html"><a href="modeling-practice-and-qualifying-times.html"><i class="fa fa-check"></i><b>4</b> Modeling Practice and Qualifying Times</a>
<ul>
<li class="chapter" data-level="4.1" data-path="modeling-practice-and-qualifying-times.html"><a href="modeling-practice-and-qualifying-times.html#models"><i class="fa fa-check"></i><b>4.1</b> Models</a></li>
<li class="chapter" data-level="4.2" data-path="modeling-practice-and-qualifying-times.html"><a href="modeling-practice-and-qualifying-times.html#simple-linear-regression-model-practice-vs-qualifying-times"><i class="fa fa-check"></i><b>4.2</b> Simple Linear Regression Model: Practice vs Qualifying Times</a></li>
<li class="chapter" data-level="4.3" data-path="modeling-practice-and-qualifying-times.html"><a href="modeling-practice-and-qualifying-times.html#simple-linear-regression-model-qualifying-time-vs-year"><i class="fa fa-check"></i><b>4.3</b> Simple Linear Regression Model: Qualifying time vs Year</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="modeling-practice-and-qualifying-times.html"><a href="modeling-practice-and-qualifying-times.html#uncertainty-in-model-estimates"><i class="fa fa-check"></i><b>4.3.1</b> Uncertainty in model estimates</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="modeling-practice-and-qualifying-times.html"><a href="modeling-practice-and-qualifying-times.html#interaction-model"><i class="fa fa-check"></i><b>4.4</b> Interaction Model</a></li>
<li class="chapter" data-level="4.5" data-path="modeling-practice-and-qualifying-times.html"><a href="modeling-practice-and-qualifying-times.html#next-chapter-2"><i class="fa fa-check"></i><b>4.5</b> Next Chapter</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="drivers.html"><a href="drivers.html"><i class="fa fa-check"></i><b>5</b> Drivers</a>
<ul>
<li class="chapter" data-level="5.1" data-path="drivers.html"><a href="drivers.html#race-performance"><i class="fa fa-check"></i><b>5.1</b> Race Performance</a></li>
<li class="chapter" data-level="5.2" data-path="drivers.html"><a href="drivers.html#qualifying-pace"><i class="fa fa-check"></i><b>5.2</b> Qualifying Pace</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="drivers.html"><a href="drivers.html#section"><i class="fa fa-check"></i><b>5.2.1</b> 2023</a></li>
<li class="chapter" data-level="5.2.2" data-path="drivers.html"><a href="drivers.html#section-1"><i class="fa fa-check"></i><b>5.2.2</b> 2022</a></li>
<li class="chapter" data-level="5.2.3" data-path="drivers.html"><a href="drivers.html#section-2"><i class="fa fa-check"></i><b>5.2.3</b> 2021</a></li>
<li class="chapter" data-level="5.2.4" data-path="drivers.html"><a href="drivers.html#section-3"><i class="fa fa-check"></i><b>5.2.4</b> 2020</a></li>
<li class="chapter" data-level="5.2.5" data-path="drivers.html"><a href="drivers.html#section-4"><i class="fa fa-check"></i><b>5.2.5</b> 2019</a></li>
<li class="chapter" data-level="5.2.6" data-path="drivers.html"><a href="drivers.html#section-5"><i class="fa fa-check"></i><b>5.2.6</b> 2018</a></li>
<li class="chapter" data-level="5.2.7" data-path="drivers.html"><a href="drivers.html#section-6"><i class="fa fa-check"></i><b>5.2.7</b> 2017</a></li>
<li class="chapter" data-level="5.2.8" data-path="drivers.html"><a href="drivers.html#section-7"><i class="fa fa-check"></i><b>5.2.8</b> 2016</a></li>
<li class="chapter" data-level="5.2.9" data-path="drivers.html"><a href="drivers.html#section-8"><i class="fa fa-check"></i><b>5.2.9</b> 2015</a></li>
<li class="chapter" data-level="5.2.10" data-path="drivers.html"><a href="drivers.html#section-9"><i class="fa fa-check"></i><b>5.2.10</b> 2014</a></li>
<li class="chapter" data-level="5.2.11" data-path="drivers.html"><a href="drivers.html#next-chapter-3"><i class="fa fa-check"></i><b>5.2.11</b> Next Chapter</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="modeling-race-results.html"><a href="modeling-race-results.html"><i class="fa fa-check"></i><b>6</b> Modeling Race Results</a>
<ul>
<li class="chapter" data-level="6.1" data-path="modeling-race-results.html"><a href="modeling-race-results.html#starting-position-vs-finish-position"><i class="fa fa-check"></i><b>6.1</b> Starting Position vs Finish Position</a></li>
<li class="chapter" data-level="6.2" data-path="modeling-race-results.html"><a href="modeling-race-results.html#shortcomings-of-a-simple-linear-regression-model"><i class="fa fa-check"></i><b>6.2</b> Shortcomings of a simple linear regression model</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="modeling-race-results.html"><a href="modeling-race-results.html#linearity"><i class="fa fa-check"></i><b>6.2.1</b> Linearity</a></li>
<li class="chapter" data-level="6.2.2" data-path="modeling-race-results.html"><a href="modeling-race-results.html#homoscedasticity"><i class="fa fa-check"></i><b>6.2.2</b> Homoscedasticity</a></li>
<li class="chapter" data-level="6.2.3" data-path="modeling-race-results.html"><a href="modeling-race-results.html#independence"><i class="fa fa-check"></i><b>6.2.3</b> Independence</a></li>
<li class="chapter" data-level="6.2.4" data-path="modeling-race-results.html"><a href="modeling-race-results.html#normality"><i class="fa fa-check"></i><b>6.2.4</b> Normality</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="modeling-race-results.html"><a href="modeling-race-results.html#ordinal-regression-model"><i class="fa fa-check"></i><b>6.3</b> Ordinal regression model</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="modeling-race-results.html"><a href="modeling-race-results.html#prediction-grid"><i class="fa fa-check"></i><b>6.3.1</b> Prediction Grid</a></li>
<li class="chapter" data-level="6.3.2" data-path="modeling-race-results.html"><a href="modeling-race-results.html#yearly-differences-in-ordinal-regression-results"><i class="fa fa-check"></i><b>6.3.2</b> Yearly Differences in Ordinal Regression Results</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="modeling-race-results.html"><a href="modeling-race-results.html#explore-circuit-specific-models"><i class="fa fa-check"></i><b>6.4</b> Explore Circuit Specific Models</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="modeling-race-results.html"><a href="modeling-race-results.html#bahrain"><i class="fa fa-check"></i><b>6.4.1</b> Bahrain</a></li>
<li class="chapter" data-level="6.4.2" data-path="modeling-race-results.html"><a href="modeling-race-results.html#saudi-arabia"><i class="fa fa-check"></i><b>6.4.2</b> Saudi Arabia</a></li>
<li class="chapter" data-level="6.4.3" data-path="modeling-race-results.html"><a href="modeling-race-results.html#monaco"><i class="fa fa-check"></i><b>6.4.3</b> Monaco</a></li>
<li class="chapter" data-level="6.4.4" data-path="modeling-race-results.html"><a href="modeling-race-results.html#brazil"><i class="fa fa-check"></i><b>6.4.4</b> Brazil</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="modeling-race-results.html"><a href="modeling-race-results.html#appendix-probability-distributions-for-every-grand-prix"><i class="fa fa-check"></i><b>6.5</b> Appendix: Probability distributions for every Grand Prix</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="modeling-race-results.html"><a href="modeling-race-results.html#bahrain-1"><i class="fa fa-check"></i><b>6.5.1</b> Bahrain</a></li>
<li class="chapter" data-level="6.5.2" data-path="modeling-race-results.html"><a href="modeling-race-results.html#saudi-arabia-1"><i class="fa fa-check"></i><b>6.5.2</b> Saudi Arabia</a></li>
<li class="chapter" data-level="6.5.3" data-path="modeling-race-results.html"><a href="modeling-race-results.html#australia"><i class="fa fa-check"></i><b>6.5.3</b> Australia</a></li>
<li class="chapter" data-level="6.5.4" data-path="modeling-race-results.html"><a href="modeling-race-results.html#azerbaijan"><i class="fa fa-check"></i><b>6.5.4</b> Azerbaijan</a></li>
<li class="chapter" data-level="6.5.5" data-path="modeling-race-results.html"><a href="modeling-race-results.html#miami"><i class="fa fa-check"></i><b>6.5.5</b> Miami</a></li>
<li class="chapter" data-level="6.5.6" data-path="modeling-race-results.html"><a href="modeling-race-results.html#emilia-romagna"><i class="fa fa-check"></i><b>6.5.6</b> Emilia Romagna</a></li>
<li class="chapter" data-level="6.5.7" data-path="modeling-race-results.html"><a href="modeling-race-results.html#monaco-1"><i class="fa fa-check"></i><b>6.5.7</b> Monaco</a></li>
<li class="chapter" data-level="6.5.8" data-path="modeling-race-results.html"><a href="modeling-race-results.html#spain"><i class="fa fa-check"></i><b>6.5.8</b> Spain</a></li>
<li class="chapter" data-level="6.5.9" data-path="modeling-race-results.html"><a href="modeling-race-results.html#canada"><i class="fa fa-check"></i><b>6.5.9</b> Canada</a></li>
<li class="chapter" data-level="6.5.10" data-path="modeling-race-results.html"><a href="modeling-race-results.html#austria"><i class="fa fa-check"></i><b>6.5.10</b> Austria</a></li>
<li class="chapter" data-level="6.5.11" data-path="modeling-race-results.html"><a href="modeling-race-results.html#great-britain"><i class="fa fa-check"></i><b>6.5.11</b> Great Britain</a></li>
<li class="chapter" data-level="6.5.12" data-path="modeling-race-results.html"><a href="modeling-race-results.html#hungary"><i class="fa fa-check"></i><b>6.5.12</b> Hungary</a></li>
<li class="chapter" data-level="6.5.13" data-path="modeling-race-results.html"><a href="modeling-race-results.html#belgium"><i class="fa fa-check"></i><b>6.5.13</b> Belgium</a></li>
<li class="chapter" data-level="6.5.14" data-path="modeling-race-results.html"><a href="modeling-race-results.html#netherlands"><i class="fa fa-check"></i><b>6.5.14</b> Netherlands</a></li>
<li class="chapter" data-level="6.5.15" data-path="modeling-race-results.html"><a href="modeling-race-results.html#monza"><i class="fa fa-check"></i><b>6.5.15</b> Monza</a></li>
<li class="chapter" data-level="6.5.16" data-path="modeling-race-results.html"><a href="modeling-race-results.html#singapore"><i class="fa fa-check"></i><b>6.5.16</b> Singapore</a></li>
<li class="chapter" data-level="6.5.17" data-path="modeling-race-results.html"><a href="modeling-race-results.html#japan"><i class="fa fa-check"></i><b>6.5.17</b> Japan</a></li>
<li class="chapter" data-level="6.5.18" data-path="modeling-race-results.html"><a href="modeling-race-results.html#qatar"><i class="fa fa-check"></i><b>6.5.18</b> Qatar</a></li>
<li class="chapter" data-level="6.5.19" data-path="modeling-race-results.html"><a href="modeling-race-results.html#united-states-circuit-of-the-americas-in-austin-texas"><i class="fa fa-check"></i><b>6.5.19</b> United States (Circuit of the Americas in Austin, Texas)</a></li>
<li class="chapter" data-level="6.5.20" data-path="modeling-race-results.html"><a href="modeling-race-results.html#mexico"><i class="fa fa-check"></i><b>6.5.20</b> Mexico</a></li>
<li class="chapter" data-level="6.5.21" data-path="modeling-race-results.html"><a href="modeling-race-results.html#brazil-1"><i class="fa fa-check"></i><b>6.5.21</b> Brazil</a></li>
<li class="chapter" data-level="6.5.22" data-path="modeling-race-results.html"><a href="modeling-race-results.html#abu-dhabi"><i class="fa fa-check"></i><b>6.5.22</b> Abu Dhabi</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="modeling-race-results.html"><a href="modeling-race-results.html#next-chapter-4"><i class="fa fa-check"></i><b>6.6</b> Next Chapter</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="dnf-did-not-finish.html"><a href="dnf-did-not-finish.html"><i class="fa fa-check"></i><b>7</b> DNF (Did Not Finish)</a>
<ul>
<li class="chapter" data-level="7.1" data-path="dnf-did-not-finish.html"><a href="dnf-did-not-finish.html#logistic-regression"><i class="fa fa-check"></i><b>7.1</b> Logistic Regression</a></li>
<li class="chapter" data-level="7.2" data-path="dnf-did-not-finish.html"><a href="dnf-did-not-finish.html#yearly-differences"><i class="fa fa-check"></i><b>7.2</b> Yearly Differences</a></li>
<li class="chapter" data-level="7.3" data-path="dnf-did-not-finish.html"><a href="dnf-did-not-finish.html#differences-by-constructor"><i class="fa fa-check"></i><b>7.3</b> Differences by constructor</a></li>
<li class="chapter" data-level="7.4" data-path="dnf-did-not-finish.html"><a href="dnf-did-not-finish.html#dnfs-by-race-of-the-season"><i class="fa fa-check"></i><b>7.4</b> DNFs by race of the season</a></li>
<li class="chapter" data-level="7.5" data-path="dnf-did-not-finish.html"><a href="dnf-did-not-finish.html#next-chapter-5"><i class="fa fa-check"></i><b>7.5</b> Next Chapter</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="the-wdc-world-drivers-championship.html"><a href="the-wdc-world-drivers-championship.html"><i class="fa fa-check"></i><b>8</b> The WDC (World Drivers Championship)</a></li>
<li class="chapter" data-level="9" data-path="conclusions.html"><a href="conclusions.html"><i class="fa fa-check"></i><b>9</b> Conclusions</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Visualizing Formula 1 Data in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="introduction-to-formula-1" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">Chapter 2</span> Introduction to Formula 1<a href="introduction-to-formula-1.html#introduction-to-formula-1" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>What is Formula 1? The word <em>formula</em> refers to a particular ruleset that teams’ cars must conform to, and <em>1</em> designates that this classification is the highest level of motorsport competition. So, <em>Formula 1</em> racing is the highest class of international open-wheel single-seater formula racing sanctioned by the Fédération Internationale de l’Automobile (FIA). A Formula 1 season includes a series of <em>Grands Prix</em> (races) that take place across the globe on various types of tracks, ranging from closed public city streets to designated racing circuits and modern manufactured street-circuits.</p>
<p>Like most professional sports, Formula 1 is also big business! Thanks in part to the popular Netflix series <em>Drive to Survive</em>, Formula 1 has experienced a recent explosion of popularity in the United States (I am one of these recent converts!). Along with this uptick in popularity, Formula 1 teams have also experienced a surge in valuation.</p>
<p>As an initial example using <strong>ggplot</strong>, I will create a bar chart to visualize this trend in team valuation. Prior to creating the bar chart with the <code>ggplot()</code> function, I have to create the dataframe and then reshape it to a <em>longer format</em> using the <code>pivot_longer()</code> function.</p>
<div class="blackbox">
<div class="center">
<p><strong>How to pivot data into a longer format in R</strong></p>
</div>
<p><code>pivot_longer()</code> <em>lengthens</em> data, increasing the number of rows and decreasing the number of columns.</p>
<p>To <em>widen</em> the data, use the <code>pivot_wider()</code> function, which is the inverse transformation.</p>
<p>For more information on <code>pivot_longer()</code> and <code>pivot_wider()</code>, visit this link: <a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="uri">https://tidyr.tidyverse.org/reference/pivot_longer.html</a></p>
</div>
<p><br>
<br></p>
<p>The following figure was created using data compiled by <a href="https://thesportsdaily.com/" class="uri">https://thesportsdaily.com/</a>, and originally retrieved from Sportico and Statista:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="introduction-to-formula-1.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb12-2"><a href="introduction-to-formula-1.html#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="introduction-to-formula-1.html#cb12-3" aria-hidden="true" tabindex="-1"></a>valuation_table <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">`</span><span class="at">F1 Team</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&#39;Ferrari&#39;</span>, <span class="st">&#39;Mercedes&#39;</span>, <span class="st">&#39;Red Bull&#39;</span>, <span class="st">&#39;McLaren&#39;</span>, <span class="st">&#39;Aston Martin&#39;</span>,</span>
<span id="cb12-4"><a href="introduction-to-formula-1.html#cb12-4" aria-hidden="true" tabindex="-1"></a>                                            <span class="st">&#39;Alpine&#39;</span>, <span class="st">&#39;Alpha Tauri&#39;</span>, <span class="st">&#39;Alfa Romeo&#39;</span>, <span class="st">&#39;Williams&#39;</span>, <span class="st">&#39;Haas&#39;</span>),</span>
<span id="cb12-5"><a href="introduction-to-formula-1.html#cb12-5" aria-hidden="true" tabindex="-1"></a>                              <span class="st">`</span><span class="at">2018 Valuation</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1350</span>, <span class="dv">1015</span>, <span class="dv">640</span>, <span class="dv">620</span>, <span class="cn">NA</span>, <span class="dv">430</span>, <span class="dv">200</span>, <span class="dv">105</span>, <span class="dv">400</span>, <span class="dv">115</span>),</span>
<span id="cb12-6"><a href="introduction-to-formula-1.html#cb12-6" aria-hidden="true" tabindex="-1"></a>                              <span class="st">`</span><span class="at">2023 Valuation</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">3130</span>, <span class="dv">2700</span>, <span class="dv">2420</span>, <span class="dv">1560</span>, <span class="dv">1140</span>, <span class="dv">1080</span>, <span class="dv">905</span>, <span class="dv">815</span>, <span class="dv">795</span>, <span class="dv">710</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-7"><a href="introduction-to-formula-1.html#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span> F1.Team, <span class="at">names_to =</span> <span class="st">&#39;year&#39;</span>, <span class="at">values_to =</span> <span class="st">&#39;valuation&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-8"><a href="introduction-to-formula-1.html#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">str_remove</span>(year, <span class="st">&#39;X&#39;</span>),</span>
<span id="cb12-9"><a href="introduction-to-formula-1.html#cb12-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">year =</span> <span class="fu">str_remove</span>(year, <span class="st">&#39;.Valuation&#39;</span>))</span>
<span id="cb12-10"><a href="introduction-to-formula-1.html#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="introduction-to-formula-1.html#cb12-11" aria-hidden="true" tabindex="-1"></a>valuation_table <span class="sc">%&gt;%</span></span>
<span id="cb12-12"><a href="introduction-to-formula-1.html#cb12-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">fct_reorder</span>(F1.Team, valuation), <span class="at">x =</span> valuation, <span class="at">fill =</span> year)) <span class="sc">+</span></span>
<span id="cb12-13"><a href="introduction-to-formula-1.html#cb12-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">stat =</span> <span class="st">&#39;identity&#39;</span>, <span class="at">position =</span> <span class="st">&#39;dodge&#39;</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb12-14"><a href="introduction-to-formula-1.html#cb12-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Increase in Formula 1 Team Valuations&#39;</span>,</span>
<span id="cb12-15"><a href="introduction-to-formula-1.html#cb12-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2018 vs 2023&#39;</span>,</span>
<span id="cb12-16"><a href="introduction-to-formula-1.html#cb12-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;F1 Team&#39;</span>,</span>
<span id="cb12-17"><a href="introduction-to-formula-1.html#cb12-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&#39;Valuation (Millions)&#39;</span>,</span>
<span id="cb12-18"><a href="introduction-to-formula-1.html#cb12-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&#39;data sources:  </span><span class="sc">\n</span><span class="st"> https://thesportsdaily.com/news/f1-teams-valuations-increase-by-an-average-of-280-over-last-five-years/ </span><span class="sc">\n</span><span class="st"> https://www.sportico.com/leagues/motorsports/2023/richest-formula-1-teams-most-valuable-1234727541/ </span><span class="sc">\n</span><span class="st"> https://www.sportico.com/leagues/motorsports/2023/richest-formula-1-teams-most-valuable-1234727541/&#39;</span>) <span class="sc">+</span></span>
<span id="cb12-19"><a href="introduction-to-formula-1.html#cb12-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb12-20"><a href="introduction-to-formula-1.html#cb12-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>()) <span class="sc">+</span></span>
<span id="cb12-21"><a href="introduction-to-formula-1.html#cb12-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb12-22"><a href="introduction-to-formula-1.html#cb12-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb12-23"><a href="introduction-to-formula-1.html#cb12-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">size =</span> <span class="dv">9</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-5-1.png" width="768" style="display: block; margin: auto;" /></p>
<p><br>
<br></p>
<div class="blackbox">
<div class="center">
<p><strong>How to create a bar chart in R</strong></p>
</div>
<p>To create the figure above, I used the bar geometry, <code>geom_bar()</code>, in <strong>ggplot2</strong>. I often use bar charts to plot counts or sums by some grouping variable.</p>
<p>I used two arguments within <code>geom_bar()</code>: <code>stat = 'identity'</code> ensures that <strong>ggplot</strong> uses the dollar sum as listed in the column, while <code>position = 'dodge'</code> preserves the position along the x-axis.</p>
<p>For more information on <em>dodging</em> in <strong>ggplot2</strong>, visit this link: <a href="https://ggplot2.tidyverse.org/reference/position_dodge.html" class="uri">https://ggplot2.tidyverse.org/reference/position_dodge.html</a></p>
</div>
<p><br>
<br></p>
<p>Each Formula 1 team has two cars driven by two drivers. Drivers and teams are awarded points based on their finishing position in each Grand Prix. The final tally of points scored will decide two competitions that are taking place during a Formula 1 season: (1) a driver’s championship, and (2) a constructors championship (team championship). Currently, Formula 1 has 10 teams, 20 drivers, and awards the following points for each finishing position. Additionally, 1 point is awarded to the driver with the fastest lap during a Grand Prix.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="introduction-to-formula-1.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb13-2"><a href="introduction-to-formula-1.html#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb13-3"><a href="introduction-to-formula-1.html#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb13-4"><a href="introduction-to-formula-1.html#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="introduction-to-formula-1.html#cb13-5" aria-hidden="true" tabindex="-1"></a>points_dataframe <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Placing =</span> <span class="fu">c</span>(<span class="st">&#39;1&#39;</span>, <span class="st">&#39;2&#39;</span>, <span class="st">&#39;3&#39;</span>, <span class="st">&#39;4&#39;</span>, <span class="st">&#39;5&#39;</span>, <span class="st">&#39;6&#39;</span>, <span class="st">&#39;7&#39;</span>, <span class="st">&#39;8&#39;</span>, <span class="st">&#39;9&#39;</span>, <span class="st">&#39;10&#39;</span>, <span class="st">&#39;11 - 20&#39;</span>),</span>
<span id="cb13-6"><a href="introduction-to-formula-1.html#cb13-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">Pts =</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">18</span>, <span class="dv">15</span>, <span class="dv">12</span>, <span class="dv">10</span>, <span class="dv">8</span>, <span class="dv">6</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">0</span>))</span>
<span id="cb13-7"><a href="introduction-to-formula-1.html#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="introduction-to-formula-1.html#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="fu">gt</span>(points_dataframe)  <span class="sc">%&gt;%</span> </span>
<span id="cb13-9"><a href="introduction-to-formula-1.html#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(<span class="at">align =</span> <span class="fu">c</span>(<span class="st">&quot;center&quot;</span>), <span class="at">columns =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb13-10"><a href="introduction-to-formula-1.html#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(<span class="at">column_labels.font.weight =</span> <span class="st">&quot;bold&quot;</span>)</span></code></pre></div>
<div id="ycsgbccovu" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ycsgbccovu table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ycsgbccovu thead, #ycsgbccovu tbody, #ycsgbccovu tfoot, #ycsgbccovu tr, #ycsgbccovu td, #ycsgbccovu th {
  border-style: none;
}

#ycsgbccovu p {
  margin: 0;
  padding: 0;
}

#ycsgbccovu .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ycsgbccovu .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ycsgbccovu .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ycsgbccovu .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ycsgbccovu .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ycsgbccovu .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ycsgbccovu .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ycsgbccovu .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ycsgbccovu .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ycsgbccovu .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ycsgbccovu .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ycsgbccovu .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ycsgbccovu .gt_spanner_row {
  border-bottom-style: hidden;
}

#ycsgbccovu .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ycsgbccovu .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ycsgbccovu .gt_from_md > :first-child {
  margin-top: 0;
}

#ycsgbccovu .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ycsgbccovu .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ycsgbccovu .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ycsgbccovu .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ycsgbccovu .gt_row_group_first td {
  border-top-width: 2px;
}

#ycsgbccovu .gt_row_group_first th {
  border-top-width: 2px;
}

#ycsgbccovu .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ycsgbccovu .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ycsgbccovu .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ycsgbccovu .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ycsgbccovu .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ycsgbccovu .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ycsgbccovu .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ycsgbccovu .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ycsgbccovu .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ycsgbccovu .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ycsgbccovu .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ycsgbccovu .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ycsgbccovu .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ycsgbccovu .gt_left {
  text-align: left;
}

#ycsgbccovu .gt_center {
  text-align: center;
}

#ycsgbccovu .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ycsgbccovu .gt_font_normal {
  font-weight: normal;
}

#ycsgbccovu .gt_font_bold {
  font-weight: bold;
}

#ycsgbccovu .gt_font_italic {
  font-style: italic;
}

#ycsgbccovu .gt_super {
  font-size: 65%;
}

#ycsgbccovu .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ycsgbccovu .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ycsgbccovu .gt_indent_1 {
  text-indent: 5px;
}

#ycsgbccovu .gt_indent_2 {
  text-indent: 10px;
}

#ycsgbccovu .gt_indent_3 {
  text-indent: 15px;
}

#ycsgbccovu .gt_indent_4 {
  text-indent: 20px;
}

#ycsgbccovu .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Placing">Placing</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="Pts">Pts</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Placing" class="gt_row gt_right">1</td>
<td headers="Pts" class="gt_row gt_center">25</td></tr>
    <tr><td headers="Placing" class="gt_row gt_right">2</td>
<td headers="Pts" class="gt_row gt_center">18</td></tr>
    <tr><td headers="Placing" class="gt_row gt_right">3</td>
<td headers="Pts" class="gt_row gt_center">15</td></tr>
    <tr><td headers="Placing" class="gt_row gt_right">4</td>
<td headers="Pts" class="gt_row gt_center">12</td></tr>
    <tr><td headers="Placing" class="gt_row gt_right">5</td>
<td headers="Pts" class="gt_row gt_center">10</td></tr>
    <tr><td headers="Placing" class="gt_row gt_right">6</td>
<td headers="Pts" class="gt_row gt_center">8</td></tr>
    <tr><td headers="Placing" class="gt_row gt_right">7</td>
<td headers="Pts" class="gt_row gt_center">6</td></tr>
    <tr><td headers="Placing" class="gt_row gt_right">8</td>
<td headers="Pts" class="gt_row gt_center">4</td></tr>
    <tr><td headers="Placing" class="gt_row gt_right">9</td>
<td headers="Pts" class="gt_row gt_center">2</td></tr>
    <tr><td headers="Placing" class="gt_row gt_right">10</td>
<td headers="Pts" class="gt_row gt_center">1</td></tr>
    <tr><td headers="Placing" class="gt_row gt_right">11 - 20</td>
<td headers="Pts" class="gt_row gt_center">0</td></tr>
  </tbody>
  
  
</table>
</div>
<div class="blackbox">
<div class="center">
<p><strong>How to create a table in R</strong></p>
</div>
<p>To create the table above, I simply pipe (i.e. <code>%&gt;%</code>) a manually-created dataframe to the <code>gt()</code> function (i.e. <code>df %&gt;% gt()</code>). The <code>gt()</code> function is found in the <strong>gt</strong> package. The <strong>gt</strong> package is the best way (in my opinion!) to create beautiful tables using the R programming language. <strong>gt</strong> functions work great with dataframes and tibbles, and can easily become an extension of yur typical tidy workflow. This example above is an absolute bare-bones examples of a <strong>gt</strong> table.</p>
<p>Another way to create this type of table would be to use the <code>kable()</code> function from the <strong>knitr</strong> package. The <code>kable()</code> function is a very simple table generator in R.</p>
<p>For more information about the <strong>gt</strong> package, visit this link:</p>
<p><a href="https://gt.rstudio.com/" class="uri">https://gt.rstudio.com/</a></p>
<p>This guide provides lots of information about styling aesthetics of a table, including table headers and footers, column labels, and much, much more!</p>
</div>
<div id="data-1" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Data<a href="introduction-to-formula-1.html#data-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In this book, I will limit the data to include only years 2014 through 2023. Why start in 2014? 2014 marks the beginning of the <strong>turbo-hybrid</strong> era in Formula 1. In 2014, F1 made perhaps the most significant rule change in its’ history by replacing naturally aspirated V8 engines with 1.6 liter turbocharged V6 engines. In fact, because F1 engines now include an electric component, they are actually referred to as <em>power units</em>. This new set of regulations seemed like an ideal place to start my analyses. At times in this book, I will note changes occurring after the 2021 season. I do this because 2022 marked another year of significant change in the regulations, this time aerodynamically. After a forty-year ban, <strong>ground effect</strong> returned to Formula 1. The goal for a Formula 1 engineering and design team is to optimize ground effect so that the bottom of the car generates low pressure, which will <em>suck</em> the car to the track. This new set of regulations in 2022 disrupted Mercedes’ period of dominance from 2014 to 2021.</p>
</div>
<div id="a-formula-1-weekend" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> A Formula 1 Weekend<a href="introduction-to-formula-1.html#a-formula-1-weekend" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A Formula One Grand Prix is actually not just a single race, but rather a sporting event spanning three days, typically from Friday to Sunday. Beginning on Friday, there is typically two practices (<strong>FP1</strong> and <strong>FP2</strong>), followed by a third practice (<strong>FP3</strong>) and a qualifying session on Saturday. Practice sessions provide teams an opportunity to <em>practice</em> on the circuit, and experiment with the setup of the car. Qualifying determines the grid for the race on Sunday. Currently, there are three heats in qualifying. All cars compete in the first heat (<strong>Q1</strong>), and the top 15 fastest times advance to the 2nd heat (<strong>Q2</strong>). From there, the top 10 fastest times during heat 2 advance to <em>Q3</em> (heat 3). Qualifying times determine the starting grid for the Grand Prix. The fastest qualifying times start the race at the front of the <em>grid</em>, and the slowest start at the back. If a driver incurs a penalty during qualifying, the starting grid will be adjusted accordingly. The race takes place on Sunday, and the top three placed drivers take their places upon a <em>podium</em>. A <em>podium</em> is a particularly noteworthy career achievement.</p>
</div>
<div id="practice-sessions" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Practice Sessions<a href="introduction-to-formula-1.html#practice-sessions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Currently, there are three free practice sessions (often abbreviated to FP1, FP2, and FP3) that are held before the race. The first (FP1) is held on Friday morning, the second (FP2) on Friday afternoon, and the third session (FP3) is held on Saturday morning. Since 2021, practice sessions last for one hour, but previously Friday sessions were 90 minutes long.</p>
<p>Typically, teams will use each practice session for a different purpose. For instance, FP1 is often used to test the car and ensure it is working as expected, while also collecting information on the track and car setup. FP2 is often used for additional reconnaissance and testing of the car’s performance on <em>long runs</em>. FP3 is most commonly used to understand the car’s speed over lap (i.e. qualifying pace).</p>
<p>When I first became interested in Formula 1, I had tons of questions about the cars, racing, and structure of the Grand Prix weekend. While there are countless resources available to learn about Formula (shout out to r/formula1), I particularly enjoy learning by exploring data. Luckily, you can find practice, qualifying, and Grand Prix data on <a href="https://formula1.com/" class="uri">https://formula1.com/</a>.</p>
<p>In this chapter, we will be focusing on practice data. To make that data a little more accessible, feel free to use the <code>practice_session_scraper()</code> function from my <strong>drs</strong> package. To scrape FP1 data for 2014 through 2023, use the following code:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="introduction-to-formula-1.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Scrape FP1 data</span></span>
<span id="cb14-2"><a href="introduction-to-formula-1.html#cb14-2" aria-hidden="true" tabindex="-1"></a>fp1_2023 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2023</span>, <span class="dv">1</span>)</span>
<span id="cb14-3"><a href="introduction-to-formula-1.html#cb14-3" aria-hidden="true" tabindex="-1"></a>fp1_2022 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2022</span>, <span class="dv">1</span>)</span>
<span id="cb14-4"><a href="introduction-to-formula-1.html#cb14-4" aria-hidden="true" tabindex="-1"></a>fp1_2021 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2021</span>, <span class="dv">1</span>)</span>
<span id="cb14-5"><a href="introduction-to-formula-1.html#cb14-5" aria-hidden="true" tabindex="-1"></a>fp1_2020 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2020</span>, <span class="dv">1</span>)</span>
<span id="cb14-6"><a href="introduction-to-formula-1.html#cb14-6" aria-hidden="true" tabindex="-1"></a>fp1_2019 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2019</span>, <span class="dv">1</span>)</span>
<span id="cb14-7"><a href="introduction-to-formula-1.html#cb14-7" aria-hidden="true" tabindex="-1"></a>fp1_2018 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2018</span>, <span class="dv">1</span>)</span>
<span id="cb14-8"><a href="introduction-to-formula-1.html#cb14-8" aria-hidden="true" tabindex="-1"></a>fp1_2017 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2017</span>, <span class="dv">1</span>)</span>
<span id="cb14-9"><a href="introduction-to-formula-1.html#cb14-9" aria-hidden="true" tabindex="-1"></a>fp1_2016 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2016</span>, <span class="dv">1</span>)</span>
<span id="cb14-10"><a href="introduction-to-formula-1.html#cb14-10" aria-hidden="true" tabindex="-1"></a>fp1_2015 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2015</span>, <span class="dv">1</span>)</span>
<span id="cb14-11"><a href="introduction-to-formula-1.html#cb14-11" aria-hidden="true" tabindex="-1"></a>fp1_2014 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2014</span>, <span class="dv">1</span>)</span></code></pre></div>
<p>To scrape FP2 data for the same time period, use this code:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="introduction-to-formula-1.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Scrape FP2 data</span></span>
<span id="cb15-2"><a href="introduction-to-formula-1.html#cb15-2" aria-hidden="true" tabindex="-1"></a>fp2_2023 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2023</span>, <span class="dv">2</span>)</span>
<span id="cb15-3"><a href="introduction-to-formula-1.html#cb15-3" aria-hidden="true" tabindex="-1"></a>fp2_2022 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2022</span>, <span class="dv">2</span>)</span>
<span id="cb15-4"><a href="introduction-to-formula-1.html#cb15-4" aria-hidden="true" tabindex="-1"></a>fp2_2021 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2021</span>, <span class="dv">2</span>)</span>
<span id="cb15-5"><a href="introduction-to-formula-1.html#cb15-5" aria-hidden="true" tabindex="-1"></a>fp2_2020 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2020</span>, <span class="dv">2</span>)</span>
<span id="cb15-6"><a href="introduction-to-formula-1.html#cb15-6" aria-hidden="true" tabindex="-1"></a>fp2_2019 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2019</span>, <span class="dv">2</span>)</span>
<span id="cb15-7"><a href="introduction-to-formula-1.html#cb15-7" aria-hidden="true" tabindex="-1"></a>fp2_2018 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2018</span>, <span class="dv">2</span>)</span>
<span id="cb15-8"><a href="introduction-to-formula-1.html#cb15-8" aria-hidden="true" tabindex="-1"></a>fp2_2017 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2017</span>, <span class="dv">2</span>)</span>
<span id="cb15-9"><a href="introduction-to-formula-1.html#cb15-9" aria-hidden="true" tabindex="-1"></a>fp2_2016 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2016</span>, <span class="dv">2</span>)</span>
<span id="cb15-10"><a href="introduction-to-formula-1.html#cb15-10" aria-hidden="true" tabindex="-1"></a>fp2_2015 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2015</span>, <span class="dv">2</span>)</span>
<span id="cb15-11"><a href="introduction-to-formula-1.html#cb15-11" aria-hidden="true" tabindex="-1"></a>fp2_2014 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2014</span>, <span class="dv">2</span>)</span></code></pre></div>
<p>And finally, to scrape FP3 data, use this:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="introduction-to-formula-1.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Scrape FP3 data</span></span>
<span id="cb16-2"><a href="introduction-to-formula-1.html#cb16-2" aria-hidden="true" tabindex="-1"></a>fp3_2023 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2023</span>, <span class="dv">3</span>)</span>
<span id="cb16-3"><a href="introduction-to-formula-1.html#cb16-3" aria-hidden="true" tabindex="-1"></a>fp3_2022 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2022</span>, <span class="dv">3</span>)</span>
<span id="cb16-4"><a href="introduction-to-formula-1.html#cb16-4" aria-hidden="true" tabindex="-1"></a>fp3_2021 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2021</span>, <span class="dv">3</span>)</span>
<span id="cb16-5"><a href="introduction-to-formula-1.html#cb16-5" aria-hidden="true" tabindex="-1"></a>fp3_2020 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2020</span>, <span class="dv">3</span>)</span>
<span id="cb16-6"><a href="introduction-to-formula-1.html#cb16-6" aria-hidden="true" tabindex="-1"></a>fp3_2019 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2019</span>, <span class="dv">3</span>)</span>
<span id="cb16-7"><a href="introduction-to-formula-1.html#cb16-7" aria-hidden="true" tabindex="-1"></a>fp3_2018 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2018</span>, <span class="dv">3</span>)</span>
<span id="cb16-8"><a href="introduction-to-formula-1.html#cb16-8" aria-hidden="true" tabindex="-1"></a>fp3_2017 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2017</span>, <span class="dv">3</span>)</span>
<span id="cb16-9"><a href="introduction-to-formula-1.html#cb16-9" aria-hidden="true" tabindex="-1"></a>fp3_2016 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2016</span>, <span class="dv">3</span>)</span>
<span id="cb16-10"><a href="introduction-to-formula-1.html#cb16-10" aria-hidden="true" tabindex="-1"></a>fp3_2015 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2015</span>, <span class="dv">3</span>)</span>
<span id="cb16-11"><a href="introduction-to-formula-1.html#cb16-11" aria-hidden="true" tabindex="-1"></a>fp3_2014 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2014</span>, <span class="dv">3</span>)</span></code></pre></div>
<p>Now that the data is scraped from www.formula1.com, I need to combine the dataframes together into one dataframe. I will use the <code>rbind()</code> function to row-bind data for each practice session.</p>
<p><br>
<br></p>
<div class="blackbox">
<div class="center">
<p><strong>How to bind data in R</strong></p>
</div>
<p>The <code>cbind()</code> and <code>rbind()</code> functions combine by columns or rows, respectively.</p>
<p>For more information on these two functions, visit this link: <a href="https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/cbind" class="uri">https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/cbind</a></p>
</div>
<p><br>
<br></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="introduction-to-formula-1.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Combine all practice data</span></span>
<span id="cb17-2"><a href="introduction-to-formula-1.html#cb17-2" aria-hidden="true" tabindex="-1"></a>practice_times <span class="ot">&lt;-</span> <span class="fu">rbind</span>(fp3_2023,</span>
<span id="cb17-3"><a href="introduction-to-formula-1.html#cb17-3" aria-hidden="true" tabindex="-1"></a>                        fp3_2022,</span>
<span id="cb17-4"><a href="introduction-to-formula-1.html#cb17-4" aria-hidden="true" tabindex="-1"></a>                            fp3_2021,</span>
<span id="cb17-5"><a href="introduction-to-formula-1.html#cb17-5" aria-hidden="true" tabindex="-1"></a>                            fp3_2020,</span>
<span id="cb17-6"><a href="introduction-to-formula-1.html#cb17-6" aria-hidden="true" tabindex="-1"></a>                            fp3_2019,</span>
<span id="cb17-7"><a href="introduction-to-formula-1.html#cb17-7" aria-hidden="true" tabindex="-1"></a>                            fp3_2018,</span>
<span id="cb17-8"><a href="introduction-to-formula-1.html#cb17-8" aria-hidden="true" tabindex="-1"></a>                            fp3_2017,</span>
<span id="cb17-9"><a href="introduction-to-formula-1.html#cb17-9" aria-hidden="true" tabindex="-1"></a>                            fp3_2016,</span>
<span id="cb17-10"><a href="introduction-to-formula-1.html#cb17-10" aria-hidden="true" tabindex="-1"></a>                            fp3_2015,</span>
<span id="cb17-11"><a href="introduction-to-formula-1.html#cb17-11" aria-hidden="true" tabindex="-1"></a>                            fp3_2014) <span class="sc">%&gt;%</span></span>
<span id="cb17-12"><a href="introduction-to-formula-1.html#cb17-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="fu">rbind</span>(fp2_2023,</span>
<span id="cb17-13"><a href="introduction-to-formula-1.html#cb17-13" aria-hidden="true" tabindex="-1"></a>                  fp2_2022,</span>
<span id="cb17-14"><a href="introduction-to-formula-1.html#cb17-14" aria-hidden="true" tabindex="-1"></a>                            fp2_2021,</span>
<span id="cb17-15"><a href="introduction-to-formula-1.html#cb17-15" aria-hidden="true" tabindex="-1"></a>                            fp2_2020,</span>
<span id="cb17-16"><a href="introduction-to-formula-1.html#cb17-16" aria-hidden="true" tabindex="-1"></a>                            fp2_2019,</span>
<span id="cb17-17"><a href="introduction-to-formula-1.html#cb17-17" aria-hidden="true" tabindex="-1"></a>                            fp2_2018,</span>
<span id="cb17-18"><a href="introduction-to-formula-1.html#cb17-18" aria-hidden="true" tabindex="-1"></a>                            fp2_2017,</span>
<span id="cb17-19"><a href="introduction-to-formula-1.html#cb17-19" aria-hidden="true" tabindex="-1"></a>                            fp2_2016,</span>
<span id="cb17-20"><a href="introduction-to-formula-1.html#cb17-20" aria-hidden="true" tabindex="-1"></a>                            fp2_2015,</span>
<span id="cb17-21"><a href="introduction-to-formula-1.html#cb17-21" aria-hidden="true" tabindex="-1"></a>                            fp2_2014) <span class="sc">%&gt;%</span></span>
<span id="cb17-22"><a href="introduction-to-formula-1.html#cb17-22" aria-hidden="true" tabindex="-1"></a>              dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="st">&#39;Driver&#39;</span>, <span class="st">&#39;Race&#39;</span>, <span class="st">&#39;Year&#39;</span>, <span class="st">&#39;Time&#39;</span>, <span class="st">&#39;Time_secs&#39;</span>), <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&#39;Driver&#39;</span>, <span class="st">&#39;Race&#39;</span>, <span class="st">&#39;Year&#39;</span>), <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">&quot;_3&quot;</span>, <span class="st">&quot;_2&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb17-23"><a href="introduction-to-formula-1.html#cb17-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="fu">rbind</span>(fp1_2023,</span>
<span id="cb17-24"><a href="introduction-to-formula-1.html#cb17-24" aria-hidden="true" tabindex="-1"></a>                  fp1_2022,</span>
<span id="cb17-25"><a href="introduction-to-formula-1.html#cb17-25" aria-hidden="true" tabindex="-1"></a>                            fp1_2021,</span>
<span id="cb17-26"><a href="introduction-to-formula-1.html#cb17-26" aria-hidden="true" tabindex="-1"></a>                            fp1_2020,</span>
<span id="cb17-27"><a href="introduction-to-formula-1.html#cb17-27" aria-hidden="true" tabindex="-1"></a>                            fp1_2019,</span>
<span id="cb17-28"><a href="introduction-to-formula-1.html#cb17-28" aria-hidden="true" tabindex="-1"></a>                            fp1_2018,</span>
<span id="cb17-29"><a href="introduction-to-formula-1.html#cb17-29" aria-hidden="true" tabindex="-1"></a>                            fp1_2017,</span>
<span id="cb17-30"><a href="introduction-to-formula-1.html#cb17-30" aria-hidden="true" tabindex="-1"></a>                            fp1_2016,</span>
<span id="cb17-31"><a href="introduction-to-formula-1.html#cb17-31" aria-hidden="true" tabindex="-1"></a>                            fp1_2015,</span>
<span id="cb17-32"><a href="introduction-to-formula-1.html#cb17-32" aria-hidden="true" tabindex="-1"></a>                            fp1_2014) <span class="sc">%&gt;%</span></span>
<span id="cb17-33"><a href="introduction-to-formula-1.html#cb17-33" aria-hidden="true" tabindex="-1"></a>              dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="st">&#39;Driver&#39;</span>, <span class="st">&#39;Race&#39;</span>, <span class="st">&#39;Year&#39;</span>, <span class="st">&#39;Time&#39;</span>, <span class="st">&#39;Time_secs&#39;</span>), <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&#39;Driver&#39;</span>, <span class="st">&#39;Race&#39;</span>, <span class="st">&#39;Year&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb17-34"><a href="introduction-to-formula-1.html#cb17-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Time_1 =</span> Time, <span class="at">Time_secs_1 =</span> Time_secs) <span class="sc">%&gt;%</span> </span>
<span id="cb17-35"><a href="introduction-to-formula-1.html#cb17-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(Time_3, <span class="at">.after =</span> Year)</span></code></pre></div>
<p><br>
<br></p>
<p>While learning about the sport, one of my early questions was: <em>Do cars get faster with each practice session?</em></p>
<p>To begin trying to answer this question, I will make use of the practice session data. For this example, I will focus on 2023 practice data, and use <code>left_join()</code> from the <strong>dplyr</strong> package to merge all practice sessions together for the 2023 season.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="introduction-to-formula-1.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pull 2023 data</span></span>
<span id="cb18-2"><a href="introduction-to-formula-1.html#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Scrape FP1 data</span></span>
<span id="cb18-3"><a href="introduction-to-formula-1.html#cb18-3" aria-hidden="true" tabindex="-1"></a>fp1_2023 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2023</span>, <span class="dv">1</span>)</span>
<span id="cb18-4"><a href="introduction-to-formula-1.html#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Scrape FP2 data</span></span>
<span id="cb18-5"><a href="introduction-to-formula-1.html#cb18-5" aria-hidden="true" tabindex="-1"></a>fp2_2023 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2023</span>, <span class="dv">2</span>)</span>
<span id="cb18-6"><a href="introduction-to-formula-1.html#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Scrape FP2 data</span></span>
<span id="cb18-7"><a href="introduction-to-formula-1.html#cb18-7" aria-hidden="true" tabindex="-1"></a>fp3_2023 <span class="ot">&lt;-</span> <span class="fu">practice_session_scraper</span>(<span class="dv">2023</span>, <span class="dv">3</span>)</span>
<span id="cb18-8"><a href="introduction-to-formula-1.html#cb18-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-9"><a href="introduction-to-formula-1.html#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge Practices times for 2022</span></span>
<span id="cb18-10"><a href="introduction-to-formula-1.html#cb18-10" aria-hidden="true" tabindex="-1"></a>practice_times_2023 <span class="ot">&lt;-</span> fp3_2023 <span class="sc">%&gt;%</span></span>
<span id="cb18-11"><a href="introduction-to-formula-1.html#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(fp2_2023 <span class="sc">%&gt;%</span></span>
<span id="cb18-12"><a href="introduction-to-formula-1.html#cb18-12" aria-hidden="true" tabindex="-1"></a>              dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="st">&#39;Driver&#39;</span>, <span class="st">&#39;Race&#39;</span>, <span class="st">&#39;Year&#39;</span>, <span class="st">&#39;Time&#39;</span>, <span class="st">&#39;Time_secs&#39;</span>), <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&#39;Driver&#39;</span>, <span class="st">&#39;Race&#39;</span>, <span class="st">&#39;Year&#39;</span>), <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">&quot;_3&quot;</span>, <span class="st">&quot;_2&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb18-13"><a href="introduction-to-formula-1.html#cb18-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(fp1_2023 <span class="sc">%&gt;%</span></span>
<span id="cb18-14"><a href="introduction-to-formula-1.html#cb18-14" aria-hidden="true" tabindex="-1"></a>              dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="st">&#39;Driver&#39;</span>, <span class="st">&#39;Race&#39;</span>, <span class="st">&#39;Year&#39;</span>, <span class="st">&#39;Time&#39;</span>, <span class="st">&#39;Time_secs&#39;</span>), <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&#39;Driver&#39;</span>, <span class="st">&#39;Race&#39;</span>, <span class="st">&#39;Year&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb18-15"><a href="introduction-to-formula-1.html#cb18-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Time_1 =</span> Time, <span class="at">Time_secs_1 =</span> Time_secs) <span class="sc">%&gt;%</span> </span>
<span id="cb18-16"><a href="introduction-to-formula-1.html#cb18-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(Time_3, <span class="at">.after =</span> Year)</span></code></pre></div>
<p><br>
<br></p>
<div class="blackbox">
<div class="center">
<p><strong>How to join data in R</strong></p>
</div>
<p>Joining data is pretty simple using functions from the <strong>dplyr</strong> package. In dplyr, you will be mutating joins, which adds columns from y to x, matching observations based on the keys. There are four mutating joins:</p>
<ul>
<li><code>inner_join()</code></li>
<li><code>left_join()</code></li>
<li><code>right_join()</code></li>
<li><code>full_join()</code></li>
</ul>
<p>For more information on mutating joins in <strong>dplyr</strong>, visit this link: <a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="uri">https://dplyr.tidyverse.org/reference/mutate-joins.html</a></p>
</div>
<p><br>
<br></p>
<p>Here’s another tip on reordering columns:</p>
<p><br>
<br></p>
<div class="blackbox">
<div class="center">
<p><strong>How to relocate a column of a dataframe in R</strong></p>
</div>
<p>Notice that in the final line of the above code, I used the <code>relocate()</code> function to reorder a column. This is not necessary, but can help keep your dataframe more organized.</p>
<p>As an example, you could use the following code to move column A after column C in a dataframe:</p>
<p><code>df %&gt;% relocate(a, .after = c)</code></p>
<p>For more information on the <code>relocate()</code> function in <strong>dplyr</strong>, visit this link: <a href="https://dplyr.tidyverse.org/reference/relocate.html" class="uri">https://dplyr.tidyverse.org/reference/relocate.html</a></p>
</div>
<p><br>
<br></p>
<p>I used the following code to plot the average times by practice session in 2023.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="introduction-to-formula-1.html#cb19-1" aria-hidden="true" tabindex="-1"></a>practice_times_2023 <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="introduction-to-formula-1.html#cb19-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Time_secs_3, Time_secs_2, Time_secs_1) <span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="introduction-to-formula-1.html#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(Time_secs_3, Time_secs_2, Time_secs_1), <span class="at">names_to =</span> <span class="st">&#39;practice_session&#39;</span>, <span class="at">values_to =</span> <span class="st">&#39;time&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-4"><a href="introduction-to-formula-1.html#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">practice_session =</span> <span class="fu">str_remove</span>(practice_session, <span class="st">&#39;Time_secs_&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb19-5"><a href="introduction-to-formula-1.html#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(practice_session, time)) <span class="sc">+</span></span>
<span id="cb19-6"><a href="introduction-to-formula-1.html#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.y =</span> mean, </span>
<span id="cb19-7"><a href="introduction-to-formula-1.html#cb19-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">geom =</span> <span class="st">&quot;point&quot;</span>, <span class="at">pch =</span> <span class="dv">21</span>, <span class="at">col =</span> <span class="st">&#39;black&#39;</span>, <span class="at">fill =</span>  <span class="st">&#39;red&#39;</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span> </span>
<span id="cb19-8"><a href="introduction-to-formula-1.html#cb19-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb19-9"><a href="introduction-to-formula-1.html#cb19-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;Best Lap Time (secs)&#39;</span>,</span>
<span id="cb19-10"><a href="introduction-to-formula-1.html#cb19-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&#39;Practice Session&#39;</span>,</span>
<span id="cb19-11"><a href="introduction-to-formula-1.html#cb19-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Average Best Lap Time by Practice Session&#39;</span>,</span>
<span id="cb19-12"><a href="introduction-to-formula-1.html#cb19-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;All Grands Prix: 2023&#39;</span>) <span class="sc">+</span></span>
<span id="cb19-13"><a href="introduction-to-formula-1.html#cb19-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb19-14"><a href="introduction-to-formula-1.html#cb19-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-13-1.png" width="672" style="display: block; margin: auto;" /></p>
<p><br>
<br></p>
<div class="blackbox">
<div class="center">
<p><strong>How to create a categorical scatter plot with a computed mean in R</strong></p>
</div>
<p>If there are many observations per group, you can use the <code>stat_summary()</code> function to calculate a grouped mean of the variable plotted along the y-axis. Specifically, the argument <code>fun.y = mean</code> specifies that you want to calculate the mean of the y-axis variable. If you wish to <em>only</em> plot the mean, include the <code>geom = "point"</code> argument.</p>
<p>For more information on <code>stat_summary()</code> in <strong>ggplot2</strong>, visit this link: <a href="https://ggplot2.tidyverse.org/reference/stat_summary.html" class="uri">https://ggplot2.tidyverse.org/reference/stat_summary.html</a></p>
</div>
<p><br>
<br></p>
<p>When pooling all teams, drivers, and circuits together, it looks like the average time during P1 is slower than both P2 and P3. P3’s average time is slightly slower than P2. But, these times will obviously vary considerably by year, Grand Prix, team, and driver. How much variability surrounds the average times in the figure above? I’ll re-plot that data but also include a standard deviation bar that describes the mean ± 1 standard deviation (SD).</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="introduction-to-formula-1.html#cb20-1" aria-hidden="true" tabindex="-1"></a>practice_times_2023 <span class="sc">%&gt;%</span></span>
<span id="cb20-2"><a href="introduction-to-formula-1.html#cb20-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Time_secs_3, Time_secs_2, Time_secs_1) <span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href="introduction-to-formula-1.html#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(Time_secs_3, Time_secs_2, Time_secs_1), <span class="at">names_to =</span> <span class="st">&#39;practice_session&#39;</span>, <span class="at">values_to =</span> <span class="st">&#39;time&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb20-4"><a href="introduction-to-formula-1.html#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">practice_session =</span> <span class="fu">str_remove</span>(practice_session, <span class="st">&#39;Time_secs_&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb20-5"><a href="introduction-to-formula-1.html#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(practice_session, time)) <span class="sc">+</span></span>
<span id="cb20-6"><a href="introduction-to-formula-1.html#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.y =</span> mean,</span>
<span id="cb20-7"><a href="introduction-to-formula-1.html#cb20-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">fun.ymin =</span> <span class="cf">function</span>(x) <span class="fu">mean</span>(x) <span class="sc">-</span> <span class="fu">sd</span>(x), </span>
<span id="cb20-8"><a href="introduction-to-formula-1.html#cb20-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">fun.ymax =</span> <span class="cf">function</span>(x) <span class="fu">mean</span>(x) <span class="sc">+</span> <span class="fu">sd</span>(x), </span>
<span id="cb20-9"><a href="introduction-to-formula-1.html#cb20-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">geom =</span> <span class="st">&quot;pointrange&quot;</span>,</span>
<span id="cb20-10"><a href="introduction-to-formula-1.html#cb20-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">pch =</span> <span class="dv">21</span>, <span class="at">col =</span> <span class="st">&#39;black&#39;</span>, <span class="at">fill =</span>  <span class="st">&#39;red&#39;</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb20-11"><a href="introduction-to-formula-1.html#cb20-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb20-12"><a href="introduction-to-formula-1.html#cb20-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;Best Lap Time (secs)&#39;</span>,</span>
<span id="cb20-13"><a href="introduction-to-formula-1.html#cb20-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&#39;Practice Session&#39;</span>,</span>
<span id="cb20-14"><a href="introduction-to-formula-1.html#cb20-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Average Best Lap Time \u00b1 SD by Practice Session&#39;</span>,</span>
<span id="cb20-15"><a href="introduction-to-formula-1.html#cb20-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;All Grands Prix: 2023&#39;</span>) <span class="sc">+</span></span>
<span id="cb20-16"><a href="introduction-to-formula-1.html#cb20-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb20-17"><a href="introduction-to-formula-1.html#cb20-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-14-1.png" width="672" style="display: block; margin: auto;" /></p>
<p><br>
<br></p>
<div class="blackbox">
<div class="center">
<p><strong>How to create a categorical scatter plot with a computed mean ± standard deviation in R</strong></p>
</div>
<p>Again, you can use the <code>stat_summary()</code> function to calculate a grouped mean ± standard deviation of the variable plotted along the y-axis. To plot a computed <em>point-interval</em> or <em>point-range</em>, specify <code>geom = "pointrange"</code>. Additionally, you’ll need to include arguments for the calculated minimum and maximum of that range. In the example above, I plot the mean ± 1 standard deviation using the arguments <code>fun.ymin = function(x) mean(x) - sd(x)</code> and <code>fun.ymax = function(x) mean(x) + sd(x)</code>.</p>
<p>For more information on <code>stat_summary()</code> in <strong>ggplot2</strong>, visit this link: <a href="https://ggplot2.tidyverse.org/reference/stat_summary.html" class="uri">https://ggplot2.tidyverse.org/reference/stat_summary.html</a></p>
</div>
<p><br>
<br></p>
<p>Despite the differences in average times between practice sessions, the variability of times <em>within</em> each practice sessions far exceeds the differences <em>between</em> the sessions. This seems obvious. Circuits are very different, not to mention all of the other sources of variability including yearly, team, and differences by driver. Approximately 68% of the data will fall within 1 standard deviation of the mean. So, the entire distribution of practice times extends beyond the intervals in the figure above.</p>
<p>If we’d like to know how the entire distributions of times compare, we can include the individual times beneath the mean ± SD.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="introduction-to-formula-1.html#cb21-1" aria-hidden="true" tabindex="-1"></a>practice_times_2023 <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="introduction-to-formula-1.html#cb21-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Time_secs_3, Time_secs_2, Time_secs_1) <span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="introduction-to-formula-1.html#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(Time_secs_3, Time_secs_2, Time_secs_1), <span class="at">names_to =</span> <span class="st">&#39;practice_session&#39;</span>, <span class="at">values_to =</span> <span class="st">&#39;time&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-4"><a href="introduction-to-formula-1.html#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">practice_session =</span> <span class="fu">str_remove</span>(practice_session, <span class="st">&#39;Time_secs_&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb21-5"><a href="introduction-to-formula-1.html#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(practice_session, time)) <span class="sc">+</span></span>
<span id="cb21-6"><a href="introduction-to-formula-1.html#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">w=</span> <span class="fl">0.3</span>, <span class="at">h =</span> <span class="dv">0</span>), <span class="at">alpha =</span> <span class="fl">0.25</span>, <span class="at">col =</span> <span class="st">&#39;grey&#39;</span>) <span class="sc">+</span></span>
<span id="cb21-7"><a href="introduction-to-formula-1.html#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb21-8"><a href="introduction-to-formula-1.html#cb21-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.y =</span> mean,</span>
<span id="cb21-9"><a href="introduction-to-formula-1.html#cb21-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">fun.ymin =</span> <span class="cf">function</span>(x) <span class="fu">mean</span>(x) <span class="sc">-</span> <span class="fu">sd</span>(x), </span>
<span id="cb21-10"><a href="introduction-to-formula-1.html#cb21-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">fun.ymax =</span> <span class="cf">function</span>(x) <span class="fu">mean</span>(x) <span class="sc">+</span> <span class="fu">sd</span>(x), </span>
<span id="cb21-11"><a href="introduction-to-formula-1.html#cb21-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">geom =</span> <span class="st">&quot;pointrange&quot;</span>, </span>
<span id="cb21-12"><a href="introduction-to-formula-1.html#cb21-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">col =</span> <span class="st">&#39;red&#39;</span>, <span class="at">linewidth =</span> <span class="dv">2</span>, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb21-13"><a href="introduction-to-formula-1.html#cb21-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;Best Lap Time (secs)&#39;</span>,</span>
<span id="cb21-14"><a href="introduction-to-formula-1.html#cb21-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&#39;Practice Session&#39;</span>,</span>
<span id="cb21-15"><a href="introduction-to-formula-1.html#cb21-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Average Best Lap Time \u00b1 SD by Practice Session&#39;</span>,</span>
<span id="cb21-16"><a href="introduction-to-formula-1.html#cb21-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;includes each time for every Grand Prix: 2023&#39;</span>) <span class="sc">+</span></span>
<span id="cb21-17"><a href="introduction-to-formula-1.html#cb21-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb21-18"><a href="introduction-to-formula-1.html#cb21-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-15-1.png" width="672" style="display: block; margin: auto;" /></p>
<p><br>
<br></p>
<div class="blackbox">
<div class="center">
<p><strong>How to create a strip plot in R</strong></p>
</div>
<p>In a 2015 paper, Tracey Weissgerber proposed packing as much information as possible into a figure. One of her recommendations for plotting a continuous variable across groups is the <em>strip plot</em>.</p>
<p>Here is a link to Tracy’s fantastic paper: <a href="https://journals.plos.org/plosbiology/article?id=10.1371/journal.pbio.1002128" class="uri">https://journals.plos.org/plosbiology/article?id=10.1371/journal.pbio.1002128</a></p>
<p>To create a strip plot in <strong>ggplot</strong>, I simply use <code>geom_point()</code> and include the <code>position = position_jitter()</code> argument.</p>
<p>I’ll mention more about <code>geom_point()</code> shortly, but visit this link for more information on point geometries in <strong>ggplot2</strong>: <a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="uri">https://ggplot2.tidyverse.org/reference/geom_point.html</a></p>
<p>And, here’s a link to background information on <em>jittering</em>: <a href="https://ggplot2.tidyverse.org/reference/position_jitter.html" class="uri">https://ggplot2.tidyverse.org/reference/position_jitter.html</a></p>
</div>
<p><br>
<br></p>
<p>Much of this variability can actually be explained away. The largest source of variability among these times is caused by differences in circuits. For instance, lap times at the United States Grand Prix (Circuit of the Americas) are much longer than those at the Austrian Grand Prix. In the figure below, I plot the average P1 lap time for each Grand Prix. Clearly, lap times vary <em>considerably</em> by circuit!</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="introduction-to-formula-1.html#cb22-1" aria-hidden="true" tabindex="-1"></a>practice_times_2023 <span class="sc">%&gt;%</span></span>
<span id="cb22-2"><a href="introduction-to-formula-1.html#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Race) <span class="sc">%&gt;%</span></span>
<span id="cb22-3"><a href="introduction-to-formula-1.html#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(Time_secs_1, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span></span>
<span id="cb22-4"><a href="introduction-to-formula-1.html#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(mean, <span class="at">y =</span> <span class="fu">fct_reorder</span>(Race, mean))) <span class="sc">+</span></span>
<span id="cb22-5"><a href="introduction-to-formula-1.html#cb22-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb22-6"><a href="introduction-to-formula-1.html#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb22-7"><a href="introduction-to-formula-1.html#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Average Best Lap Time (secs)&#39;</span>,</span>
<span id="cb22-8"><a href="introduction-to-formula-1.html#cb22-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Grand Prix&#39;</span>,</span>
<span id="cb22-9"><a href="introduction-to-formula-1.html#cb22-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Average Best Lap Time&#39;</span>,</span>
<span id="cb22-10"><a href="introduction-to-formula-1.html#cb22-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;Practice 1 - All Grands Prix: 2023&#39;</span>) <span class="sc">+</span></span>
<span id="cb22-11"><a href="introduction-to-formula-1.html#cb22-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb22-12"><a href="introduction-to-formula-1.html#cb22-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-16-1.png" width="672" style="display: block; margin: auto;" /></p>
<p><br>
<br></p>
<div class="blackbox">
<div class="center">
<p><strong>How to create a categorical scatter plot in R</strong></p>
</div>
<p>I used the simple point geometry (<code>geom_point()</code>) in <strong>ggplot2</strong> to create the plot above. <code>geom_point()</code> is most commonly used to create scatterplots that display the relationship between two continuous variables. However, you can also use them to plot a continuous variables across groups.</p>
<p>For more information on point geometries in <strong>ggplot2</strong>, visit this link: <a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="uri">https://ggplot2.tidyverse.org/reference/geom_point.html</a></p>
</div>
<p><br>
<br></p>
<p>We can <em>pretty</em> this figure up a bit by adding alternating row shading. <strong>ggplot</strong> does not have a way to do this directly, so I will use the <code>geom_hline()</code> function to do this.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="introduction-to-formula-1.html#cb23-1" aria-hidden="true" tabindex="-1"></a>practice_times_2023 <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="introduction-to-formula-1.html#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Race) <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="introduction-to-formula-1.html#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(Time_secs_1, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span></span>
<span id="cb23-4"><a href="introduction-to-formula-1.html#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(mean, <span class="at">y =</span> <span class="fu">fct_reorder</span>(Race, mean))) <span class="sc">+</span></span>
<span id="cb23-5"><a href="introduction-to-formula-1.html#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="fu">c</span>(<span class="st">&#39;belgium&#39;</span>, <span class="st">&#39;azerbaijan&#39;</span>, <span class="st">&#39;united-states&#39;</span>, <span class="st">&#39;singapore&#39;</span>, <span class="st">&#39;miami&#39;</span>, <span class="st">&#39;great-britain&#39;</span>, <span class="st">&#39;abu-dhabi&#39;</span>, <span class="st">&#39;canada&#39;</span>, <span class="st">&#39;australia&#39;</span>, <span class="st">&#39;monaco&#39;</span>, <span class="st">&#39;brazil&#39;</span>), <span class="at">col =</span> <span class="st">&#39;grey&#39;</span>, <span class="at">size =</span> <span class="dv">5</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span> </span>
<span id="cb23-6"><a href="introduction-to-formula-1.html#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb23-7"><a href="introduction-to-formula-1.html#cb23-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb23-8"><a href="introduction-to-formula-1.html#cb23-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Average Best Lap Time (secs)&#39;</span>,</span>
<span id="cb23-9"><a href="introduction-to-formula-1.html#cb23-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Grand Prix&#39;</span>,</span>
<span id="cb23-10"><a href="introduction-to-formula-1.html#cb23-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Average Best Lap Time&#39;</span>,</span>
<span id="cb23-11"><a href="introduction-to-formula-1.html#cb23-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;Practice 1 - All Grands Prix: 2023&#39;</span>) <span class="sc">+</span></span>
<span id="cb23-12"><a href="introduction-to-formula-1.html#cb23-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb23-13"><a href="introduction-to-formula-1.html#cb23-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-17-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Building on this idea, let’s explore how variability for a <em>single</em> Grand Prix (<strong>Bahrain</strong>) compare to the variability across all Grands Prix. Below, I’ll calculate the standard deviation for Bahrian only and then all Grands Prix pooled together. Notice that the standard deviation for the Bahrain Grand Prix is about an order of magnitude smaller.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="introduction-to-formula-1.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># All Grands Prix</span></span>
<span id="cb24-2"><a href="introduction-to-formula-1.html#cb24-2" aria-hidden="true" tabindex="-1"></a>practice_times_2023 <span class="sc">%&gt;%</span></span>
<span id="cb24-3"><a href="introduction-to-formula-1.html#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(Time_secs_3, Time_secs_2, Time_secs_1), <span class="at">names_to =</span> <span class="st">&#39;practice_session&#39;</span>, <span class="at">values_to =</span> <span class="st">&#39;time&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-4"><a href="introduction-to-formula-1.html#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">practice_session =</span> <span class="fu">str_remove</span>(practice_session, <span class="st">&#39;Time_secs_&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb24-5"><a href="introduction-to-formula-1.html#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(practice_session) <span class="sc">%&gt;%</span> </span>
<span id="cb24-6"><a href="introduction-to-formula-1.html#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">sd =</span> <span class="fu">round</span>(<span class="fu">sd</span>(time, <span class="at">na.rm =</span> T), <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb24-7"><a href="introduction-to-formula-1.html#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb24-8"><a href="introduction-to-formula-1.html#cb24-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(<span class="at">column_labels.font.weight =</span> <span class="st">&quot;bold&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-9"><a href="introduction-to-formula-1.html#cb24-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb24-10"><a href="introduction-to-formula-1.html#cb24-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">align =</span> <span class="st">&quot;center&quot;</span>),</span>
<span id="cb24-11"><a href="introduction-to-formula-1.html#cb24-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>(<span class="at">columns =</span> <span class="fu">c</span>(practice_session, sd))) <span class="sc">%&gt;%</span></span>
<span id="cb24-12"><a href="introduction-to-formula-1.html#cb24-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(<span class="at">align =</span> <span class="st">&quot;center&quot;</span>, <span class="at">columns =</span> <span class="fu">c</span>(practice_session, sd)) <span class="sc">%&gt;%</span> </span>
<span id="cb24-13"><a href="introduction-to-formula-1.html#cb24-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb24-14"><a href="introduction-to-formula-1.html#cb24-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">md</span>(<span class="st">&quot;**data from all Grands Prix**&quot;</span>),</span>
<span id="cb24-15"><a href="introduction-to-formula-1.html#cb24-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="fu">md</span>(<span class="st">&quot;2023&quot;</span>)</span>
<span id="cb24-16"><a href="introduction-to-formula-1.html#cb24-16" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<div id="fibxyizacv" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#fibxyizacv table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#fibxyizacv thead, #fibxyizacv tbody, #fibxyizacv tfoot, #fibxyizacv tr, #fibxyizacv td, #fibxyizacv th {
  border-style: none;
}

#fibxyizacv p {
  margin: 0;
  padding: 0;
}

#fibxyizacv .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#fibxyizacv .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#fibxyizacv .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#fibxyizacv .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#fibxyizacv .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fibxyizacv .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fibxyizacv .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fibxyizacv .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#fibxyizacv .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#fibxyizacv .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#fibxyizacv .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#fibxyizacv .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#fibxyizacv .gt_spanner_row {
  border-bottom-style: hidden;
}

#fibxyizacv .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#fibxyizacv .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#fibxyizacv .gt_from_md > :first-child {
  margin-top: 0;
}

#fibxyizacv .gt_from_md > :last-child {
  margin-bottom: 0;
}

#fibxyizacv .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#fibxyizacv .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#fibxyizacv .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#fibxyizacv .gt_row_group_first td {
  border-top-width: 2px;
}

#fibxyizacv .gt_row_group_first th {
  border-top-width: 2px;
}

#fibxyizacv .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fibxyizacv .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#fibxyizacv .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#fibxyizacv .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fibxyizacv .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fibxyizacv .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#fibxyizacv .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#fibxyizacv .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#fibxyizacv .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fibxyizacv .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fibxyizacv .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#fibxyizacv .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fibxyizacv .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#fibxyizacv .gt_left {
  text-align: left;
}

#fibxyizacv .gt_center {
  text-align: center;
}

#fibxyizacv .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#fibxyizacv .gt_font_normal {
  font-weight: normal;
}

#fibxyizacv .gt_font_bold {
  font-weight: bold;
}

#fibxyizacv .gt_font_italic {
  font-style: italic;
}

#fibxyizacv .gt_super {
  font-size: 65%;
}

#fibxyizacv .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#fibxyizacv .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#fibxyizacv .gt_indent_1 {
  text-indent: 5px;
}

#fibxyizacv .gt_indent_2 {
  text-indent: 10px;
}

#fibxyizacv .gt_indent_3 {
  text-indent: 15px;
}

#fibxyizacv .gt_indent_4 {
  text-indent: 20px;
}

#fibxyizacv .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_heading">
      <td colspan="2" class="gt_heading gt_title gt_font_normal" style><strong>data from all Grands Prix</strong></td>
    </tr>
    <tr class="gt_heading">
      <td colspan="2" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>2023</td>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="practice_session">practice_session</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="sd">sd</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="practice_session" class="gt_row gt_center" style="text-align: center;">1</td>
<td headers="sd" class="gt_row gt_center" style="text-align: center;">13.28</td></tr>
    <tr><td headers="practice_session" class="gt_row gt_center" style="text-align: center;">2</td>
<td headers="sd" class="gt_row gt_center" style="text-align: center;">7.84</td></tr>
    <tr><td headers="practice_session" class="gt_row gt_center" style="text-align: center;">3</td>
<td headers="sd" class="gt_row gt_center" style="text-align: center;">11.99</td></tr>
  </tbody>
  
  
</table>
</div>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="introduction-to-formula-1.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Bahrain Only</span></span>
<span id="cb25-2"><a href="introduction-to-formula-1.html#cb25-2" aria-hidden="true" tabindex="-1"></a>practice_times_2023 <span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="introduction-to-formula-1.html#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Race <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;bahrain&#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb25-4"><a href="introduction-to-formula-1.html#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(Time_secs_3, Time_secs_2, Time_secs_1), <span class="at">names_to =</span> <span class="st">&#39;practice_session&#39;</span>, <span class="at">values_to =</span> <span class="st">&#39;time&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-5"><a href="introduction-to-formula-1.html#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">practice_session =</span> <span class="fu">str_remove</span>(practice_session, <span class="st">&#39;Time_secs_&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb25-6"><a href="introduction-to-formula-1.html#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(practice_session) <span class="sc">%&gt;%</span> </span>
<span id="cb25-7"><a href="introduction-to-formula-1.html#cb25-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">sd =</span> <span class="fu">round</span>(<span class="fu">sd</span>(time, <span class="at">na.rm =</span> T), <span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb25-8"><a href="introduction-to-formula-1.html#cb25-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb25-9"><a href="introduction-to-formula-1.html#cb25-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(<span class="at">column_labels.font.weight =</span> <span class="st">&quot;bold&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-10"><a href="introduction-to-formula-1.html#cb25-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb25-11"><a href="introduction-to-formula-1.html#cb25-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">align =</span> <span class="st">&quot;center&quot;</span>),</span>
<span id="cb25-12"><a href="introduction-to-formula-1.html#cb25-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>(<span class="at">columns =</span> <span class="fu">c</span>(practice_session, sd))) <span class="sc">%&gt;%</span></span>
<span id="cb25-13"><a href="introduction-to-formula-1.html#cb25-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(<span class="at">align =</span> <span class="st">&quot;center&quot;</span>, <span class="at">columns =</span> <span class="fu">c</span>(practice_session, sd)) <span class="sc">%&gt;%</span> </span>
<span id="cb25-14"><a href="introduction-to-formula-1.html#cb25-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb25-15"><a href="introduction-to-formula-1.html#cb25-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">md</span>(<span class="st">&quot;**data from the Bahrain Grand Prix only**&quot;</span>),</span>
<span id="cb25-16"><a href="introduction-to-formula-1.html#cb25-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="fu">md</span>(<span class="st">&quot;2023&quot;</span>)</span>
<span id="cb25-17"><a href="introduction-to-formula-1.html#cb25-17" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<div id="mhilcynlvi" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#mhilcynlvi table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#mhilcynlvi thead, #mhilcynlvi tbody, #mhilcynlvi tfoot, #mhilcynlvi tr, #mhilcynlvi td, #mhilcynlvi th {
  border-style: none;
}

#mhilcynlvi p {
  margin: 0;
  padding: 0;
}

#mhilcynlvi .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#mhilcynlvi .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#mhilcynlvi .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#mhilcynlvi .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#mhilcynlvi .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mhilcynlvi .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mhilcynlvi .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mhilcynlvi .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#mhilcynlvi .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#mhilcynlvi .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#mhilcynlvi .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#mhilcynlvi .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#mhilcynlvi .gt_spanner_row {
  border-bottom-style: hidden;
}

#mhilcynlvi .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#mhilcynlvi .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#mhilcynlvi .gt_from_md > :first-child {
  margin-top: 0;
}

#mhilcynlvi .gt_from_md > :last-child {
  margin-bottom: 0;
}

#mhilcynlvi .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#mhilcynlvi .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#mhilcynlvi .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#mhilcynlvi .gt_row_group_first td {
  border-top-width: 2px;
}

#mhilcynlvi .gt_row_group_first th {
  border-top-width: 2px;
}

#mhilcynlvi .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mhilcynlvi .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#mhilcynlvi .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#mhilcynlvi .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mhilcynlvi .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mhilcynlvi .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#mhilcynlvi .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#mhilcynlvi .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#mhilcynlvi .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mhilcynlvi .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mhilcynlvi .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mhilcynlvi .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mhilcynlvi .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#mhilcynlvi .gt_left {
  text-align: left;
}

#mhilcynlvi .gt_center {
  text-align: center;
}

#mhilcynlvi .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#mhilcynlvi .gt_font_normal {
  font-weight: normal;
}

#mhilcynlvi .gt_font_bold {
  font-weight: bold;
}

#mhilcynlvi .gt_font_italic {
  font-style: italic;
}

#mhilcynlvi .gt_super {
  font-size: 65%;
}

#mhilcynlvi .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#mhilcynlvi .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#mhilcynlvi .gt_indent_1 {
  text-indent: 5px;
}

#mhilcynlvi .gt_indent_2 {
  text-indent: 10px;
}

#mhilcynlvi .gt_indent_3 {
  text-indent: 15px;
}

#mhilcynlvi .gt_indent_4 {
  text-indent: 20px;
}

#mhilcynlvi .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_heading">
      <td colspan="2" class="gt_heading gt_title gt_font_normal" style><strong>data from the Bahrain Grand Prix only</strong></td>
    </tr>
    <tr class="gt_heading">
      <td colspan="2" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>2023</td>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="practice_session">practice_session</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="sd">sd</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="practice_session" class="gt_row gt_center" style="text-align: center;">1</td>
<td headers="sd" class="gt_row gt_center" style="text-align: center;">0.89</td></tr>
    <tr><td headers="practice_session" class="gt_row gt_center" style="text-align: center;">2</td>
<td headers="sd" class="gt_row gt_center" style="text-align: center;">0.53</td></tr>
    <tr><td headers="practice_session" class="gt_row gt_center" style="text-align: center;">3</td>
<td headers="sd" class="gt_row gt_center" style="text-align: center;">0.50</td></tr>
  </tbody>
  
  
</table>
</div>
<p><br>
<br></p>
<div class="blackbox">
<div class="center">
<p><strong>How to add a header to a table in R</strong></p>
</div>
<p>It is very easy to add a header to the tables above. To add a title and/or subtitle, simply pass the <code>title</code> and <code>subtitle</code> arguments to the <code>tab_header()</code> function. The table header is positioned just above the column labels in the <strong>gt</strong> table.</p>
<p>To <strong>bold</strong> or <em>italicize</em> the title or subtitle in the header, <strong>gt</strong> actually allows the flexibility to use Markdown or HTML formatting. To use Markdown or HTML formatting, wrap your <code>title</code> and/or <code>subtitle</code> text in <code>md()</code> or <code>html()</code> functions, respectively.</p>
<p>For more information, visit this link: <a href="https://gt.rstudio.com/reference/tab_header.html" class="uri">https://gt.rstudio.com/reference/tab_header.html</a></p>
</div>
<p><br>
<br></p>
<p>We should keep this in mind as we continue exploring the data. Below, I’ll plot the average practice times for the Bahrain Grand Prix, along with all of the underlying times (grey points).</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="introduction-to-formula-1.html#cb26-1" aria-hidden="true" tabindex="-1"></a>practice_times <span class="sc">%&gt;%</span></span>
<span id="cb26-2"><a href="introduction-to-formula-1.html#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Race <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;bahrain&#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb26-3"><a href="introduction-to-formula-1.html#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(Time_secs_3, Time_secs_2, Time_secs_1), <span class="at">names_to =</span> <span class="st">&#39;practice_session&#39;</span>, <span class="at">values_to =</span> <span class="st">&#39;time&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb26-4"><a href="introduction-to-formula-1.html#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">practice_session =</span> <span class="fu">str_remove</span>(practice_session, <span class="st">&#39;Time_secs_&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb26-5"><a href="introduction-to-formula-1.html#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(practice_session, time)) <span class="sc">+</span></span>
<span id="cb26-6"><a href="introduction-to-formula-1.html#cb26-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">w=</span> <span class="fl">0.3</span>, <span class="at">h =</span> <span class="dv">0</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">col =</span> <span class="st">&#39;grey&#39;</span>) <span class="sc">+</span></span>
<span id="cb26-7"><a href="introduction-to-formula-1.html#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb26-8"><a href="introduction-to-formula-1.html#cb26-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.y =</span> mean,</span>
<span id="cb26-9"><a href="introduction-to-formula-1.html#cb26-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">fun.ymin =</span> <span class="cf">function</span>(x) <span class="fu">mean</span>(x) <span class="sc">-</span> <span class="fu">sd</span>(x), </span>
<span id="cb26-10"><a href="introduction-to-formula-1.html#cb26-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">fun.ymax =</span> <span class="cf">function</span>(x) <span class="fu">mean</span>(x) <span class="sc">+</span> <span class="fu">sd</span>(x), </span>
<span id="cb26-11"><a href="introduction-to-formula-1.html#cb26-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">geom =</span> <span class="st">&quot;pointrange&quot;</span>, </span>
<span id="cb26-12"><a href="introduction-to-formula-1.html#cb26-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">col =</span> <span class="st">&#39;red&#39;</span>, <span class="at">linewidth =</span> <span class="dv">2</span>, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb26-13"><a href="introduction-to-formula-1.html#cb26-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;Best Lap Time (secs)&#39;</span>,</span>
<span id="cb26-14"><a href="introduction-to-formula-1.html#cb26-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&#39;Practice Session&#39;</span>,</span>
<span id="cb26-15"><a href="introduction-to-formula-1.html#cb26-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Average Best Lap Time \u00b1 SD by Practice Session&#39;</span>,</span>
<span id="cb26-16"><a href="introduction-to-formula-1.html#cb26-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;includes each time for the Bahrain Grand Prix: 2014 - 2023&#39;</span>) <span class="sc">+</span></span>
<span id="cb26-17"><a href="introduction-to-formula-1.html#cb26-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb26-18"><a href="introduction-to-formula-1.html#cb26-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-19-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Judging by this figure, P1 times appear to be slower than times during P2 and P3 in Bahrain. And while the average for P2 is slightly faster than P3, the <em>fastest</em> single lap times were set during P3. Interesting.
Let’s dig depper into the Bahrain data! If we plot practice times by year, but group the times by practice session, we can see that times steadily improve each year until 2021, at which point they begin to get a bit slower.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="introduction-to-formula-1.html#cb27-1" aria-hidden="true" tabindex="-1"></a>practice_times <span class="sc">%&gt;%</span></span>
<span id="cb27-2"><a href="introduction-to-formula-1.html#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Race <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;bahrain&#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb27-3"><a href="introduction-to-formula-1.html#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(Time_secs_3, Time_secs_2, Time_secs_1), <span class="at">names_to =</span> <span class="st">&#39;practice_session&#39;</span>, <span class="at">values_to =</span> <span class="st">&#39;time&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-4"><a href="introduction-to-formula-1.html#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">practice_session =</span> <span class="fu">str_remove</span>(practice_session, <span class="st">&#39;Time_secs_&#39;</span>),</span>
<span id="cb27-5"><a href="introduction-to-formula-1.html#cb27-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">Year =</span> <span class="fu">factor</span>(Year)) <span class="sc">%&gt;%</span></span>
<span id="cb27-6"><a href="introduction-to-formula-1.html#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(Year, time, </span>
<span id="cb27-7"><a href="introduction-to-formula-1.html#cb27-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">group =</span> practice_session, <span class="at">col =</span> practice_session)) <span class="sc">+</span></span>
<span id="cb27-8"><a href="introduction-to-formula-1.html#cb27-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb27-9"><a href="introduction-to-formula-1.html#cb27-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.y =</span> mean,</span>
<span id="cb27-10"><a href="introduction-to-formula-1.html#cb27-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">fun.ymin =</span> <span class="cf">function</span>(x) <span class="fu">mean</span>(x) <span class="sc">-</span> <span class="fu">sd</span>(x), </span>
<span id="cb27-11"><a href="introduction-to-formula-1.html#cb27-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">fun.ymax =</span> <span class="cf">function</span>(x) <span class="fu">mean</span>(x) <span class="sc">+</span> <span class="fu">sd</span>(x), </span>
<span id="cb27-12"><a href="introduction-to-formula-1.html#cb27-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">geom =</span> <span class="st">&quot;pointrange&quot;</span>, </span>
<span id="cb27-13"><a href="introduction-to-formula-1.html#cb27-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">linewidth =</span> <span class="dv">1</span>, <span class="at">size =</span> <span class="fl">0.5</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>,</span>
<span id="cb27-14"><a href="introduction-to-formula-1.html#cb27-14" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">w =</span> <span class="fl">0.25</span>)) <span class="sc">+</span></span>
<span id="cb27-15"><a href="introduction-to-formula-1.html#cb27-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.y =</span> mean,</span>
<span id="cb27-16"><a href="introduction-to-formula-1.html#cb27-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">geom =</span> <span class="st">&quot;line&quot;</span>, </span>
<span id="cb27-17"><a href="introduction-to-formula-1.html#cb27-17" aria-hidden="true" tabindex="-1"></a>               <span class="at">linewidth =</span> <span class="dv">1</span>, <span class="at">size =</span> <span class="fl">0.5</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>,</span>
<span id="cb27-18"><a href="introduction-to-formula-1.html#cb27-18" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">w =</span> <span class="fl">0.25</span>)) <span class="sc">+</span></span>
<span id="cb27-19"><a href="introduction-to-formula-1.html#cb27-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Year&#39;</span>,</span>
<span id="cb27-20"><a href="introduction-to-formula-1.html#cb27-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Best Lap Time (secs)&#39;</span>,</span>
<span id="cb27-21"><a href="introduction-to-formula-1.html#cb27-21" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="st">&#39;Practice Session&#39;</span>,</span>
<span id="cb27-22"><a href="introduction-to-formula-1.html#cb27-22" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Average Best Lap Time \u00b1 SD by Year and Practice Session&#39;</span>,</span>
<span id="cb27-23"><a href="introduction-to-formula-1.html#cb27-23" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;Bahrain Grand Prix: 2014 - 2023&#39;</span>) <span class="sc">+</span></span>
<span id="cb27-24"><a href="introduction-to-formula-1.html#cb27-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb27-25"><a href="introduction-to-formula-1.html#cb27-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-20-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Pretty cool!</p>
<p><br>
<br></p>
<div class="blackbox">
<div class="center">
<p><strong>How to create a line plot with a computed mean ± standard deviation in R</strong></p>
</div>
<p>Like the previous examples with points and point-ranges, you can also use the <code>stat_summary()</code> function to create a line plot using grouped means ± standard deviation. Simply pass <code>geom = "line"</code> as an argument to the <code>stat_summary()</code> function. In the figure above, I wanted to plot grouped lines, so I also passed <code>group = practice_session</code> and <code>col = practice_session</code> as arguments to the original <code>ggplot()</code> call.</p>
<p>In addition to these summary lines, I also included the point-ranges using the same approach as previous figures (i.e. a separate <code>stat_summary()</code> call using the <code>geom = "pointrange"</code> argument.).</p>
<p>For more information on <code>stat_summary()</code> in <strong>ggplot2</strong>, visit this link: <a href="https://ggplot2.tidyverse.org/reference/stat_summary.html" class="uri">https://ggplot2.tidyverse.org/reference/stat_summary.html</a></p>
</div>
<p><br>
<br></p>
<p>Let’s expand a bit, and look at a few more circuits. Knowing that times vary by Grand Prix and year, let’s take a deeper look at differences in times within a single year (2022) and for one continent (North America). Below, I’ll plot the average practice times across North American Grands Prix for 2022 only.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="introduction-to-formula-1.html#cb28-1" aria-hidden="true" tabindex="-1"></a>practice_times <span class="sc">%&gt;%</span></span>
<span id="cb28-2"><a href="introduction-to-formula-1.html#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year <span class="sc">==</span> <span class="dv">2022</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb28-3"><a href="introduction-to-formula-1.html#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(Time_secs_3, Time_secs_2, Time_secs_1), <span class="at">names_to =</span> <span class="st">&#39;practice_session&#39;</span>, <span class="at">values_to =</span> <span class="st">&#39;time&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-4"><a href="introduction-to-formula-1.html#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">practice_session =</span> <span class="fu">str_remove</span>(practice_session, <span class="st">&#39;Time_secs_&#39;</span>),</span>
<span id="cb28-5"><a href="introduction-to-formula-1.html#cb28-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">Year =</span> <span class="fu">factor</span>(Year)) <span class="sc">%&gt;%</span></span>
<span id="cb28-6"><a href="introduction-to-formula-1.html#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Race <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;canada&#39;</span>, <span class="st">&#39;miami&#39;</span>, <span class="st">&#39;united-states&#39;</span>, <span class="st">&#39;mexico&#39;</span>, <span class="st">&#39;brazil&#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb28-7"><a href="introduction-to-formula-1.html#cb28-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(practice_session, time, </span>
<span id="cb28-8"><a href="introduction-to-formula-1.html#cb28-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">group =</span> Race, <span class="at">col =</span> Race)) <span class="sc">+</span></span>
<span id="cb28-9"><a href="introduction-to-formula-1.html#cb28-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb28-10"><a href="introduction-to-formula-1.html#cb28-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.y =</span> mean,</span>
<span id="cb28-11"><a href="introduction-to-formula-1.html#cb28-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">fun.ymin =</span> <span class="cf">function</span>(x) <span class="fu">mean</span>(x) <span class="sc">-</span> <span class="fu">sd</span>(x), </span>
<span id="cb28-12"><a href="introduction-to-formula-1.html#cb28-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">fun.ymax =</span> <span class="cf">function</span>(x) <span class="fu">mean</span>(x) <span class="sc">+</span> <span class="fu">sd</span>(x), </span>
<span id="cb28-13"><a href="introduction-to-formula-1.html#cb28-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">geom =</span> <span class="st">&quot;pointrange&quot;</span>, </span>
<span id="cb28-14"><a href="introduction-to-formula-1.html#cb28-14" aria-hidden="true" tabindex="-1"></a>               <span class="at">linewidth =</span> <span class="dv">1</span>, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb28-15"><a href="introduction-to-formula-1.html#cb28-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.y =</span> mean,</span>
<span id="cb28-16"><a href="introduction-to-formula-1.html#cb28-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">geom =</span> <span class="st">&quot;line&quot;</span>, </span>
<span id="cb28-17"><a href="introduction-to-formula-1.html#cb28-17" aria-hidden="true" tabindex="-1"></a>               <span class="at">linewidth =</span> <span class="dv">1</span>, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb28-18"><a href="introduction-to-formula-1.html#cb28-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;Best Lap Time (secs)&#39;</span>,</span>
<span id="cb28-19"><a href="introduction-to-formula-1.html#cb28-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&#39;Practice Session&#39;</span>,</span>
<span id="cb28-20"><a href="introduction-to-formula-1.html#cb28-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="st">&#39;Grand Prix&#39;</span>,</span>
<span id="cb28-21"><a href="introduction-to-formula-1.html#cb28-21" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Average Best Lap Time \u00b1 SD by Practice Session and Grand Prix&#39;</span>,</span>
<span id="cb28-22"><a href="introduction-to-formula-1.html#cb28-22" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;North America: 2022&#39;</span>) <span class="sc">+</span></span>
<span id="cb28-23"><a href="introduction-to-formula-1.html#cb28-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb28-24"><a href="introduction-to-formula-1.html#cb28-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb28-25"><a href="introduction-to-formula-1.html#cb28-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>(<span class="at">option =</span> <span class="st">&#39;plasma&#39;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-21-1.png" width="672" style="display: block; margin: auto;" /></p>
<p><br>
<br></p>
<div class="blackbox">
<div class="center">
<p><strong>How to use colorblind-friendly palettes in R</strong></p>
</div>
<p>As someone with color blindness, I find the use of colorblind-friendly palettes very helpful! I often rely on the <code>viridis</code> color scales for <strong>ggplot</strong>. The <code>viridis</code> scales provides various color mappings that are designed to be perceived by viewers with common forms of color blindness.</p>
<p>For a continuous color mapping, use <code>scale_color_viridis_c()</code>.</p>
<p>For a discrete color mapping, use <code>scale_color_viridis_d()</code>.</p>
<p>For more information about <code>viridis</code>, visit this link: <a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="uri">https://ggplot2.tidyverse.org/reference/scale_viridis.html</a></p>
<p>For more context about perceptually uniform color scales, see this link:
<a href="https://bids.github.io/colormap/" class="uri">https://bids.github.io/colormap/</a>.</p>
</div>
<p><br>
<br></p>
<p>Interestingly, there doesn’t seem to be a definitive pattern in practice times across these four North American races in 2022. Of note, some of these times are impacted by rain (i.e. Canada). Let’s compare this to four European races, where there is a fiarly clear decrease in times from P1 to P3.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="introduction-to-formula-1.html#cb29-1" aria-hidden="true" tabindex="-1"></a>practice_times <span class="sc">%&gt;%</span></span>
<span id="cb29-2"><a href="introduction-to-formula-1.html#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year <span class="sc">==</span> <span class="dv">2022</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb29-3"><a href="introduction-to-formula-1.html#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(Time_secs_3, Time_secs_2, Time_secs_1), <span class="at">names_to =</span> <span class="st">&#39;practice_session&#39;</span>, <span class="at">values_to =</span> <span class="st">&#39;time&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb29-4"><a href="introduction-to-formula-1.html#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">practice_session =</span> <span class="fu">str_remove</span>(practice_session, <span class="st">&#39;Time_secs_&#39;</span>),</span>
<span id="cb29-5"><a href="introduction-to-formula-1.html#cb29-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">Year =</span> <span class="fu">factor</span>(Year)) <span class="sc">%&gt;%</span></span>
<span id="cb29-6"><a href="introduction-to-formula-1.html#cb29-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Race <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;france&#39;</span>, <span class="st">&#39;monza&#39;</span>, <span class="st">&#39;great-britain&#39;</span>, <span class="st">&#39;netherlands&#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb29-7"><a href="introduction-to-formula-1.html#cb29-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(practice_session, time, </span>
<span id="cb29-8"><a href="introduction-to-formula-1.html#cb29-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">group =</span> Race, <span class="at">col =</span> Race)) <span class="sc">+</span></span>
<span id="cb29-9"><a href="introduction-to-formula-1.html#cb29-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb29-10"><a href="introduction-to-formula-1.html#cb29-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.y =</span> mean,</span>
<span id="cb29-11"><a href="introduction-to-formula-1.html#cb29-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">fun.ymin =</span> <span class="cf">function</span>(x) <span class="fu">mean</span>(x) <span class="sc">-</span> <span class="fu">sd</span>(x), </span>
<span id="cb29-12"><a href="introduction-to-formula-1.html#cb29-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">fun.ymax =</span> <span class="cf">function</span>(x) <span class="fu">mean</span>(x) <span class="sc">+</span> <span class="fu">sd</span>(x), </span>
<span id="cb29-13"><a href="introduction-to-formula-1.html#cb29-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">geom =</span> <span class="st">&quot;pointrange&quot;</span>, </span>
<span id="cb29-14"><a href="introduction-to-formula-1.html#cb29-14" aria-hidden="true" tabindex="-1"></a>               <span class="at">linewidth =</span> <span class="dv">1</span>, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb29-15"><a href="introduction-to-formula-1.html#cb29-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.y =</span> mean,</span>
<span id="cb29-16"><a href="introduction-to-formula-1.html#cb29-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">geom =</span> <span class="st">&quot;line&quot;</span>, </span>
<span id="cb29-17"><a href="introduction-to-formula-1.html#cb29-17" aria-hidden="true" tabindex="-1"></a>               <span class="at">linewidth =</span> <span class="dv">1</span>, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb29-18"><a href="introduction-to-formula-1.html#cb29-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;Best Lap Time (secs)&#39;</span>,</span>
<span id="cb29-19"><a href="introduction-to-formula-1.html#cb29-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&#39;Practice Session&#39;</span>,</span>
<span id="cb29-20"><a href="introduction-to-formula-1.html#cb29-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="st">&#39;Grand Prix&#39;</span>,</span>
<span id="cb29-21"><a href="introduction-to-formula-1.html#cb29-21" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Average Best Lap Time \u00b1 SD by Practice Session and Grand Prix&#39;</span>,</span>
<span id="cb29-22"><a href="introduction-to-formula-1.html#cb29-22" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;European Grands Prix: 2022&#39;</span>) <span class="sc">+</span></span>
<span id="cb29-23"><a href="introduction-to-formula-1.html#cb29-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb29-24"><a href="introduction-to-formula-1.html#cb29-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb29-25"><a href="introduction-to-formula-1.html#cb29-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>(<span class="at">option =</span> <span class="st">&#39;plasma&#39;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-22-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>In the next section, we will begin exploring practice data by <em>driver</em>.</p>
</div>
<div id="practice-times-by-driver" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> Practice Times by Driver<a href="introduction-to-formula-1.html#practice-times-by-driver" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Perhaps the most fun way to visualize data is to plot the times by driver. In the series of figures below, I plot <em>standardized</em> practice times for each driver. Each driver’s times are subtracted from the average session time for a given Grand Prix. For example, Lewis Hamilton’s best FP1 time at the 2014 Australian Grand Prix will be subtracted from the average best FP1 time for the grid. Hamilton was very quick in 2014, so naturally, his standardized times are much faster than the average over the entire year.</p>
<p>We will first focus on the 2014 season, which Mercedes dominated. The two Mercedes drivers, Lewis Hamilton and Nico Rosberg, are clearly much faster than all other drivers during P2 and P3. During this 2014 season, Australia happened to be the circuit where Mercedes had the largest standardized gap in P3.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="introduction-to-formula-1.html#cb30-1" aria-hidden="true" tabindex="-1"></a>practice_times <span class="sc">%&gt;%</span></span>
<span id="cb30-2"><a href="introduction-to-formula-1.html#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year <span class="sc">==</span> <span class="dv">2014</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb30-3"><a href="introduction-to-formula-1.html#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(Time_secs_3, Time_secs_2, Time_secs_1), <span class="at">names_to =</span> <span class="st">&#39;practice_session&#39;</span>, <span class="at">values_to =</span> <span class="st">&#39;time&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-4"><a href="introduction-to-formula-1.html#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">practice_session =</span> <span class="fu">str_remove</span>(practice_session, <span class="st">&#39;Time_secs_&#39;</span>),</span>
<span id="cb30-5"><a href="introduction-to-formula-1.html#cb30-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">Year =</span> <span class="fu">factor</span>(Year)) <span class="sc">%&gt;%</span></span>
<span id="cb30-6"><a href="introduction-to-formula-1.html#cb30-6" aria-hidden="true" tabindex="-1"></a>   <span class="fu">group_by</span>(Race, practice_session) <span class="sc">%&gt;%</span></span>
<span id="cb30-7"><a href="introduction-to-formula-1.html#cb30-7" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">track_mean =</span> <span class="fu">mean</span>(time, <span class="at">na.rm =</span> T),</span>
<span id="cb30-8"><a href="introduction-to-formula-1.html#cb30-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">Time_std_track =</span> time <span class="sc">-</span> track_mean) <span class="sc">%&gt;%</span> </span>
<span id="cb30-9"><a href="introduction-to-formula-1.html#cb30-9" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb30-10"><a href="introduction-to-formula-1.html#cb30-10" aria-hidden="true" tabindex="-1"></a>   <span class="fu">group_by</span>(Driver) <span class="sc">%&gt;%</span> </span>
<span id="cb30-11"><a href="introduction-to-formula-1.html#cb30-11" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">driver_n =</span> <span class="fu">n</span>(),</span>
<span id="cb30-12"><a href="introduction-to-formula-1.html#cb30-12" aria-hidden="true" tabindex="-1"></a>          <span class="at">mean =</span> <span class="fu">mean</span>(Time_std_track, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span></span>
<span id="cb30-13"><a href="introduction-to-formula-1.html#cb30-13" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb30-14"><a href="introduction-to-formula-1.html#cb30-14" aria-hidden="true" tabindex="-1"></a>   dplyr<span class="sc">::</span><span class="fu">filter</span>(driver_n <span class="sc">&gt;</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb30-15"><a href="introduction-to-formula-1.html#cb30-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">practice_session =</span> <span class="fu">paste0</span>(<span class="st">&#39;free practice &#39;</span>, practice_session)) <span class="sc">%&gt;%</span>  </span>
<span id="cb30-16"><a href="introduction-to-formula-1.html#cb30-16" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ggplot</span>(<span class="fu">aes</span>(Time_std_track, <span class="at">y =</span> <span class="fu">fct_reorder</span>(Driver, <span class="fu">desc</span>(mean)))) <span class="sc">+</span></span>
<span id="cb30-17"><a href="introduction-to-formula-1.html#cb30-17" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">w =</span> <span class="dv">0</span>, <span class="at">h =</span> <span class="fl">0.1</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb30-18"><a href="introduction-to-formula-1.html#cb30-18" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb30-19"><a href="introduction-to-formula-1.html#cb30-19" aria-hidden="true" tabindex="-1"></a>   <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Standardized Practice Time (secs)&#39;</span>,</span>
<span id="cb30-20"><a href="introduction-to-formula-1.html#cb30-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">&#39;Driver&#39;</span>,</span>
<span id="cb30-21"><a href="introduction-to-formula-1.html#cb30-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&#39;Standardized Practice Time&#39;</span>,</span>
<span id="cb30-22"><a href="introduction-to-formula-1.html#cb30-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&#39;2014&#39;</span>,</span>
<span id="cb30-23"><a href="introduction-to-formula-1.html#cb30-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">caption =</span> <span class="st">&#39;*Times are subtracted from the average time for each Grand Prix&#39;</span>) <span class="sc">+</span></span>
<span id="cb30-24"><a href="introduction-to-formula-1.html#cb30-24" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">col =</span> <span class="st">&#39;red&#39;</span>) <span class="sc">+</span></span>
<span id="cb30-25"><a href="introduction-to-formula-1.html#cb30-25" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb30-26"><a href="introduction-to-formula-1.html#cb30-26" aria-hidden="true" tabindex="-1"></a>         <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb30-27"><a href="introduction-to-formula-1.html#cb30-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb30-28"><a href="introduction-to-formula-1.html#cb30-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> practice_session) <span class="sc">+</span></span>
<span id="cb30-29"><a href="introduction-to-formula-1.html#cb30-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb30-30"><a href="introduction-to-formula-1.html#cb30-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="fu">seq</span>(<span class="dv">22</span>, <span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>), <span class="at">col =</span> <span class="st">&#39;grey&#39;</span>, <span class="at">size =</span> <span class="dv">5</span>, <span class="at">alpha =</span>  <span class="fl">0.2</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-23-1.png" width="768" style="display: block; margin: auto;" /></p>
<p><br>
<br></p>
<div class="blackbox">
<div class="center">
<p><strong>Jittering data points in R</strong></p>
</div>
<p>I’ll often use <em>jittering</em> to slightly separate data points that would otherwise be plotted on top of each other. Interestingly (and counterintuitively!), using a <em>jitter</em> argument in <strong>ggplot</strong> to add small amounts of random noise to a plot can actually make the plot easier to interpret.</p>
<p>To add <em>jittering</em> to a plot, simply pass <code>position = position_jitter()</code> as an argument inside <code>geom_point()</code>. In the example above, I specify that I wish to add a small degree of <em>jittering</em> vertically and <strong>no</strong> <em>jittering</em> horizontally using <code>position = position_jitter(w = 0, h = 0.1)</code>.</p>
<p><a href="https://ggplot2.tidyverse.org/reference/position_jitter.html" class="uri">https://ggplot2.tidyverse.org/reference/position_jitter.html</a></p>
</div>
<p><br>
<br></p>
<p>Hamilton and Rosberg again dominated practice sessions 2 and 3 during the 2015 season. During 2015, Malaysia happened to be a particularly strong circuit for Mercedes.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="introduction-to-formula-1.html#cb31-1" aria-hidden="true" tabindex="-1"></a>practice_times <span class="sc">%&gt;%</span></span>
<span id="cb31-2"><a href="introduction-to-formula-1.html#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year <span class="sc">==</span> <span class="dv">2015</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb31-3"><a href="introduction-to-formula-1.html#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(Time_secs_3, Time_secs_2, Time_secs_1), <span class="at">names_to =</span> <span class="st">&#39;practice_session&#39;</span>, <span class="at">values_to =</span> <span class="st">&#39;time&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-4"><a href="introduction-to-formula-1.html#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">practice_session =</span> <span class="fu">str_remove</span>(practice_session, <span class="st">&#39;Time_secs_&#39;</span>),</span>
<span id="cb31-5"><a href="introduction-to-formula-1.html#cb31-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">Year =</span> <span class="fu">factor</span>(Year)) <span class="sc">%&gt;%</span></span>
<span id="cb31-6"><a href="introduction-to-formula-1.html#cb31-6" aria-hidden="true" tabindex="-1"></a>   <span class="fu">group_by</span>(Race, practice_session) <span class="sc">%&gt;%</span></span>
<span id="cb31-7"><a href="introduction-to-formula-1.html#cb31-7" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">track_mean =</span> <span class="fu">mean</span>(time, <span class="at">na.rm =</span> T),</span>
<span id="cb31-8"><a href="introduction-to-formula-1.html#cb31-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">Time_std_track =</span> time <span class="sc">-</span> track_mean) <span class="sc">%&gt;%</span> </span>
<span id="cb31-9"><a href="introduction-to-formula-1.html#cb31-9" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb31-10"><a href="introduction-to-formula-1.html#cb31-10" aria-hidden="true" tabindex="-1"></a>   <span class="fu">group_by</span>(Driver) <span class="sc">%&gt;%</span> </span>
<span id="cb31-11"><a href="introduction-to-formula-1.html#cb31-11" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">driver_n =</span> <span class="fu">n</span>(),</span>
<span id="cb31-12"><a href="introduction-to-formula-1.html#cb31-12" aria-hidden="true" tabindex="-1"></a>          <span class="at">mean =</span> <span class="fu">mean</span>(Time_std_track, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span></span>
<span id="cb31-13"><a href="introduction-to-formula-1.html#cb31-13" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb31-14"><a href="introduction-to-formula-1.html#cb31-14" aria-hidden="true" tabindex="-1"></a>   dplyr<span class="sc">::</span><span class="fu">filter</span>(driver_n <span class="sc">&gt;</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb31-15"><a href="introduction-to-formula-1.html#cb31-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">practice_session =</span> <span class="fu">paste0</span>(<span class="st">&#39;free practice &#39;</span>, practice_session)) <span class="sc">%&gt;%</span>  </span>
<span id="cb31-16"><a href="introduction-to-formula-1.html#cb31-16" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ggplot</span>(<span class="fu">aes</span>(Time_std_track, <span class="at">y =</span> <span class="fu">fct_reorder</span>(Driver, <span class="fu">desc</span>(mean)))) <span class="sc">+</span></span>
<span id="cb31-17"><a href="introduction-to-formula-1.html#cb31-17" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">w =</span> <span class="dv">0</span>, <span class="at">h =</span> <span class="fl">0.1</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb31-18"><a href="introduction-to-formula-1.html#cb31-18" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb31-19"><a href="introduction-to-formula-1.html#cb31-19" aria-hidden="true" tabindex="-1"></a>   <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Standardized Practice Time (secs)&#39;</span>,</span>
<span id="cb31-20"><a href="introduction-to-formula-1.html#cb31-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">&#39;Driver&#39;</span>,</span>
<span id="cb31-21"><a href="introduction-to-formula-1.html#cb31-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&#39;Standardized Practice Time&#39;</span>,</span>
<span id="cb31-22"><a href="introduction-to-formula-1.html#cb31-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&#39;2015&#39;</span>,</span>
<span id="cb31-23"><a href="introduction-to-formula-1.html#cb31-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">caption =</span> <span class="st">&#39;*Times are subtracted from the average time for each Grand Prix&#39;</span>) <span class="sc">+</span></span>
<span id="cb31-24"><a href="introduction-to-formula-1.html#cb31-24" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">col =</span> <span class="st">&#39;red&#39;</span>) <span class="sc">+</span></span>
<span id="cb31-25"><a href="introduction-to-formula-1.html#cb31-25" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb31-26"><a href="introduction-to-formula-1.html#cb31-26" aria-hidden="true" tabindex="-1"></a>         <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb31-27"><a href="introduction-to-formula-1.html#cb31-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb31-28"><a href="introduction-to-formula-1.html#cb31-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> practice_session) <span class="sc">+</span></span>
<span id="cb31-29"><a href="introduction-to-formula-1.html#cb31-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb31-30"><a href="introduction-to-formula-1.html#cb31-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="fu">seq</span>(<span class="dv">22</span>, <span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>), <span class="at">col =</span> <span class="st">&#39;grey&#39;</span>, <span class="at">size =</span> <span class="dv">5</span>, <span class="at">alpha =</span>  <span class="fl">0.2</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-24-1.png" width="768" style="display: block; margin: auto;" /></p>
<p><br>
<br></p>
<div class="blackbox">
<div class="center">
<p><strong>Adding a reference line in R</strong></p>
</div>
<p>In the plot above, the solid red vertical line serves a reference line for a standardized time of 0 (i.e. the average time at a Grand Prix). Sometimes, it’s helpful to add a reference line to a figure. Within <strong>ggplot2</strong>, there are three common geometries that are used to add references lines to a plot:</p>
<ul>
<li><code>geom_hline()</code> adds a horizontal reference line. Specify the <code>yintercept</code>.</li>
<li><code>geom_vline()</code> adds a vertical reference line. Specify the <code>xintercept</code>.</li>
<li><code>geom_abline()</code> adds a diagonal reference line. Specify the <code>slope</code>.</li>
</ul>
<p>For more information see this link: <a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="uri">https://ggplot2.tidyverse.org/reference/geom_abline.html</a></p>
</div>
<p><br>
<br></p>
<p>The Mercedes domination of practice sessions continued through 2016. However, by then, Ferrari had started chipping away at the gap to Mercedes.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="introduction-to-formula-1.html#cb32-1" aria-hidden="true" tabindex="-1"></a>practice_times <span class="sc">%&gt;%</span></span>
<span id="cb32-2"><a href="introduction-to-formula-1.html#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year <span class="sc">==</span> <span class="dv">2016</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb32-3"><a href="introduction-to-formula-1.html#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(Time_secs_3, Time_secs_2, Time_secs_1), <span class="at">names_to =</span> <span class="st">&#39;practice_session&#39;</span>, <span class="at">values_to =</span> <span class="st">&#39;time&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-4"><a href="introduction-to-formula-1.html#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">practice_session =</span> <span class="fu">str_remove</span>(practice_session, <span class="st">&#39;Time_secs_&#39;</span>),</span>
<span id="cb32-5"><a href="introduction-to-formula-1.html#cb32-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">Year =</span> <span class="fu">factor</span>(Year)) <span class="sc">%&gt;%</span></span>
<span id="cb32-6"><a href="introduction-to-formula-1.html#cb32-6" aria-hidden="true" tabindex="-1"></a>   <span class="fu">group_by</span>(Race, practice_session) <span class="sc">%&gt;%</span></span>
<span id="cb32-7"><a href="introduction-to-formula-1.html#cb32-7" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">track_mean =</span> <span class="fu">mean</span>(time, <span class="at">na.rm =</span> T),</span>
<span id="cb32-8"><a href="introduction-to-formula-1.html#cb32-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">Time_std_track =</span> time <span class="sc">-</span> track_mean) <span class="sc">%&gt;%</span> </span>
<span id="cb32-9"><a href="introduction-to-formula-1.html#cb32-9" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb32-10"><a href="introduction-to-formula-1.html#cb32-10" aria-hidden="true" tabindex="-1"></a>   <span class="fu">group_by</span>(Driver) <span class="sc">%&gt;%</span> </span>
<span id="cb32-11"><a href="introduction-to-formula-1.html#cb32-11" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">driver_n =</span> <span class="fu">n</span>(),</span>
<span id="cb32-12"><a href="introduction-to-formula-1.html#cb32-12" aria-hidden="true" tabindex="-1"></a>          <span class="at">mean =</span> <span class="fu">mean</span>(Time_std_track, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span></span>
<span id="cb32-13"><a href="introduction-to-formula-1.html#cb32-13" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb32-14"><a href="introduction-to-formula-1.html#cb32-14" aria-hidden="true" tabindex="-1"></a>   dplyr<span class="sc">::</span><span class="fu">filter</span>(driver_n <span class="sc">&gt;</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb32-15"><a href="introduction-to-formula-1.html#cb32-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">practice_session =</span> <span class="fu">paste0</span>(<span class="st">&#39;free practice &#39;</span>, practice_session)) <span class="sc">%&gt;%</span>  </span>
<span id="cb32-16"><a href="introduction-to-formula-1.html#cb32-16" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ggplot</span>(<span class="fu">aes</span>(Time_std_track, <span class="at">y =</span> <span class="fu">fct_reorder</span>(Driver, <span class="fu">desc</span>(mean)))) <span class="sc">+</span></span>
<span id="cb32-17"><a href="introduction-to-formula-1.html#cb32-17" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">w =</span> <span class="dv">0</span>, <span class="at">h =</span> <span class="fl">0.1</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb32-18"><a href="introduction-to-formula-1.html#cb32-18" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb32-19"><a href="introduction-to-formula-1.html#cb32-19" aria-hidden="true" tabindex="-1"></a>   <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Standardized Practice Time (secs)&#39;</span>,</span>
<span id="cb32-20"><a href="introduction-to-formula-1.html#cb32-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">&#39;Driver&#39;</span>,</span>
<span id="cb32-21"><a href="introduction-to-formula-1.html#cb32-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&#39;Standardized Practice Time&#39;</span>,</span>
<span id="cb32-22"><a href="introduction-to-formula-1.html#cb32-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&#39;2016&#39;</span>,</span>
<span id="cb32-23"><a href="introduction-to-formula-1.html#cb32-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">caption =</span> <span class="st">&#39;*Times are subtracted from the average time for each Grand Prix&#39;</span>) <span class="sc">+</span></span>
<span id="cb32-24"><a href="introduction-to-formula-1.html#cb32-24" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">col =</span> <span class="st">&#39;red&#39;</span>) <span class="sc">+</span></span>
<span id="cb32-25"><a href="introduction-to-formula-1.html#cb32-25" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb32-26"><a href="introduction-to-formula-1.html#cb32-26" aria-hidden="true" tabindex="-1"></a>         <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb32-27"><a href="introduction-to-formula-1.html#cb32-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb32-28"><a href="introduction-to-formula-1.html#cb32-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> practice_session) <span class="sc">+</span></span>
<span id="cb32-29"><a href="introduction-to-formula-1.html#cb32-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb32-30"><a href="introduction-to-formula-1.html#cb32-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="fu">seq</span>(<span class="dv">23</span>, <span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>), <span class="at">col =</span> <span class="st">&#39;grey&#39;</span>, <span class="at">size =</span> <span class="dv">5</span>, <span class="at">alpha =</span>  <span class="fl">0.2</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-25-1.png" width="768" style="display: block; margin: auto;" /></p>
<p><br>
<br></p>
<div class="blackbox">
<div class="center">
<p><strong>Faceting Plots</strong></p>
</div>
<p>In the previous few figures, you will notice that the data is split into panes, or <em>facets</em>.
Faceting splits a larger graph into two or more smaller graphs that are organized within a grid. Each <em>facet</em> within the grid will display the same style of graph for a designated group of the dataset.</p>
<p>In the example above, I use the <code>facet_wrap()</code> function to split the graph into facets representing each practice session using the following function and argument: <code>facet_wrap(~ practice_session)</code></p>
<p>For more information on the <code>facet_wrap()</code> function, see this link: <a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="uri">https://ggplot2.tidyverse.org/reference/facet_wrap.html</a></p>
</div>
<p><br>
<br></p>
<p>By 2017, Ferrari had seemingly closed the gap to Mercedes. Sebastian Vettel led the driver’s championship for the first 12 rounds of the season, and we can see that Vettel’s practice times are comparable to those posted by Hamilton. In 2017, the Ferrari SF70H was thought to be initially a more consistent car in race trim, and Vettel’s P2 times seem to support this claim.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="introduction-to-formula-1.html#cb33-1" aria-hidden="true" tabindex="-1"></a>practice_times <span class="sc">%&gt;%</span></span>
<span id="cb33-2"><a href="introduction-to-formula-1.html#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year <span class="sc">==</span> <span class="dv">2017</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb33-3"><a href="introduction-to-formula-1.html#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(Time_secs_3, Time_secs_2, Time_secs_1), <span class="at">names_to =</span> <span class="st">&#39;practice_session&#39;</span>, <span class="at">values_to =</span> <span class="st">&#39;time&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-4"><a href="introduction-to-formula-1.html#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">practice_session =</span> <span class="fu">str_remove</span>(practice_session, <span class="st">&#39;Time_secs_&#39;</span>),</span>
<span id="cb33-5"><a href="introduction-to-formula-1.html#cb33-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">Year =</span> <span class="fu">factor</span>(Year)) <span class="sc">%&gt;%</span></span>
<span id="cb33-6"><a href="introduction-to-formula-1.html#cb33-6" aria-hidden="true" tabindex="-1"></a>   <span class="fu">group_by</span>(Race, practice_session) <span class="sc">%&gt;%</span></span>
<span id="cb33-7"><a href="introduction-to-formula-1.html#cb33-7" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">track_mean =</span> <span class="fu">mean</span>(time, <span class="at">na.rm =</span> T),</span>
<span id="cb33-8"><a href="introduction-to-formula-1.html#cb33-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">Time_std_track =</span> time <span class="sc">-</span> track_mean) <span class="sc">%&gt;%</span> </span>
<span id="cb33-9"><a href="introduction-to-formula-1.html#cb33-9" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb33-10"><a href="introduction-to-formula-1.html#cb33-10" aria-hidden="true" tabindex="-1"></a>   <span class="fu">group_by</span>(Driver) <span class="sc">%&gt;%</span> </span>
<span id="cb33-11"><a href="introduction-to-formula-1.html#cb33-11" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">driver_n =</span> <span class="fu">n</span>(),</span>
<span id="cb33-12"><a href="introduction-to-formula-1.html#cb33-12" aria-hidden="true" tabindex="-1"></a>          <span class="at">mean =</span> <span class="fu">mean</span>(Time_std_track, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span></span>
<span id="cb33-13"><a href="introduction-to-formula-1.html#cb33-13" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb33-14"><a href="introduction-to-formula-1.html#cb33-14" aria-hidden="true" tabindex="-1"></a>   dplyr<span class="sc">::</span><span class="fu">filter</span>(driver_n <span class="sc">&gt;</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb33-15"><a href="introduction-to-formula-1.html#cb33-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">practice_session =</span> <span class="fu">paste0</span>(<span class="st">&#39;free practice &#39;</span>, practice_session)) <span class="sc">%&gt;%</span>  </span>
<span id="cb33-16"><a href="introduction-to-formula-1.html#cb33-16" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ggplot</span>(<span class="fu">aes</span>(Time_std_track, <span class="at">y =</span> <span class="fu">fct_reorder</span>(Driver, <span class="fu">desc</span>(mean)))) <span class="sc">+</span></span>
<span id="cb33-17"><a href="introduction-to-formula-1.html#cb33-17" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">w =</span> <span class="dv">0</span>, <span class="at">h =</span> <span class="fl">0.1</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb33-18"><a href="introduction-to-formula-1.html#cb33-18" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb33-19"><a href="introduction-to-formula-1.html#cb33-19" aria-hidden="true" tabindex="-1"></a>   <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Standardized Practice Time (secs)&#39;</span>,</span>
<span id="cb33-20"><a href="introduction-to-formula-1.html#cb33-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">&#39;Driver&#39;</span>,</span>
<span id="cb33-21"><a href="introduction-to-formula-1.html#cb33-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&#39;Standardized Practice Time&#39;</span>,</span>
<span id="cb33-22"><a href="introduction-to-formula-1.html#cb33-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&#39;2017&#39;</span>,</span>
<span id="cb33-23"><a href="introduction-to-formula-1.html#cb33-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">caption =</span> <span class="st">&#39;*Times are subtracted from the average time for each Grand Prix&#39;</span>) <span class="sc">+</span></span>
<span id="cb33-24"><a href="introduction-to-formula-1.html#cb33-24" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">col =</span> <span class="st">&#39;red&#39;</span>) <span class="sc">+</span></span>
<span id="cb33-25"><a href="introduction-to-formula-1.html#cb33-25" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb33-26"><a href="introduction-to-formula-1.html#cb33-26" aria-hidden="true" tabindex="-1"></a>         <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb33-27"><a href="introduction-to-formula-1.html#cb33-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb33-28"><a href="introduction-to-formula-1.html#cb33-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> practice_session) <span class="sc">+</span></span>
<span id="cb33-29"><a href="introduction-to-formula-1.html#cb33-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb33-30"><a href="introduction-to-formula-1.html#cb33-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="fu">seq</span>(<span class="dv">22</span>, <span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>), <span class="at">col =</span> <span class="st">&#39;grey&#39;</span>, <span class="at">size =</span> <span class="dv">5</span>, <span class="at">alpha =</span>  <span class="fl">0.2</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-26-1.png" width="768" style="display: block; margin: auto;" /></p>
<p><br>
<br></p>
<div class="blackbox">
<div class="center">
<p><strong>Sorting an axis in ggplot</strong></p>
</div>
<p>You may have noticed that the last few plots have a y-axis that is sorted by the values along the x-axis. <strong>ggplot2</strong> does not sort an axis in this manner by default. However, this can easily be accomplished using the <code>fct_reorder()</code> function. In the plots above, I sort the y-axis (Drivers) by their average standardized time in descending order.</p>
<p>For more information on the <code>fct_reorder()</code> function, see this link: <a href="https://forcats.tidyverse.org/reference/fct_reorder.html" class="uri">https://forcats.tidyverse.org/reference/fct_reorder.html</a></p>
</div>
<p><br>
<br></p>
<p>In 2018, Vettel’s distribution of practice times were not quite as fast as Hamilton. Hamilton’s times during P2 seemed to stand apart from the field. Interestingly, Max Verstappen’s times during P2 were comparable to those posted by Mercedes’ other driver, Valtteri Bottas.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="introduction-to-formula-1.html#cb34-1" aria-hidden="true" tabindex="-1"></a>practice_times <span class="sc">%&gt;%</span></span>
<span id="cb34-2"><a href="introduction-to-formula-1.html#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year <span class="sc">==</span> <span class="dv">2018</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb34-3"><a href="introduction-to-formula-1.html#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(Time_secs_3, Time_secs_2, Time_secs_1), <span class="at">names_to =</span> <span class="st">&#39;practice_session&#39;</span>, <span class="at">values_to =</span> <span class="st">&#39;time&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb34-4"><a href="introduction-to-formula-1.html#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">practice_session =</span> <span class="fu">str_remove</span>(practice_session, <span class="st">&#39;Time_secs_&#39;</span>),</span>
<span id="cb34-5"><a href="introduction-to-formula-1.html#cb34-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">Year =</span> <span class="fu">factor</span>(Year)) <span class="sc">%&gt;%</span></span>
<span id="cb34-6"><a href="introduction-to-formula-1.html#cb34-6" aria-hidden="true" tabindex="-1"></a>   <span class="fu">group_by</span>(Race, practice_session) <span class="sc">%&gt;%</span></span>
<span id="cb34-7"><a href="introduction-to-formula-1.html#cb34-7" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">track_mean =</span> <span class="fu">mean</span>(time, <span class="at">na.rm =</span> T),</span>
<span id="cb34-8"><a href="introduction-to-formula-1.html#cb34-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">Time_std_track =</span> time <span class="sc">-</span> track_mean) <span class="sc">%&gt;%</span> </span>
<span id="cb34-9"><a href="introduction-to-formula-1.html#cb34-9" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb34-10"><a href="introduction-to-formula-1.html#cb34-10" aria-hidden="true" tabindex="-1"></a>   <span class="fu">group_by</span>(Driver) <span class="sc">%&gt;%</span> </span>
<span id="cb34-11"><a href="introduction-to-formula-1.html#cb34-11" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">driver_n =</span> <span class="fu">n</span>(),</span>
<span id="cb34-12"><a href="introduction-to-formula-1.html#cb34-12" aria-hidden="true" tabindex="-1"></a>          <span class="at">mean =</span> <span class="fu">mean</span>(Time_std_track, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span></span>
<span id="cb34-13"><a href="introduction-to-formula-1.html#cb34-13" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb34-14"><a href="introduction-to-formula-1.html#cb34-14" aria-hidden="true" tabindex="-1"></a>   dplyr<span class="sc">::</span><span class="fu">filter</span>(driver_n <span class="sc">&gt;</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb34-15"><a href="introduction-to-formula-1.html#cb34-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">practice_session =</span> <span class="fu">paste0</span>(<span class="st">&#39;free practice &#39;</span>, practice_session)) <span class="sc">%&gt;%</span>   </span>
<span id="cb34-16"><a href="introduction-to-formula-1.html#cb34-16" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ggplot</span>(<span class="fu">aes</span>(Time_std_track, <span class="at">y =</span> <span class="fu">fct_reorder</span>(Driver, <span class="fu">desc</span>(mean)))) <span class="sc">+</span></span>
<span id="cb34-17"><a href="introduction-to-formula-1.html#cb34-17" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">w =</span> <span class="dv">0</span>, <span class="at">h =</span> <span class="fl">0.1</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb34-18"><a href="introduction-to-formula-1.html#cb34-18" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb34-19"><a href="introduction-to-formula-1.html#cb34-19" aria-hidden="true" tabindex="-1"></a>   <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Standardized Practice Time (secs)&#39;</span>,</span>
<span id="cb34-20"><a href="introduction-to-formula-1.html#cb34-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">&#39;Driver&#39;</span>,</span>
<span id="cb34-21"><a href="introduction-to-formula-1.html#cb34-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&#39;Standardized Practice Time&#39;</span>,</span>
<span id="cb34-22"><a href="introduction-to-formula-1.html#cb34-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&#39;2018&#39;</span>,</span>
<span id="cb34-23"><a href="introduction-to-formula-1.html#cb34-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">caption =</span> <span class="st">&#39;*Times are subtracted from the average time for each Grand Prix&#39;</span>) <span class="sc">+</span></span>
<span id="cb34-24"><a href="introduction-to-formula-1.html#cb34-24" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">col =</span> <span class="st">&#39;red&#39;</span>) <span class="sc">+</span></span>
<span id="cb34-25"><a href="introduction-to-formula-1.html#cb34-25" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb34-26"><a href="introduction-to-formula-1.html#cb34-26" aria-hidden="true" tabindex="-1"></a>         <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb34-27"><a href="introduction-to-formula-1.html#cb34-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb34-28"><a href="introduction-to-formula-1.html#cb34-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> practice_session) <span class="sc">+</span></span>
<span id="cb34-29"><a href="introduction-to-formula-1.html#cb34-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb34-30"><a href="introduction-to-formula-1.html#cb34-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="fu">seq</span>(<span class="dv">22</span>, <span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>), <span class="at">col =</span> <span class="st">&#39;grey&#39;</span>, <span class="at">size =</span> <span class="dv">5</span>, <span class="at">alpha =</span>  <span class="fl">0.2</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-27-1.png" width="768" style="display: block; margin: auto;" /></p>
<p>During the 2019 season, Ferrari scored six consecutive pole positions between the Belgian and Mexican Grands Prix. However, after the FIA issued a technical directive reminding competitors of the regulations regarding fuel sensors, Ferrari’s performance faded and they failed to score a pole position or race win for the remainder of the season. In the plot below, we can see that Charles LeClerc’s distribution is fairly wide, which is likely indicative of this shift in performance.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="introduction-to-formula-1.html#cb35-1" aria-hidden="true" tabindex="-1"></a>practice_times <span class="sc">%&gt;%</span></span>
<span id="cb35-2"><a href="introduction-to-formula-1.html#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year <span class="sc">==</span> <span class="dv">2019</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb35-3"><a href="introduction-to-formula-1.html#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(Time_secs_3, Time_secs_2, Time_secs_1), <span class="at">names_to =</span> <span class="st">&#39;practice_session&#39;</span>, <span class="at">values_to =</span> <span class="st">&#39;time&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-4"><a href="introduction-to-formula-1.html#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">practice_session =</span> <span class="fu">str_remove</span>(practice_session, <span class="st">&#39;Time_secs_&#39;</span>),</span>
<span id="cb35-5"><a href="introduction-to-formula-1.html#cb35-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">Year =</span> <span class="fu">factor</span>(Year)) <span class="sc">%&gt;%</span></span>
<span id="cb35-6"><a href="introduction-to-formula-1.html#cb35-6" aria-hidden="true" tabindex="-1"></a>   <span class="fu">group_by</span>(Race, practice_session) <span class="sc">%&gt;%</span></span>
<span id="cb35-7"><a href="introduction-to-formula-1.html#cb35-7" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">track_mean =</span> <span class="fu">mean</span>(time, <span class="at">na.rm =</span> T),</span>
<span id="cb35-8"><a href="introduction-to-formula-1.html#cb35-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">Time_std_track =</span> time <span class="sc">-</span> track_mean) <span class="sc">%&gt;%</span> </span>
<span id="cb35-9"><a href="introduction-to-formula-1.html#cb35-9" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb35-10"><a href="introduction-to-formula-1.html#cb35-10" aria-hidden="true" tabindex="-1"></a>   <span class="fu">group_by</span>(Driver) <span class="sc">%&gt;%</span> </span>
<span id="cb35-11"><a href="introduction-to-formula-1.html#cb35-11" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">driver_n =</span> <span class="fu">n</span>(),</span>
<span id="cb35-12"><a href="introduction-to-formula-1.html#cb35-12" aria-hidden="true" tabindex="-1"></a>          <span class="at">mean =</span> <span class="fu">mean</span>(Time_std_track, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span></span>
<span id="cb35-13"><a href="introduction-to-formula-1.html#cb35-13" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb35-14"><a href="introduction-to-formula-1.html#cb35-14" aria-hidden="true" tabindex="-1"></a>   dplyr<span class="sc">::</span><span class="fu">filter</span>(driver_n <span class="sc">&gt;</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb35-15"><a href="introduction-to-formula-1.html#cb35-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">practice_session =</span> <span class="fu">paste0</span>(<span class="st">&#39;free practice &#39;</span>, practice_session)) <span class="sc">%&gt;%</span>  </span>
<span id="cb35-16"><a href="introduction-to-formula-1.html#cb35-16" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ggplot</span>(<span class="fu">aes</span>(Time_std_track, <span class="at">y =</span> <span class="fu">fct_reorder</span>(Driver, <span class="fu">desc</span>(mean)))) <span class="sc">+</span></span>
<span id="cb35-17"><a href="introduction-to-formula-1.html#cb35-17" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">col =</span> <span class="st">&#39;red&#39;</span>) <span class="sc">+</span></span>
<span id="cb35-18"><a href="introduction-to-formula-1.html#cb35-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gghighlight</span>(Driver <span class="sc">==</span> <span class="st">&#39;LEC&#39;</span>, <span class="at">calculate_per_facet =</span> T) <span class="sc">+</span> </span>
<span id="cb35-19"><a href="introduction-to-formula-1.html#cb35-19" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb35-20"><a href="introduction-to-formula-1.html#cb35-20" aria-hidden="true" tabindex="-1"></a>   <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Standardized Practice Time (secs)&#39;</span>,</span>
<span id="cb35-21"><a href="introduction-to-formula-1.html#cb35-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">&#39;Driver&#39;</span>,</span>
<span id="cb35-22"><a href="introduction-to-formula-1.html#cb35-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&#39;Standardized Practice Time&#39;</span>,</span>
<span id="cb35-23"><a href="introduction-to-formula-1.html#cb35-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&#39;2019&#39;</span>,</span>
<span id="cb35-24"><a href="introduction-to-formula-1.html#cb35-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">caption =</span> <span class="st">&#39;*Times are subtracted from the average time for each Grand Prix&#39;</span>) <span class="sc">+</span></span>
<span id="cb35-25"><a href="introduction-to-formula-1.html#cb35-25" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">col =</span> <span class="st">&#39;red&#39;</span>) <span class="sc">+</span></span>
<span id="cb35-26"><a href="introduction-to-formula-1.html#cb35-26" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb35-27"><a href="introduction-to-formula-1.html#cb35-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb35-28"><a href="introduction-to-formula-1.html#cb35-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb35-29"><a href="introduction-to-formula-1.html#cb35-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> practice_session) <span class="sc">+</span></span>
<span id="cb35-30"><a href="introduction-to-formula-1.html#cb35-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">5</span>)  <span class="sc">+</span></span>
<span id="cb35-31"><a href="introduction-to-formula-1.html#cb35-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="fu">seq</span>(<span class="dv">22</span>, <span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>), <span class="at">col =</span> <span class="st">&#39;grey&#39;</span>, <span class="at">size =</span> <span class="dv">5</span>, <span class="at">alpha =</span>  <span class="fl">0.1</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-28-1.png" width="768" style="display: block; margin: auto;" /></p>
<p><br>
<br></p>
<div class="blackbox">
<div class="center">
<p><strong>Highlighting data in ggplot</strong></p>
</div>
<p>In the plot above, I highlight Charles Leclerc’s data using the <code>gghighlight()</code> function from the <strong>gghighlight</strong> package. This function is version easy to use! Because this plot also utilizes <code>facet_wrap()</code> and I wanted to highlight each facet individually, I set the <code>calculate_per_facet</code> argument to <code>TRUE</code>.</p>
<p>To highlight Charles Leclerc, I used the following line of code: <code>gghighlight(Abbr == 'LEC', calculate_per_facet = T)</code>.</p>
<p>For more information on the <strong>gghighlight</strong> package, visit this link: <a href="https://cran.r-project.org/web/packages/gghighlight/vignettes/gghighlight.html" class="uri">https://cran.r-project.org/web/packages/gghighlight/vignettes/gghighlight.html</a></p>
</div>
<p><br>
<br></p>
<p>In 2020, Max Verstappen competed with the two Mercedes Drivers (Hamilton and Bottas) in P3 (qualifying simulations), but struggled in the longer runs of P2. As we can see in the plot below, Verstappen’s P3 pace was the closest to Mercedes, and far quicker than his teammate Alex Albon.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="introduction-to-formula-1.html#cb36-1" aria-hidden="true" tabindex="-1"></a>practice_times <span class="sc">%&gt;%</span></span>
<span id="cb36-2"><a href="introduction-to-formula-1.html#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year <span class="sc">==</span> <span class="dv">2020</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb36-3"><a href="introduction-to-formula-1.html#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(Time_secs_3, Time_secs_2, Time_secs_1), <span class="at">names_to =</span> <span class="st">&#39;practice_session&#39;</span>, <span class="at">values_to =</span> <span class="st">&#39;time&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb36-4"><a href="introduction-to-formula-1.html#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">practice_session =</span> <span class="fu">str_remove</span>(practice_session, <span class="st">&#39;Time_secs_&#39;</span>),</span>
<span id="cb36-5"><a href="introduction-to-formula-1.html#cb36-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">Year =</span> <span class="fu">factor</span>(Year)) <span class="sc">%&gt;%</span></span>
<span id="cb36-6"><a href="introduction-to-formula-1.html#cb36-6" aria-hidden="true" tabindex="-1"></a>   <span class="fu">group_by</span>(Race, practice_session) <span class="sc">%&gt;%</span></span>
<span id="cb36-7"><a href="introduction-to-formula-1.html#cb36-7" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">track_mean =</span> <span class="fu">mean</span>(time, <span class="at">na.rm =</span> T),</span>
<span id="cb36-8"><a href="introduction-to-formula-1.html#cb36-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">Time_std_track =</span> time <span class="sc">-</span> track_mean) <span class="sc">%&gt;%</span> </span>
<span id="cb36-9"><a href="introduction-to-formula-1.html#cb36-9" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb36-10"><a href="introduction-to-formula-1.html#cb36-10" aria-hidden="true" tabindex="-1"></a>   <span class="fu">group_by</span>(Driver) <span class="sc">%&gt;%</span> </span>
<span id="cb36-11"><a href="introduction-to-formula-1.html#cb36-11" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">driver_n =</span> <span class="fu">n</span>(),</span>
<span id="cb36-12"><a href="introduction-to-formula-1.html#cb36-12" aria-hidden="true" tabindex="-1"></a>          <span class="at">mean =</span> <span class="fu">mean</span>(Time_std_track, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span></span>
<span id="cb36-13"><a href="introduction-to-formula-1.html#cb36-13" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb36-14"><a href="introduction-to-formula-1.html#cb36-14" aria-hidden="true" tabindex="-1"></a>   dplyr<span class="sc">::</span><span class="fu">filter</span>(driver_n <span class="sc">&gt;</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb36-15"><a href="introduction-to-formula-1.html#cb36-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">practice_session =</span> <span class="fu">paste0</span>(<span class="st">&#39;free practice &#39;</span>, practice_session)) <span class="sc">%&gt;%</span>  </span>
<span id="cb36-16"><a href="introduction-to-formula-1.html#cb36-16" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ggplot</span>(<span class="fu">aes</span>(Time_std_track, <span class="at">y =</span> <span class="fu">fct_reorder</span>(Driver, <span class="fu">desc</span>(mean)))) <span class="sc">+</span></span>
<span id="cb36-17"><a href="introduction-to-formula-1.html#cb36-17" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">col =</span> <span class="st">&#39;navy&#39;</span>) <span class="sc">+</span></span>
<span id="cb36-18"><a href="introduction-to-formula-1.html#cb36-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gghighlight</span>(Driver <span class="sc">==</span> <span class="st">&#39;VER&#39;</span>, <span class="at">calculate_per_facet =</span> T) <span class="sc">+</span> </span>
<span id="cb36-19"><a href="introduction-to-formula-1.html#cb36-19" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb36-20"><a href="introduction-to-formula-1.html#cb36-20" aria-hidden="true" tabindex="-1"></a>   <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Standardized Practice Time (secs)&#39;</span>,</span>
<span id="cb36-21"><a href="introduction-to-formula-1.html#cb36-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">&#39;Driver&#39;</span>,</span>
<span id="cb36-22"><a href="introduction-to-formula-1.html#cb36-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&#39;Standardized Practice Time&#39;</span>,</span>
<span id="cb36-23"><a href="introduction-to-formula-1.html#cb36-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&#39;2020&#39;</span>,</span>
<span id="cb36-24"><a href="introduction-to-formula-1.html#cb36-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">caption =</span> <span class="st">&#39;*Times are subtracted from the average time for each Grand Prix&#39;</span>) <span class="sc">+</span></span>
<span id="cb36-25"><a href="introduction-to-formula-1.html#cb36-25" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">col =</span> <span class="st">&#39;red&#39;</span>) <span class="sc">+</span></span>
<span id="cb36-26"><a href="introduction-to-formula-1.html#cb36-26" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb36-27"><a href="introduction-to-formula-1.html#cb36-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb36-28"><a href="introduction-to-formula-1.html#cb36-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb36-29"><a href="introduction-to-formula-1.html#cb36-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> practice_session) <span class="sc">+</span></span>
<span id="cb36-30"><a href="introduction-to-formula-1.html#cb36-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb36-31"><a href="introduction-to-formula-1.html#cb36-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="fu">seq</span>(<span class="dv">22</span>, <span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>), <span class="at">col =</span> <span class="st">&#39;grey&#39;</span>, <span class="at">size =</span> <span class="dv">5</span>, <span class="at">alpha =</span>  <span class="fl">0.1</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-29-1.png" width="768" style="display: block; margin: auto;" /></p>
<p>For the first time since 2014, Mercedes faced a legitimate challenge to their dominance in 2021. While Ferrari had their moments during the <strong>turbo-hybrid</strong> era, Red Bull and Max Verstappen competed with Mercedes during every session of the 2021 season.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="introduction-to-formula-1.html#cb37-1" aria-hidden="true" tabindex="-1"></a>practice_times <span class="sc">%&gt;%</span></span>
<span id="cb37-2"><a href="introduction-to-formula-1.html#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year <span class="sc">==</span> <span class="dv">2021</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb37-3"><a href="introduction-to-formula-1.html#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(Time_secs_3, Time_secs_2, Time_secs_1), <span class="at">names_to =</span> <span class="st">&#39;practice_session&#39;</span>, <span class="at">values_to =</span> <span class="st">&#39;time&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb37-4"><a href="introduction-to-formula-1.html#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">practice_session =</span> <span class="fu">str_remove</span>(practice_session, <span class="st">&#39;Time_secs_&#39;</span>),</span>
<span id="cb37-5"><a href="introduction-to-formula-1.html#cb37-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">Year =</span> <span class="fu">factor</span>(Year)) <span class="sc">%&gt;%</span></span>
<span id="cb37-6"><a href="introduction-to-formula-1.html#cb37-6" aria-hidden="true" tabindex="-1"></a>   <span class="fu">group_by</span>(Race, practice_session) <span class="sc">%&gt;%</span></span>
<span id="cb37-7"><a href="introduction-to-formula-1.html#cb37-7" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">track_mean =</span> <span class="fu">mean</span>(time, <span class="at">na.rm =</span> T),</span>
<span id="cb37-8"><a href="introduction-to-formula-1.html#cb37-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">Time_std_track =</span> time <span class="sc">-</span> track_mean) <span class="sc">%&gt;%</span> </span>
<span id="cb37-9"><a href="introduction-to-formula-1.html#cb37-9" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb37-10"><a href="introduction-to-formula-1.html#cb37-10" aria-hidden="true" tabindex="-1"></a>   <span class="fu">group_by</span>(Driver) <span class="sc">%&gt;%</span> </span>
<span id="cb37-11"><a href="introduction-to-formula-1.html#cb37-11" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">driver_n =</span> <span class="fu">n</span>(),</span>
<span id="cb37-12"><a href="introduction-to-formula-1.html#cb37-12" aria-hidden="true" tabindex="-1"></a>          <span class="at">mean =</span> <span class="fu">mean</span>(Time_std_track, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span></span>
<span id="cb37-13"><a href="introduction-to-formula-1.html#cb37-13" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb37-14"><a href="introduction-to-formula-1.html#cb37-14" aria-hidden="true" tabindex="-1"></a>   dplyr<span class="sc">::</span><span class="fu">filter</span>(driver_n <span class="sc">&gt;</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb37-15"><a href="introduction-to-formula-1.html#cb37-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">practice_session =</span> <span class="fu">paste0</span>(<span class="st">&#39;free practice &#39;</span>, practice_session)) <span class="sc">%&gt;%</span>  </span>
<span id="cb37-16"><a href="introduction-to-formula-1.html#cb37-16" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ggplot</span>(<span class="fu">aes</span>(Time_std_track, <span class="at">y =</span> <span class="fu">fct_reorder</span>(Driver, <span class="fu">desc</span>(mean)), <span class="at">col =</span> Driver)) <span class="sc">+</span></span>
<span id="cb37-17"><a href="introduction-to-formula-1.html#cb37-17" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb37-18"><a href="introduction-to-formula-1.html#cb37-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gghighlight</span>(Driver <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;VER&#39;</span>, <span class="st">&#39;HAM&#39;</span>, <span class="st">&#39;BOT&#39;</span>), <span class="at">calculate_per_facet =</span> T) <span class="sc">+</span> </span>
<span id="cb37-19"><a href="introduction-to-formula-1.html#cb37-19" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb37-20"><a href="introduction-to-formula-1.html#cb37-20" aria-hidden="true" tabindex="-1"></a>   <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Standardized Practice Time (secs)&#39;</span>,</span>
<span id="cb37-21"><a href="introduction-to-formula-1.html#cb37-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">&#39;Driver&#39;</span>,</span>
<span id="cb37-22"><a href="introduction-to-formula-1.html#cb37-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&#39;Standardized Practice Time&#39;</span>,</span>
<span id="cb37-23"><a href="introduction-to-formula-1.html#cb37-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&#39;2021&#39;</span>,</span>
<span id="cb37-24"><a href="introduction-to-formula-1.html#cb37-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">caption =</span> <span class="st">&#39;*Times are subtracted from the average time for each Grand Prix&#39;</span>) <span class="sc">+</span></span>
<span id="cb37-25"><a href="introduction-to-formula-1.html#cb37-25" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">col =</span> <span class="st">&#39;red&#39;</span>) <span class="sc">+</span></span>
<span id="cb37-26"><a href="introduction-to-formula-1.html#cb37-26" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb37-27"><a href="introduction-to-formula-1.html#cb37-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb37-28"><a href="introduction-to-formula-1.html#cb37-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb37-29"><a href="introduction-to-formula-1.html#cb37-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> practice_session) <span class="sc">+</span></span>
<span id="cb37-30"><a href="introduction-to-formula-1.html#cb37-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb37-31"><a href="introduction-to-formula-1.html#cb37-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="st">&#39;&#39;</span>, <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&#39;seagreen&#39;</span>, <span class="st">&#39;seagreen&#39;</span>, <span class="st">&#39;navy&#39;</span>)) <span class="sc">+</span></span>
<span id="cb37-32"><a href="introduction-to-formula-1.html#cb37-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="fu">seq</span>(<span class="dv">22</span>, <span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>), <span class="at">col =</span> <span class="st">&#39;grey&#39;</span>, <span class="at">size =</span> <span class="dv">5</span>, <span class="at">alpha =</span>  <span class="fl">0.1</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-30-1.png" width="768" style="display: block; margin: auto;" /></p>
<p><br>
<br></p>
<div class="blackbox">
<div class="center">
<p><strong>Custom discrete color scales in ggplot</strong></p>
</div>
<p>In the plot above, I created a custom color scale that corresponds to two teams: Mercedes and Red Bull. The <code>scale_color_manual()</code> function allows you to specify your own set of mappings from levels/groups in the data to color values.</p>
<p>For more information on this, visit this link: <a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="uri">https://ggplot2.tidyverse.org/reference/scale_manual.html</a></p>
</div>
<p><br>
<br></p>
<p>The plot below shows the head-to-head practice battles for Verstappen vs Hamilton in 2021. This figure seems to suggest that Hamilton had the edge in race pace (P2), while Verstappen had the advantage in qualifying simulations (P3).</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="introduction-to-formula-1.html#cb38-1" aria-hidden="true" tabindex="-1"></a>practice_times <span class="sc">%&gt;%</span></span>
<span id="cb38-2"><a href="introduction-to-formula-1.html#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year <span class="sc">==</span> <span class="dv">2021</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb38-3"><a href="introduction-to-formula-1.html#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">round =</span> <span class="fu">match</span>(Race, <span class="fu">unique</span>(Race))) <span class="sc">%&gt;%</span></span>
<span id="cb38-4"><a href="introduction-to-formula-1.html#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb38-5"><a href="introduction-to-formula-1.html#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(Time_secs_3, Time_secs_2, Time_secs_1), <span class="at">names_to =</span> <span class="st">&#39;practice_session&#39;</span>, <span class="at">values_to =</span> <span class="st">&#39;time&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb38-6"><a href="introduction-to-formula-1.html#cb38-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">practice_session =</span> <span class="fu">str_remove</span>(practice_session, <span class="st">&#39;Time_secs_&#39;</span>),</span>
<span id="cb38-7"><a href="introduction-to-formula-1.html#cb38-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">Year =</span> <span class="fu">factor</span>(Year)) <span class="sc">%&gt;%</span></span>
<span id="cb38-8"><a href="introduction-to-formula-1.html#cb38-8" aria-hidden="true" tabindex="-1"></a>   <span class="fu">group_by</span>(Race, practice_session) <span class="sc">%&gt;%</span></span>
<span id="cb38-9"><a href="introduction-to-formula-1.html#cb38-9" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">track_mean =</span> <span class="fu">mean</span>(time, <span class="at">na.rm =</span> T),</span>
<span id="cb38-10"><a href="introduction-to-formula-1.html#cb38-10" aria-hidden="true" tabindex="-1"></a>          <span class="at">Time_std_track =</span> time <span class="sc">-</span> track_mean) <span class="sc">%&gt;%</span> </span>
<span id="cb38-11"><a href="introduction-to-formula-1.html#cb38-11" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb38-12"><a href="introduction-to-formula-1.html#cb38-12" aria-hidden="true" tabindex="-1"></a>   <span class="fu">group_by</span>(Driver) <span class="sc">%&gt;%</span> </span>
<span id="cb38-13"><a href="introduction-to-formula-1.html#cb38-13" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">driver_n =</span> <span class="fu">n</span>(),</span>
<span id="cb38-14"><a href="introduction-to-formula-1.html#cb38-14" aria-hidden="true" tabindex="-1"></a>          <span class="at">mean =</span> <span class="fu">mean</span>(Time_std_track, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span></span>
<span id="cb38-15"><a href="introduction-to-formula-1.html#cb38-15" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb38-16"><a href="introduction-to-formula-1.html#cb38-16" aria-hidden="true" tabindex="-1"></a>   dplyr<span class="sc">::</span><span class="fu">filter</span>(driver_n <span class="sc">&gt;</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb38-17"><a href="introduction-to-formula-1.html#cb38-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">practice_session =</span> <span class="fu">paste0</span>(<span class="st">&#39;free practice &#39;</span>, practice_session)) <span class="sc">%&gt;%</span> </span>
<span id="cb38-18"><a href="introduction-to-formula-1.html#cb38-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Driver <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;VER&#39;</span>, <span class="st">&#39;HAM&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb38-19"><a href="introduction-to-formula-1.html#cb38-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(Race, round), <span class="at">y =</span> Time_std_track,</span>
<span id="cb38-20"><a href="introduction-to-formula-1.html#cb38-20" aria-hidden="true" tabindex="-1"></a>                <span class="at">group =</span> Driver, <span class="at">col =</span> Driver)) <span class="sc">+</span></span>
<span id="cb38-21"><a href="introduction-to-formula-1.html#cb38-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb38-22"><a href="introduction-to-formula-1.html#cb38-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>() <span class="sc">+</span> </span>
<span id="cb38-23"><a href="introduction-to-formula-1.html#cb38-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb38-24"><a href="introduction-to-formula-1.html#cb38-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> practice_session) <span class="sc">+</span> </span>
<span id="cb38-25"><a href="introduction-to-formula-1.html#cb38-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="st">&#39;&#39;</span>, <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&#39;seagreen&#39;</span>, <span class="st">&#39;navy&#39;</span>)) <span class="sc">+</span></span>
<span id="cb38-26"><a href="introduction-to-formula-1.html#cb38-26" aria-hidden="true" tabindex="-1"></a>   <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;Standardized Practice Time (secs)&#39;</span>,</span>
<span id="cb38-27"><a href="introduction-to-formula-1.html#cb38-27" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">&#39;Grand Prix&#39;</span>,</span>
<span id="cb38-28"><a href="introduction-to-formula-1.html#cb38-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="fu">title_color_coder</span>(<span class="st">&quot;&quot;</span>, <span class="st">&quot;Verstappen&quot;</span>, <span class="st">&#39;navy&#39;</span>, <span class="st">&quot; vs &quot;</span>, <span class="st">&quot;Hamilton&quot;</span>, <span class="st">&#39;seagreen&#39;</span>,<span class="st">&quot;  in 2021 Practice Sessions&quot;</span>),</span>
<span id="cb38-29"><a href="introduction-to-formula-1.html#cb38-29" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&#39;Standardized Practice Time&#39;</span>,</span>
<span id="cb38-30"><a href="introduction-to-formula-1.html#cb38-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">caption =</span> <span class="st">&#39;*Times are subtracted from the average time for each Grand Prix&#39;</span>) <span class="sc">+</span></span>
<span id="cb38-31"><a href="introduction-to-formula-1.html#cb38-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fu">seq</span>(<span class="dv">22</span>, <span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>), <span class="at">col =</span> <span class="st">&#39;grey&#39;</span>, <span class="at">size =</span> <span class="dv">5</span>, <span class="at">alpha =</span>  <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb38-32"><a href="introduction-to-formula-1.html#cb38-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">strip.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb38-33"><a href="introduction-to-formula-1.html#cb38-33" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust=</span><span class="dv">1</span>, <span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb38-34"><a href="introduction-to-formula-1.html#cb38-34" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">15</span>),</span>
<span id="cb38-35"><a href="introduction-to-formula-1.html#cb38-35" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">15</span>),</span>
<span id="cb38-36"><a href="introduction-to-formula-1.html#cb38-36" aria-hidden="true" tabindex="-1"></a>         <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">15</span>),</span>
<span id="cb38-37"><a href="introduction-to-formula-1.html#cb38-37" aria-hidden="true" tabindex="-1"></a>         <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb38-38"><a href="introduction-to-formula-1.html#cb38-38" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">13</span>),</span>
<span id="cb38-39"><a href="introduction-to-formula-1.html#cb38-39" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> ggtext<span class="sc">::</span><span class="fu">element_markdown</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">20</span>)) <span class="do">## render the provided text as markdown/html</span></span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-31-1.png" width="1152" style="display: block; margin: auto;" /></p>
<p><br>
<br></p>
<div class="blackbox">
<div class="center">
<p><strong>Color-coding the title in ggplot</strong></p>
</div>
<p>The <strong>ggtext</strong> package provides Markdown and HTML rendering for <strong>ggplot2</strong>. Creating color-coded titles in <strong>ggplot</strong> can get tedious if there are many different colors being used, so I created a simple function (<code>title_color_coder()</code>) to add color to titles or subtitles in a <strong>ggplot</strong>.</p>
<p>Be sure to add the following function to <strong>ggplot</strong> code: <code>theme(plot.title = ggtext::element_markdown())</code></p>
<p>For more information on the <strong>ggtext</strong> package, visit this link: <a href="https://cran.r-project.org/web/packages/ggtext/readme/README.html" class="uri">https://cran.r-project.org/web/packages/ggtext/readme/README.html</a></p>
</div>
<p><br>
<br></p>
<p>The 2022 Formula 1 season brought an overhaul of the technical regulations. The 2022 technical regulations reintroduced the use of <em>ground effect</em> for the first time since 1983. Additionally, teams now had to abide by a <em>financial cost cap</em>. These changes upset the dominance of Mercedes, and seemingly ushered in a new era of dominance by Red Bull. While Ferrari often had the fastest qualifying pace, Red Bull enjoyed a considerable advantage in race pace.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="introduction-to-formula-1.html#cb39-1" aria-hidden="true" tabindex="-1"></a>practice_times <span class="sc">%&gt;%</span></span>
<span id="cb39-2"><a href="introduction-to-formula-1.html#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year <span class="sc">==</span> <span class="dv">2022</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb39-3"><a href="introduction-to-formula-1.html#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(Time_secs_3, Time_secs_2, Time_secs_1), <span class="at">names_to =</span> <span class="st">&#39;practice_session&#39;</span>, <span class="at">values_to =</span> <span class="st">&#39;time&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-4"><a href="introduction-to-formula-1.html#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">practice_session =</span> <span class="fu">str_remove</span>(practice_session, <span class="st">&#39;Time_secs_&#39;</span>),</span>
<span id="cb39-5"><a href="introduction-to-formula-1.html#cb39-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">Year =</span> <span class="fu">factor</span>(Year)) <span class="sc">%&gt;%</span></span>
<span id="cb39-6"><a href="introduction-to-formula-1.html#cb39-6" aria-hidden="true" tabindex="-1"></a>   <span class="fu">group_by</span>(Race, practice_session) <span class="sc">%&gt;%</span></span>
<span id="cb39-7"><a href="introduction-to-formula-1.html#cb39-7" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">track_mean =</span> <span class="fu">mean</span>(time, <span class="at">na.rm =</span> T),</span>
<span id="cb39-8"><a href="introduction-to-formula-1.html#cb39-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">Time_std_track =</span> time <span class="sc">-</span> track_mean) <span class="sc">%&gt;%</span> </span>
<span id="cb39-9"><a href="introduction-to-formula-1.html#cb39-9" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb39-10"><a href="introduction-to-formula-1.html#cb39-10" aria-hidden="true" tabindex="-1"></a>   <span class="fu">group_by</span>(Driver) <span class="sc">%&gt;%</span> </span>
<span id="cb39-11"><a href="introduction-to-formula-1.html#cb39-11" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">driver_n =</span> <span class="fu">n</span>(),</span>
<span id="cb39-12"><a href="introduction-to-formula-1.html#cb39-12" aria-hidden="true" tabindex="-1"></a>          <span class="at">mean =</span> <span class="fu">mean</span>(Time_std_track, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span></span>
<span id="cb39-13"><a href="introduction-to-formula-1.html#cb39-13" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb39-14"><a href="introduction-to-formula-1.html#cb39-14" aria-hidden="true" tabindex="-1"></a>   dplyr<span class="sc">::</span><span class="fu">filter</span>(driver_n <span class="sc">&gt;</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb39-15"><a href="introduction-to-formula-1.html#cb39-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">practice_session =</span> <span class="fu">paste0</span>(<span class="st">&#39;free practice &#39;</span>, practice_session)) <span class="sc">%&gt;%</span>  </span>
<span id="cb39-16"><a href="introduction-to-formula-1.html#cb39-16" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ggplot</span>(<span class="fu">aes</span>(Time_std_track, <span class="at">y =</span> <span class="fu">fct_reorder</span>(Driver, <span class="fu">desc</span>(mean)), <span class="at">col =</span> Driver)) <span class="sc">+</span></span>
<span id="cb39-17"><a href="introduction-to-formula-1.html#cb39-17" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb39-18"><a href="introduction-to-formula-1.html#cb39-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gghighlight</span>(Driver <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;VER&#39;</span>, <span class="st">&#39;LEC&#39;</span>, <span class="st">&#39;SAI&#39;</span>, <span class="st">&#39;PER&#39;</span>), <span class="at">calculate_per_facet =</span> T) <span class="sc">+</span></span>
<span id="cb39-19"><a href="introduction-to-formula-1.html#cb39-19" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb39-20"><a href="introduction-to-formula-1.html#cb39-20" aria-hidden="true" tabindex="-1"></a>   <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Standardized Practice Time (secs)&#39;</span>,</span>
<span id="cb39-21"><a href="introduction-to-formula-1.html#cb39-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">&#39;Driver&#39;</span>,</span>
<span id="cb39-22"><a href="introduction-to-formula-1.html#cb39-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&#39;Standardized Practice Time&#39;</span>,</span>
<span id="cb39-23"><a href="introduction-to-formula-1.html#cb39-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&#39;2022&#39;</span>,</span>
<span id="cb39-24"><a href="introduction-to-formula-1.html#cb39-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">caption =</span> <span class="st">&#39;*Times are subtracted from the average time for each Grand Prix&#39;</span>) <span class="sc">+</span></span>
<span id="cb39-25"><a href="introduction-to-formula-1.html#cb39-25" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">col =</span> <span class="st">&#39;red&#39;</span>) <span class="sc">+</span></span>
<span id="cb39-26"><a href="introduction-to-formula-1.html#cb39-26" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb39-27"><a href="introduction-to-formula-1.html#cb39-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb39-28"><a href="introduction-to-formula-1.html#cb39-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb39-29"><a href="introduction-to-formula-1.html#cb39-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> practice_session) <span class="sc">+</span></span>
<span id="cb39-30"><a href="introduction-to-formula-1.html#cb39-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb39-31"><a href="introduction-to-formula-1.html#cb39-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="st">&#39;&#39;</span>, <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&#39;red&#39;</span>, <span class="st">&#39;navy&#39;</span>, <span class="st">&#39;red&#39;</span>, <span class="st">&#39;navy&#39;</span>))  <span class="sc">+</span></span>
<span id="cb39-32"><a href="introduction-to-formula-1.html#cb39-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="fu">seq</span>(<span class="dv">22</span>, <span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>), <span class="at">col =</span> <span class="st">&#39;grey&#39;</span>, <span class="at">size =</span> <span class="dv">5</span>, <span class="at">alpha =</span>  <span class="fl">0.1</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-32-1.png" width="768" style="display: block; margin: auto;" /></p>
<p><br>
<br></p>
<div class="blackbox">
<div class="center">
<p><strong>How to rotate axis text in ggplot</strong></p>
</div>
<p>At times, you may wish to rotate the text of labels along the x- or y-axis. To rotate the x-axis labels in the plot above, I simply added the following function to the <strong>ggplot</strong>: <code>theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))</code></p>
</div>
<p><br>
<br></p>
<p>The rich got richer and the fast got faster in 2023. Max Verstappen was even more dominant in his third title-winning season. Compared to the previous year, Max was relatively even quicker across all practice sessions during 2023.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="introduction-to-formula-1.html#cb40-1" aria-hidden="true" tabindex="-1"></a>practice_times <span class="sc">%&gt;%</span></span>
<span id="cb40-2"><a href="introduction-to-formula-1.html#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year <span class="sc">==</span> <span class="dv">2023</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb40-3"><a href="introduction-to-formula-1.html#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(Time_secs_3, Time_secs_2, Time_secs_1), <span class="at">names_to =</span> <span class="st">&#39;practice_session&#39;</span>, <span class="at">values_to =</span> <span class="st">&#39;time&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb40-4"><a href="introduction-to-formula-1.html#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">practice_session =</span> <span class="fu">str_remove</span>(practice_session, <span class="st">&#39;Time_secs_&#39;</span>),</span>
<span id="cb40-5"><a href="introduction-to-formula-1.html#cb40-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">Year =</span> <span class="fu">factor</span>(Year)) <span class="sc">%&gt;%</span></span>
<span id="cb40-6"><a href="introduction-to-formula-1.html#cb40-6" aria-hidden="true" tabindex="-1"></a>   <span class="fu">group_by</span>(Race, practice_session) <span class="sc">%&gt;%</span></span>
<span id="cb40-7"><a href="introduction-to-formula-1.html#cb40-7" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">track_mean =</span> <span class="fu">mean</span>(time, <span class="at">na.rm =</span> T),</span>
<span id="cb40-8"><a href="introduction-to-formula-1.html#cb40-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">Time_std_track =</span> time <span class="sc">-</span> track_mean) <span class="sc">%&gt;%</span> </span>
<span id="cb40-9"><a href="introduction-to-formula-1.html#cb40-9" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb40-10"><a href="introduction-to-formula-1.html#cb40-10" aria-hidden="true" tabindex="-1"></a>   <span class="fu">group_by</span>(Driver) <span class="sc">%&gt;%</span> </span>
<span id="cb40-11"><a href="introduction-to-formula-1.html#cb40-11" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">driver_n =</span> <span class="fu">n</span>(),</span>
<span id="cb40-12"><a href="introduction-to-formula-1.html#cb40-12" aria-hidden="true" tabindex="-1"></a>          <span class="at">mean =</span> <span class="fu">mean</span>(Time_std_track, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span></span>
<span id="cb40-13"><a href="introduction-to-formula-1.html#cb40-13" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb40-14"><a href="introduction-to-formula-1.html#cb40-14" aria-hidden="true" tabindex="-1"></a>   dplyr<span class="sc">::</span><span class="fu">filter</span>(driver_n <span class="sc">&gt;</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb40-15"><a href="introduction-to-formula-1.html#cb40-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">practice_session =</span> <span class="fu">paste0</span>(<span class="st">&#39;free practice &#39;</span>, practice_session)) <span class="sc">%&gt;%</span>  </span>
<span id="cb40-16"><a href="introduction-to-formula-1.html#cb40-16" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ggplot</span>(<span class="fu">aes</span>(Time_std_track, <span class="at">y =</span> <span class="fu">fct_reorder</span>(Driver, <span class="fu">desc</span>(mean)), <span class="at">col =</span> Driver)) <span class="sc">+</span></span>
<span id="cb40-17"><a href="introduction-to-formula-1.html#cb40-17" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb40-18"><a href="introduction-to-formula-1.html#cb40-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gghighlight</span>(Driver <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;VER&#39;</span>, <span class="st">&#39;LEC&#39;</span>, <span class="st">&#39;SAI&#39;</span>, <span class="st">&#39;PER&#39;</span>), <span class="at">calculate_per_facet =</span> T) <span class="sc">+</span></span>
<span id="cb40-19"><a href="introduction-to-formula-1.html#cb40-19" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb40-20"><a href="introduction-to-formula-1.html#cb40-20" aria-hidden="true" tabindex="-1"></a>   <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Standardized Practice Time (secs)&#39;</span>,</span>
<span id="cb40-21"><a href="introduction-to-formula-1.html#cb40-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">&#39;Driver&#39;</span>,</span>
<span id="cb40-22"><a href="introduction-to-formula-1.html#cb40-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&#39;Standardized Practice Time&#39;</span>,</span>
<span id="cb40-23"><a href="introduction-to-formula-1.html#cb40-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">subtitle =</span> <span class="st">&#39;2023&#39;</span>,</span>
<span id="cb40-24"><a href="introduction-to-formula-1.html#cb40-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">caption =</span> <span class="st">&#39;*Times are subtracted from the average time for each Grand Prix&#39;</span>) <span class="sc">+</span></span>
<span id="cb40-25"><a href="introduction-to-formula-1.html#cb40-25" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">col =</span> <span class="st">&#39;red&#39;</span>) <span class="sc">+</span></span>
<span id="cb40-26"><a href="introduction-to-formula-1.html#cb40-26" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb40-27"><a href="introduction-to-formula-1.html#cb40-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb40-28"><a href="introduction-to-formula-1.html#cb40-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb40-29"><a href="introduction-to-formula-1.html#cb40-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> practice_session) <span class="sc">+</span></span>
<span id="cb40-30"><a href="introduction-to-formula-1.html#cb40-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb40-31"><a href="introduction-to-formula-1.html#cb40-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="st">&#39;&#39;</span>, <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&#39;red&#39;</span>, <span class="st">&#39;navy&#39;</span>, <span class="st">&#39;red&#39;</span>, <span class="st">&#39;navy&#39;</span>))  <span class="sc">+</span></span>
<span id="cb40-32"><a href="introduction-to-formula-1.html#cb40-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="fu">seq</span>(<span class="dv">23</span>, <span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>), <span class="at">col =</span> <span class="st">&#39;grey&#39;</span>, <span class="at">size =</span> <span class="dv">5</span>, <span class="at">alpha =</span>  <span class="fl">0.1</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-33-1.png" width="768" style="display: block; margin: auto;" /></p>
</div>
<div id="next-chapter" class="section level2 hasAnchor" number="2.5">
<h2><span class="header-section-number">2.5</span> Next Chapter<a href="introduction-to-formula-1.html#next-chapter" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In the next chapter, we will move onto qualifying!</p>
<div style="page-break-after: always;"></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="qualifying.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/01-intro.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
