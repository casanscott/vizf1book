<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Practice times vs Qualifying Times | Visualizing Formula 1 Data</title>
  <meta name="description" content="This is a book documenting data visualizations of Formula 1 data." />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Practice times vs Qualifying Times | Visualizing Formula 1 Data" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a book documenting data visualizations of Formula 1 data." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Practice times vs Qualifying Times | Visualizing Formula 1 Data" />
  
  <meta name="twitter:description" content="This is a book documenting data visualizations of Formula 1 data." />
  

<meta name="author" content="Casan Scott, Ph.D." />


<meta name="date" content="2023-09-30" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="qualifying.html"/>
<link rel="next" href="exploratory-data-analysis-and-modeling.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">An Introduction to Data Visualization using Formula 1 Data</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> url: your book url like https://bookdown.org/yihui/bookdown</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#about-me"><i class="fa fa-check"></i><b>1.1</b> About me</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#organization-of-this-book"><i class="fa fa-check"></i><b>1.2</b> Organization of this book</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#data"><i class="fa fa-check"></i><b>1.3</b> Data</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#data-visualization"><i class="fa fa-check"></i><b>1.4</b> Data Visualization</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-formula-1.html"><a href="introduction-to-formula-1.html"><i class="fa fa-check"></i><b>2</b> Introduction to Formula 1</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-formula-1.html"><a href="introduction-to-formula-1.html#a-formula-1-weekend"><i class="fa fa-check"></i><b>2.1</b> A Formula 1 Weekend</a></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-formula-1.html"><a href="introduction-to-formula-1.html#practice-sessions"><i class="fa fa-check"></i><b>2.2</b> Practice Sessions</a></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-formula-1.html"><a href="introduction-to-formula-1.html#practice-times-by-driver"><i class="fa fa-check"></i><b>2.3</b> Practice Times by Driver</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="qualifying.html"><a href="qualifying.html"><i class="fa fa-check"></i><b>3</b> Qualifying</a>
<ul>
<li class="chapter" data-level="3.1" data-path="qualifying.html"><a href="qualifying.html#distribution-of-qualifying-times-by-grand-prix"><i class="fa fa-check"></i><b>3.1</b> Distribution of Qualifying Times by Grand Prix</a></li>
<li class="chapter" data-level="3.2" data-path="qualifying.html"><a href="qualifying.html#how-does-car-development-progress-over-time"><i class="fa fa-check"></i><b>3.2</b> How does car development progress over time?</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="practice-times-vs-qualifying-times.html"><a href="practice-times-vs-qualifying-times.html"><i class="fa fa-check"></i><b>4</b> Practice times vs Qualifying Times</a>
<ul>
<li class="chapter" data-level="4.1" data-path="practice-times-vs-qualifying-times.html"><a href="practice-times-vs-qualifying-times.html#simple-linear-regression-model-practice-vs-qualifying-times"><i class="fa fa-check"></i><b>4.1</b> Simple Linear Regression Model: Practice vs Qualifying Times</a></li>
<li class="chapter" data-level="4.2" data-path="practice-times-vs-qualifying-times.html"><a href="practice-times-vs-qualifying-times.html#simple-linear-regression-model-qualifying-time-vs-year"><i class="fa fa-check"></i><b>4.2</b> Simple Linear Regression Model: Qualifying time vs Year</a></li>
<li class="chapter" data-level="4.3" data-path="practice-times-vs-qualifying-times.html"><a href="practice-times-vs-qualifying-times.html#interaction-model-how-does-qualifying-time-progression-compare-between-the-australian-grand-prix-and-another-race"><i class="fa fa-check"></i><b>4.3</b> Interaction Model: How does qualifying time progression compare between the Australian Grand Prix and another race?</a></li>
<li class="chapter" data-level="4.4" data-path="practice-times-vs-qualifying-times.html"><a href="practice-times-vs-qualifying-times.html#multilevel-model-are-there-team-trends-nested-within-race-trends-nested-within-yearly-trends"><i class="fa fa-check"></i><b>4.4</b> Multilevel Model: Are there team trends nested within race trends, nested within yearly trends?</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="practice-times-vs-qualifying-times.html"><a href="practice-times-vs-qualifying-times.html#qualifying-times-by-driver"><i class="fa fa-check"></i><b>4.4.1</b> Qualifying times by Driver</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="practice-times-vs-qualifying-times.html"><a href="practice-times-vs-qualifying-times.html#do-practice-times-correlate-to-qualifying-times"><i class="fa fa-check"></i><b>4.5</b> Do practice times correlate to qualifying times?</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="exploratory-data-analysis-and-modeling.html"><a href="exploratory-data-analysis-and-modeling.html"><i class="fa fa-check"></i><b>5</b> Exploratory Data Analysis and Modeling</a>
<ul>
<li class="chapter" data-level="5.1" data-path="exploratory-data-analysis-and-modeling.html"><a href="exploratory-data-analysis-and-modeling.html#plot-overall-trend-starting-position-vs-finish-position"><i class="fa fa-check"></i><b>5.1</b> Plot overall trend: Starting Position vs Finish Position</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="exploratory-data-analysis-and-modeling.html"><a href="exploratory-data-analysis-and-modeling.html#overall-model"><i class="fa fa-check"></i><b>5.1.1</b> Overall model</a></li>
<li class="chapter" data-level="5.1.2" data-path="exploratory-data-analysis-and-modeling.html"><a href="exploratory-data-analysis-and-modeling.html#what-is-the-probability-of-finishing-on-the-podium"><i class="fa fa-check"></i><b>5.1.2</b> What is the probability of finishing on the podium?</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="exploratory-data-analysis-and-modeling.html"><a href="exploratory-data-analysis-and-modeling.html#explore-track-specific-models"><i class="fa fa-check"></i><b>5.2</b> Explore Track Specific Models</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="exploratory-data-analysis-and-modeling.html"><a href="exploratory-data-analysis-and-modeling.html#bahrain"><i class="fa fa-check"></i><b>5.2.1</b> Bahrain</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="exploratory-data-analysis-and-modeling.html"><a href="exploratory-data-analysis-and-modeling.html#saudi-arabian-grand-prix"><i class="fa fa-check"></i><b>5.3</b> Saudi Arabian Grand Prix</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="exploratory-data-analysis-and-modeling.html"><a href="exploratory-data-analysis-and-modeling.html#saudi-arabia"><i class="fa fa-check"></i><b>5.3.1</b> Saudi Arabia</a></li>
<li class="chapter" data-level="5.3.2" data-path="exploratory-data-analysis-and-modeling.html"><a href="exploratory-data-analysis-and-modeling.html#monaco"><i class="fa fa-check"></i><b>5.3.2</b> Monaco</a></li>
<li class="chapter" data-level="5.3.3" data-path="exploratory-data-analysis-and-modeling.html"><a href="exploratory-data-analysis-and-modeling.html#brazil"><i class="fa fa-check"></i><b>5.3.3</b> Brazil</a></li>
<li class="chapter" data-level="5.3.4" data-path="exploratory-data-analysis-and-modeling.html"><a href="exploratory-data-analysis-and-modeling.html#spain"><i class="fa fa-check"></i><b>5.3.4</b> Spain</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="blocks.html"><a href="blocks.html"><i class="fa fa-check"></i><b>6</b> Blocks</a>
<ul>
<li class="chapter" data-level="6.1" data-path="blocks.html"><a href="blocks.html#equations"><i class="fa fa-check"></i><b>6.1</b> Equations</a></li>
<li class="chapter" data-level="6.2" data-path="blocks.html"><a href="blocks.html#theorems-and-proofs"><i class="fa fa-check"></i><b>6.2</b> Theorems and proofs</a></li>
<li class="chapter" data-level="6.3" data-path="blocks.html"><a href="blocks.html#callout-blocks"><i class="fa fa-check"></i><b>6.3</b> Callout blocks</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="sharing-your-book.html"><a href="sharing-your-book.html"><i class="fa fa-check"></i><b>7</b> Sharing your book</a>
<ul>
<li class="chapter" data-level="7.1" data-path="sharing-your-book.html"><a href="sharing-your-book.html#publishing"><i class="fa fa-check"></i><b>7.1</b> Publishing</a></li>
<li class="chapter" data-level="7.2" data-path="sharing-your-book.html"><a href="sharing-your-book.html#pages"><i class="fa fa-check"></i><b>7.2</b> 404 pages</a></li>
<li class="chapter" data-level="7.3" data-path="sharing-your-book.html"><a href="sharing-your-book.html#metadata-for-sharing"><i class="fa fa-check"></i><b>7.3</b> Metadata for sharing</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Visualizing Formula 1 Data</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="practice-times-vs-qualifying-times" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Chapter 4</span> Practice times vs Qualifying Times<a href="practice-times-vs-qualifying-times.html#practice-times-vs-qualifying-times" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>As mentioned in previous chapters, some runs during practice sessions can often be used to simulate qualifying or race pace. For instance, FP1 is typically used to test the car and ensure it is working as expected, while FP2 and FP3 are often used to test the car’s performance on <em>long runs</em> and the car’s speed over laps, respectively. Unsurprisingly, one would expect practice times to correlate to qualifying times. This chapter will take a deep-dive into that relationship and try to better understand it.</p>
<p>Below, we can plot the best time set during FP1 versus the best time during Q1. For the most part, there is a near 1:1 ratio. However, there are several outlying clusters of times that don’t follow a 1:1 ratio.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="practice-times-vs-qualifying-times.html#cb1-1" aria-hidden="true" tabindex="-1"></a>combined_historical <span class="sc">%&gt;%</span></span>
<span id="cb1-2"><a href="practice-times-vs-qualifying-times.html#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(Time_1, Q1)) <span class="sc">+</span></span>
<span id="cb1-3"><a href="practice-times-vs-qualifying-times.html#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb1-4"><a href="practice-times-vs-qualifying-times.html#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb1-5"><a href="practice-times-vs-qualifying-times.html#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Best Time during FP1 (secs)&#39;</span>,</span>
<span id="cb1-6"><a href="practice-times-vs-qualifying-times.html#cb1-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Best Time during Q1 (secs)&#39;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>One of these outlying clusters is data collected from the Malaysian Grand Prix in 2017. Free Practice 1 of the Malaysian Grand Prix in 2017 was delayed for half an hour due to heavy rain at the Sepang International Circuit. Max Verstappen eventually finished the wet FP1 session with a fastest time of 1:48.962. Qualifying was not impacted by rain, and Lewis Hamilton took pole with a time of 1:30.076. In the figure below, we can clearly see this relationship displayed by the <em>flatter</em> slope for the Malaysian Grand Prix in 2017.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="practice-times-vs-qualifying-times.html#cb2-1" aria-hidden="true" tabindex="-1"></a>combined_historical <span class="sc">%&gt;%</span></span>
<span id="cb2-2"><a href="practice-times-vs-qualifying-times.html#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">malaysia_2017 =</span> <span class="fu">ifelse</span>(track <span class="sc">==</span> <span class="st">&#39;malaysia&#39;</span> <span class="sc">&amp;</span> year <span class="sc">==</span> <span class="dv">2017</span>, <span class="st">&#39;Malaysia 2017&#39;</span>, <span class="st">&#39;No&#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb2-3"><a href="practice-times-vs-qualifying-times.html#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(Time_1, Q1)) <span class="sc">+</span></span>
<span id="cb2-4"><a href="practice-times-vs-qualifying-times.html#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">col =</span> malaysia_2017), <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">show.legend =</span> T) <span class="sc">+</span></span>
<span id="cb2-5"><a href="practice-times-vs-qualifying-times.html#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb2-6"><a href="practice-times-vs-qualifying-times.html#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Best Time during FP1 (secs)&#39;</span>,</span>
<span id="cb2-7"><a href="practice-times-vs-qualifying-times.html#cb2-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Best Time during Q1 (secs)&#39;</span>) <span class="sc">+</span></span>
<span id="cb2-8"><a href="practice-times-vs-qualifying-times.html#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gghighlight</span>(malaysia_2017 <span class="sc">==</span> <span class="st">&#39;Malaysia 2017&#39;</span>, <span class="at">use_direct_label =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb2-9"><a href="practice-times-vs-qualifying-times.html#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="st">&#39;&#39;</span>, <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&#39;Malaysia 2017&#39;</span> <span class="ot">=</span> <span class="st">&#39;black&#39;</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<div class="blackbox">
<div class="center">
<p><strong>How to create a custom color scale in ggplot</strong></p>
</div>
<p>At times, creating custom color scales can be very convenient. The simplest way to create a custom color scale is by using <code>scale_color_manual()</code>. In the figure above, I used the following function to color data for <em>Malaysia 2017</em> black:</p>
<p><code>scale_color_manual('', values = c('Malaysia 2017' = 'black'))</code></p>
<p>For more information on using <code>scale_color_manual()</code> in <strong>ggplot2</strong>, visit this link: <a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="uri">https://ggplot2.tidyverse.org/reference/scale_manual.html</a></p>
</div>
<p>I want to estimate the relationship between FP1 times and Q1 times, but these outlying clusters are compromising the relationship. In the Malaysia example above, rain was the root cause for a distinctly different slope (FP1 vs Q1). I want to remove these abnormal sessions, but it would be quite tedious to research all FP1 or Q1 sessions that were impacted by rain. However, I could try and utilize exploratory data analysis (EDA) and data wrangling to filter out abnormal times.</p>
<p>For the vast majority of Grands Prix, the slope of this relationship (FP1 times vs Q1 times) is slightly larger than 1. I’ll use a histogram below to plot the distribution of ratios of all FP1:Q1 times.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="practice-times-vs-qualifying-times.html#cb3-1" aria-hidden="true" tabindex="-1"></a>combined_historical <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="practice-times-vs-qualifying-times.html#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ratio =</span> Time_1 <span class="sc">/</span> Q1) <span class="sc">%&gt;%</span> </span>
<span id="cb3-3"><a href="practice-times-vs-qualifying-times.html#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(ratio)) <span class="sc">+</span> </span>
<span id="cb3-4"><a href="practice-times-vs-qualifying-times.html#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">100</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb3-5"><a href="practice-times-vs-qualifying-times.html#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb3-6"><a href="practice-times-vs-qualifying-times.html#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Ratio of FP1:Q1 Times&#39;</span>,</span>
<span id="cb3-7"><a href="practice-times-vs-qualifying-times.html#cb3-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Distribution of all Ratios of FP1:Q1 Times&#39;</span>,</span>
<span id="cb3-8"><a href="practice-times-vs-qualifying-times.html#cb3-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2014 - 2022&#39;</span>) <span class="sc">+</span></span>
<span id="cb3-9"><a href="practice-times-vs-qualifying-times.html#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="fl">0.7</span>, <span class="fl">1.3</span>), </span>
<span id="cb3-10"><a href="practice-times-vs-qualifying-times.html#cb3-10" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks =</span> <span class="fu">c</span>(<span class="fl">0.7</span>, <span class="fl">0.8</span>, <span class="fl">0.9</span>, <span class="dv">1</span>, <span class="fl">1.1</span>, <span class="fl">1.2</span>, <span class="fl">1.3</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>There are three separate peaks in this distribution:</p>
<ul>
<li>slightly larger than 1.0</li>
<li>just below 0.90</li>
<li>at approximately 1.15</li>
</ul>
<p>Knowing this information, I will try to filter out any ratios lower than 0.95 or larger than 1.10.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="practice-times-vs-qualifying-times.html#cb4-1" aria-hidden="true" tabindex="-1"></a>combined_historical <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="practice-times-vs-qualifying-times.html#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ratio =</span> Time_1 <span class="sc">/</span> Q1) <span class="sc">%&gt;%</span> </span>
<span id="cb4-3"><a href="practice-times-vs-qualifying-times.html#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ratio <span class="sc">&gt;=</span> <span class="fl">0.95</span> <span class="sc">&amp;</span> ratio <span class="sc">&lt;=</span> <span class="fl">1.10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-4"><a href="practice-times-vs-qualifying-times.html#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(Time_1, Q1)) <span class="sc">+</span></span>
<span id="cb4-5"><a href="practice-times-vs-qualifying-times.html#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb4-6"><a href="practice-times-vs-qualifying-times.html#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb4-7"><a href="practice-times-vs-qualifying-times.html#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Best Time during FP1 (secs)&#39;</span>,</span>
<span id="cb4-8"><a href="practice-times-vs-qualifying-times.html#cb4-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Best Time during Q1 (secs)&#39;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>Much better! There’s still a few funky outliers, but I feel comfortable that this distribution represents the typical Formula 1 weekend. While this graph is certainly strong evidence to support that FP1 times are <em>correlated</em> to Q1 times, I also want quantify this relationship. Next, I’ll use a <strong>simple linear regression model</strong> to estimate the relationship between FP1 and Q1 times.</p>
<div id="simple-linear-regression-model-practice-vs-qualifying-times" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Simple Linear Regression Model: Practice vs Qualifying Times<a href="practice-times-vs-qualifying-times.html#simple-linear-regression-model-practice-vs-qualifying-times" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>People build models for a number of different reasons. These reasons generally fall into one of these three groups:</p>
<ul>
<li>models used for inference (i.e. using a model to answer questions)</li>
<li>predictive models</li>
<li>models used for both inference and prediction</li>
</ul>
<p>Inferential models utilize mathematical models to make general claims from your collected data. In our Formula 1 example, we have collected FP1 and Q1 times from 2014 to 2022.</p>
<p>Dr. Andrew Gelman summarizes regression much more succinctly than I ever could:</p>
<p><em>Regression is a method that allows researchers to summarize how predictions or average values of an outcome vary across individuals defined by a set of predictors.</em></p>
<p>The most simple <strong>linear regression</strong> model uses a single predictor variable. In our model, we will use a single predictor (FP1 times). We will use linear regression to fit a linear relationship (straight line) between the predictor variable (FP1 times) and the response variable (Q1 times). Using the predictor variable (FP1) and response variable (Q1), we will estimate the <em>intercept</em>, <em>slope</em>, and <em>error</em> using a model.</p>
<p>The formula for this simple linear regression model is:</p>
<p><span class="math display">\[ Q1 \ time = Intercept + Slope * FP1 \ time + error \]</span></p>
<p>We will use the filtered dataset (i.e. ratios between 0.95 and 1.10). Below, I’ll re-write this data to a new dataframe.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="practice-times-vs-qualifying-times.html#cb5-1" aria-hidden="true" tabindex="-1"></a>fp1_v_q1_clean <span class="ot">&lt;-</span> combined_historical <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="practice-times-vs-qualifying-times.html#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ratio =</span> Time_1 <span class="sc">/</span> Q1) <span class="sc">%&gt;%</span> </span>
<span id="cb5-3"><a href="practice-times-vs-qualifying-times.html#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ratio <span class="sc">&gt;=</span> <span class="fl">0.95</span> <span class="sc">&amp;</span> ratio <span class="sc">&lt;=</span> <span class="fl">1.10</span>)</span></code></pre></div>
<p>To fit this model, we will use the <code>lm()</code> function.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="practice-times-vs-qualifying-times.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fir the linear regression model</span></span>
<span id="cb6-2"><a href="practice-times-vs-qualifying-times.html#cb6-2" aria-hidden="true" tabindex="-1"></a>fp1_v_q1.model <span class="ot">&lt;-</span> <span class="fu">lm</span>(Q1 <span class="sc">~</span> Time_1, <span class="at">data =</span> fp1_v_q1_clean)</span></code></pre></div>
<div class="blackbox">
<div class="center">
<p><strong>How to fit a simple linear regression model in R</strong></p>
</div>
<p>To fit a simple linear regression model in R, we can use the <code>lm()</code> function.</p>
<p>The <code>lm()</code> function takes uses the following notation:</p>
<p><code>lm(response variable ~ predictor variable(s), data source)</code></p>
<p>For more information on using <code>lm()</code>, visit this link: <a href="https://www.rdocumentation.org/packages/stats/versions/3.6.2/topics/lm" class="uri">https://www.rdocumentation.org/packages/stats/versions/3.6.2/topics/lm</a></p>
</div>
<p>To summarize the output from the linear model, I will use the <code>summary()</code> function.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="practice-times-vs-qualifying-times.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fp1_v_q1.model)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = Q1 ~ Time_1, data = fp1_v_q1_clean)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -6.6335 -0.5665  0.0299  0.6212  8.2426 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 1.162065   0.167450    6.94 4.85e-12 ***
## Time_1      0.964008   0.001869  515.83  &lt; 2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 1.244 on 2834 degrees of freedom
## Multiple R-squared:  0.9895, Adjusted R-squared:  0.9895 
## F-statistic: 2.661e+05 on 1 and 2834 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>The summary output from this model contains a lot of information about this model fit. This list gives a bit more information about the most noteworthy items in this output:</p>
<ul>
<li>The model formula can be found under <em>Call</em>.</li>
<li>The quantiles of the residuals are listed below the model formula.</li>
<li>the coefficient values are the model estimates for intercept and slope. Each coefficient also has a standard error, t-values, and statistical significance.</li>
<li>The residual standard error</li>
<li>degrees of freedom</li>
<li>R-squared</li>
<li>F-statistic</li>
<li>p-value</li>
</ul>
<p>In this particular model, the <em>Intercept</em> is somewhat meaningless. The intercept describes the value of the response (Q1 times) when the predictor variable (FP1 time) is = 0. However, in this example, there is no situation where FP1 is = 0.</p>
<p>We can interpret the slope as:</p>
<p><em>A driver’s Q1 time is expected to be about 0.036 seconds faster than their best time during Free Practice 1, on average.</em></p>
<p>I arrived at 0.036 seconds by subtracting the slope from 1.</p>
<p>The <strong>R2</strong> is another important metric from this output. The <strong>R2</strong> value, also known as the coefficient of determination, is the proportion of the variance in Q1 times that are explained by FP1 time. In this case, the R2 = 0.989, which can be interpreted as ~ 98.9% of the variance in a driver’s Q1 time can be explained by their FP1 time.</p>
<p>The F-statistic is of little use to us in this case. The <em>F-statistic</em> is the test statistic for the <em>F-test</em>, which evaluates whether this particular model provides a better fit to our data than a model that uses no predictor variables. If the <em>p-value</em> is less than 0.05 (which it is), we conclude that this model is better than a model using no predictor variables. But, we already knew this linear relationship was legit!</p>
<p>For our purposes, we should be most concerned with the R2 and the slope of this model. The R2 explains the amount of variance our model explains, while the slope describes how FP1 times and Q1 times related. We can apply this same approach to a different comparison: FP3 vs fastest qualifying time. Because FP3 is used for qualifying simulations, it may be more representative of a car’s true qualifying pace. Using the fastest time in qualifying is likely a better measure because front-running teams likely take less risks during Q1.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="practice-times-vs-qualifying-times.html#cb9-1" aria-hidden="true" tabindex="-1"></a>fp3_v_q_clean <span class="ot">&lt;-</span> combined_historical <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="practice-times-vs-qualifying-times.html#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ratio =</span> Time_grid <span class="sc">/</span> Time_3) <span class="sc">%&gt;%</span> </span>
<span id="cb9-3"><a href="practice-times-vs-qualifying-times.html#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ratio <span class="sc">&gt;=</span> <span class="fl">0.95</span> <span class="sc">&amp;</span> ratio <span class="sc">&lt;=</span> <span class="fl">1.10</span>)</span>
<span id="cb9-4"><a href="practice-times-vs-qualifying-times.html#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="practice-times-vs-qualifying-times.html#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Fir the linear regression model</span></span>
<span id="cb9-6"><a href="practice-times-vs-qualifying-times.html#cb9-6" aria-hidden="true" tabindex="-1"></a>fp3_v_q.model <span class="ot">&lt;-</span> <span class="fu">lm</span>(Time_grid <span class="sc">~</span> Time_3, <span class="at">data =</span> fp3_v_q_clean)</span>
<span id="cb9-7"><a href="practice-times-vs-qualifying-times.html#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="practice-times-vs-qualifying-times.html#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fp3_v_q.model)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = Time_grid ~ Time_3, data = fp3_v_q_clean)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -4.6170 -0.4718 -0.0663  0.3605 11.2914 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 0.135132   0.139314    0.97    0.332    
## Time_3      0.987703   0.001567  630.16   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 1.106 on 3050 degrees of freedom
## Multiple R-squared:  0.9924, Adjusted R-squared:  0.9924 
## F-statistic: 3.971e+05 on 1 and 3050 DF,  p-value: &lt; 2.2e-16</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="practice-times-vs-qualifying-times.html#cb11-1" aria-hidden="true" tabindex="-1"></a>combined_historical <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="practice-times-vs-qualifying-times.html#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ratio =</span> Time_grid <span class="sc">/</span> Time_3) <span class="sc">%&gt;%</span> </span>
<span id="cb11-3"><a href="practice-times-vs-qualifying-times.html#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ratio <span class="sc">&gt;=</span> <span class="fl">0.95</span> <span class="sc">&amp;</span> ratio <span class="sc">&lt;=</span> <span class="fl">1.10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb11-4"><a href="practice-times-vs-qualifying-times.html#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(Time_3, Time_grid)) <span class="sc">+</span></span>
<span id="cb11-5"><a href="practice-times-vs-qualifying-times.html#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb11-6"><a href="practice-times-vs-qualifying-times.html#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb11-7"><a href="practice-times-vs-qualifying-times.html#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Best Time during FP3 (secs)&#39;</span>,</span>
<span id="cb11-8"><a href="practice-times-vs-qualifying-times.html#cb11-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Best Time during Qualifying (secs)&#39;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
</div>
<div id="simple-linear-regression-model-qualifying-time-vs-year" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Simple Linear Regression Model: Qualifying time vs Year<a href="practice-times-vs-qualifying-times.html#simple-linear-regression-model-qualifying-time-vs-year" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We can try using a linear regression model to model this relationship.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="practice-times-vs-qualifying-times.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filter times to include only clean Australian data</span></span>
<span id="cb12-2"><a href="practice-times-vs-qualifying-times.html#cb12-2" aria-hidden="true" tabindex="-1"></a>aus_quali_times <span class="ot">&lt;-</span> starting_and_ending_time_clean <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="practice-times-vs-qualifying-times.html#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(track <span class="sc">==</span> <span class="st">&#39;australia&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-4"><a href="practice-times-vs-qualifying-times.html#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rain =</span> <span class="fu">ifelse</span>(year <span class="sc">==</span> <span class="dv">2014</span> <span class="sc">&amp;</span> Time_grid_secs <span class="sc">&gt;</span> <span class="dv">100</span>, <span class="st">&#39;rain during Q2&#39;</span>, <span class="st">&#39; &#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb12-5"><a href="practice-times-vs-qualifying-times.html#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rain <span class="sc">==</span> <span class="st">&#39; &#39;</span>,</span>
<span id="cb12-6"><a href="practice-times-vs-qualifying-times.html#cb12-6" aria-hidden="true" tabindex="-1"></a>         <span class="sc">!</span><span class="fu">is.na</span>(Time_grid_secs))</span>
<span id="cb12-7"><a href="practice-times-vs-qualifying-times.html#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="practice-times-vs-qualifying-times.html#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="co"># fit linear model</span></span>
<span id="cb12-9"><a href="practice-times-vs-qualifying-times.html#cb12-9" aria-hidden="true" tabindex="-1"></a>aus.lm <span class="ot">&lt;-</span> <span class="fu">lm</span>(Time_grid_secs <span class="sc">~</span> year, aus_quali_times)</span></code></pre></div>
<p>Below is a summary of the model output.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="practice-times-vs-qualifying-times.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(aus.lm)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = Time_grid_secs ~ year, data = aus_quali_times)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -3.4630 -1.1580 -0.0618  0.8214  5.1566 
## 
## Coefficients:
##               Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 3009.84404  146.31811   20.57   &lt;2e-16 ***
## year          -1.44977    0.07252  -19.99   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 1.778 on 116 degrees of freedom
## Multiple R-squared:  0.775,  Adjusted R-squared:  0.7731 
## F-statistic: 399.7 on 1 and 116 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>How do we interpret these results?</p>
<p>The summary output from this model contains many different descriptors of the fit. Working our way down the summary:</p>
<ul>
<li>At the top, we see the model formula and dataframe under “Call:”</li>
<li>Below that, the quantiles of the residuals are listed.</li>
<li>Next we see coefficient values, along with their standard error, t values, and statistical significance.</li>
<li>Last, we see the residual standard error, degrees of freedom, R-squared, F-statistic, and p-value.</li>
</ul>
<p>Our model fitted line equation is simply:</p>
<p><span class="math display">\[ time_Q \sim 3009 - 1.45 * year + \epsilon\]</span></p>
<p>Of most importance are the <strong>coefficient estimates, residual standard error, and R2</strong>.</p>
<p>For this particular model, the intercept isn’t useful. It tells us the estimated mean qualifying time for the year zero. A year zero does not exist in the <em>Anno Domini</em> calendar year system (the year 1 BC is followed directly by year AD 1), so not helpful! Sometimes the intercept is important, so don’t just rule it out.</p>
<p>We can interpret the slope estimate like this:</p>
<p><strong>Slope</strong>: Since the beginning of the hybrid era (2014), qualifying times in Australia decrease by 1.45 seconds per year, on average.</p>
<p>The <strong>R2</strong> value (coefficient of determination) is the proportion of the variance in Australian qualifying times that can be explained by yearly progression. In this case, the R2 = 0.77, which can be interpreted as 77% of the variance in qualifying times can be explained by the year.</p>
<p>An approximate interpretation of the <strong>residual standard error/deviation (RSE)</strong> is: A year’s qualifying times will deviate from the linear regression model fit line by 1.78 seconds, on average.</p>
<p>Above we described the slope point estimate as: <em>Since the beginning of the hybrid era (2014), qualifying times in Australia decrease by 1.45 seconds per year, on average.</em> But, how are sure are we of this number? A confidence interval allows us to also describe the uncertainty in that estimate. Below, I’ll calculate the 95% confidence interval around the slope estimate, and interpret it.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="practice-times-vs-qualifying-times.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">confint</span>(aus.lm)</span></code></pre></div>
<pre><code>##                   2.5 %     97.5 %
## (Intercept) 2720.042578 3299.64549
## year          -1.593407   -1.30614</code></pre>
<p><strong>95% Confidence Interval around the Slope</strong>: Since the beginning of the hybrid era (2014), qualifying times in Australia decrease by 1.45 seconds per year, on average. We have 95% confidence that the true average decrease in Australian qualifying times per year is between 1.31 and 1.59 seconds, on average.</p>
<p>Let’s revisit the earlier plot of Australian Grand Prix qualifying times, with a best-fit line included. This line describes the linear regression model’s estimate of average qualifying time for each year of the race. Like we did with our slope estimate, we should describe our uncertainty around this line using a confidence and prediction interval.</p>
<p><strong>The confidence interval is uncertainty surrounding a <em>mean response</em>, and the prediction interval is uncertainty surrounding a prediction of a <em>future observation</em>.</strong></p>
<p>The interpretation of the <strong>95% confidence interval</strong> of a predicted value is: <em>“95% of intervals of this form will contain the expected value of average qualifying time given a particular year”.</em></p>
<p>The interpretation of the <strong>95% prediction interval</strong> of a predicted value is: <em>“95% of intervals of this form will contain the true qualifying time for this particular year”</em></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="practice-times-vs-qualifying-times.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb17-2"><a href="practice-times-vs-qualifying-times.html#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="practice-times-vs-qualifying-times.html#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate the 95% confidence interval for the fit line</span></span>
<span id="cb17-4"><a href="practice-times-vs-qualifying-times.html#cb17-4" aria-hidden="true" tabindex="-1"></a>aus_aug <span class="ot">&lt;-</span> <span class="fu">augment</span>(aus.lm, <span class="at">data =</span> aus_quali_times, <span class="at">interval =</span> <span class="st">&quot;confidence&quot;</span>, <span class="at">se_fit =</span> T)</span>
<span id="cb17-5"><a href="practice-times-vs-qualifying-times.html#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="practice-times-vs-qualifying-times.html#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate the 95% prediction interval for the fit line</span></span>
<span id="cb17-7"><a href="practice-times-vs-qualifying-times.html#cb17-7" aria-hidden="true" tabindex="-1"></a>aus_aug_pr <span class="ot">&lt;-</span> <span class="fu">augment</span>(aus.lm, <span class="at">data =</span> aus_quali_times, <span class="at">interval =</span> <span class="st">&quot;prediction&quot;</span>, <span class="at">se_fit =</span> T) <span class="sc">%&gt;%</span></span>
<span id="cb17-8"><a href="practice-times-vs-qualifying-times.html#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="fu">rename</span>(<span class="st">&quot;lower_PI&quot;</span> <span class="ot">=</span> <span class="st">&quot;.lower&quot;</span>, <span class="st">&quot;upper_PI&quot;</span> <span class="ot">=</span> <span class="st">&quot;.upper&quot;</span>)</span>
<span id="cb17-9"><a href="practice-times-vs-qualifying-times.html#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="practice-times-vs-qualifying-times.html#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="co"># combine the intervals</span></span>
<span id="cb17-11"><a href="practice-times-vs-qualifying-times.html#cb17-11" aria-hidden="true" tabindex="-1"></a>aus_aug <span class="ot">&lt;-</span> aus_aug <span class="sc">%&gt;%</span></span>
<span id="cb17-12"><a href="practice-times-vs-qualifying-times.html#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="fu">bind_cols</span>(aus_aug_pr <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(lower_PI, upper_PI))</span>
<span id="cb17-13"><a href="practice-times-vs-qualifying-times.html#cb17-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-14"><a href="practice-times-vs-qualifying-times.html#cb17-14" aria-hidden="true" tabindex="-1"></a>aus_aug <span class="sc">%&gt;%</span> </span>
<span id="cb17-15"><a href="practice-times-vs-qualifying-times.html#cb17-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, Time_grid_secs)) <span class="sc">+</span></span>
<span id="cb17-16"><a href="practice-times-vs-qualifying-times.html#cb17-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">seed=</span> <span class="dv">123</span>, <span class="at">h =</span> <span class="dv">0</span>, <span class="at">w =</span> <span class="fl">0.3</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb17-17"><a href="practice-times-vs-qualifying-times.html#cb17-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_smooth</span>(<span class="at">method =</span> <span class="st">&#39;lm&#39;</span>, <span class="at">se =</span> F, <span class="at">size =</span> <span class="fl">0.3</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb17-18"><a href="practice-times-vs-qualifying-times.html#cb17-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb17-19"><a href="practice-times-vs-qualifying-times.html#cb17-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Year&#39;</span>,</span>
<span id="cb17-20"><a href="practice-times-vs-qualifying-times.html#cb17-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Best Qualifying Time (secs)&#39;</span>,</span>
<span id="cb17-21"><a href="practice-times-vs-qualifying-times.html#cb17-21" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Australian Grand Prix Qualifying&#39;</span>,</span>
<span id="cb17-22"><a href="practice-times-vs-qualifying-times.html#cb17-22" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;Linear Model, 95% CI, and 95% PI (2014 - 2022)&#39;</span>) <span class="sc">+</span></span>
<span id="cb17-23"><a href="practice-times-vs-qualifying-times.html#cb17-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">2014</span>, <span class="dv">2015</span>, <span class="dv">2016</span>, <span class="dv">2017</span>, <span class="dv">2018</span>, <span class="dv">2019</span>, <span class="dv">2022</span>)) <span class="sc">+</span></span>
<span id="cb17-24"><a href="practice-times-vs-qualifying-times.html#cb17-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> lower_PI, <span class="at">ymax =</span> upper_PI), <span class="at">fill =</span> <span class="st">&#39;grey&#39;</span>, <span class="at">alpha =</span> <span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb17-25"><a href="practice-times-vs-qualifying-times.html#cb17-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> .lower, <span class="at">ymax =</span> .upper), <span class="at">fill =</span> <span class="st">&#39;grey&#39;</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb17-26"><a href="practice-times-vs-qualifying-times.html#cb17-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb17-27"><a href="practice-times-vs-qualifying-times.html#cb17-27" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
</div>
<div id="interaction-model-how-does-qualifying-time-progression-compare-between-the-australian-grand-prix-and-another-race" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Interaction Model: How does qualifying time progression compare between the Australian Grand Prix and another race?<a href="practice-times-vs-qualifying-times.html#interaction-model-how-does-qualifying-time-progression-compare-between-the-australian-grand-prix-and-another-race" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To answer this question, we can take a similar modeling approach for another race. Let’s take a look at the Monaco Grand Prix. I’ll run through the previous modeling steps below.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="practice-times-vs-qualifying-times.html#cb18-1" aria-hidden="true" tabindex="-1"></a>starting_and_ending_time_clean <span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="practice-times-vs-qualifying-times.html#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(track <span class="sc">==</span> <span class="st">&#39;monaco&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-3"><a href="practice-times-vs-qualifying-times.html#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, Time_grid_secs)) <span class="sc">+</span></span>
<span id="cb18-4"><a href="practice-times-vs-qualifying-times.html#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">h =</span> <span class="dv">0</span>, <span class="at">w =</span> <span class="fl">0.3</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb18-5"><a href="practice-times-vs-qualifying-times.html#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb18-6"><a href="practice-times-vs-qualifying-times.html#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Year&#39;</span>,</span>
<span id="cb18-7"><a href="practice-times-vs-qualifying-times.html#cb18-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Best Qualifying Time (secs)&#39;</span>,</span>
<span id="cb18-8"><a href="practice-times-vs-qualifying-times.html#cb18-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Monaco Grand Prix Qualifying&#39;</span>,</span>
<span id="cb18-9"><a href="practice-times-vs-qualifying-times.html#cb18-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2014 - 2022&#39;</span>) <span class="sc">+</span></span>
<span id="cb18-10"><a href="practice-times-vs-qualifying-times.html#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">2014</span>, <span class="dv">2015</span>, <span class="dv">2016</span>, <span class="dv">2017</span>, <span class="dv">2018</span>, <span class="dv">2019</span>, <span class="dv">2020</span>, <span class="dv">2021</span>, <span class="dv">2022</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p>Interesting! We did not have data for Australia in 2020 and 2021 (due to the pandemic). In 2022, the new ground-effects regulations were introduced. Because we were missing data for 2020 and 2021, our model assumed a constant decrease in qualifying times.</p>
<p>Compare this to Monaco, where we at least had data for 2021. Progression does appear to steadily decrease through 2021, but time then increase in 2022 as the new regulations are introduced. So, if we wish to compare time progression, we should probably limit the data to one set of regulations.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="practice-times-vs-qualifying-times.html#cb19-1" aria-hidden="true" tabindex="-1"></a>starting_and_ending_time_clean <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="practice-times-vs-qualifying-times.html#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(track <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;australia&#39;</span>, <span class="st">&#39;monaco&#39;</span>),</span>
<span id="cb19-3"><a href="practice-times-vs-qualifying-times.html#cb19-3" aria-hidden="true" tabindex="-1"></a>         year <span class="sc">&lt;</span> <span class="dv">2022</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-4"><a href="practice-times-vs-qualifying-times.html#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, Time_grid_secs, <span class="at">col =</span> track)) <span class="sc">+</span></span>
<span id="cb19-5"><a href="practice-times-vs-qualifying-times.html#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">h =</span> <span class="dv">0</span>, <span class="at">w =</span> <span class="fl">0.3</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb19-6"><a href="practice-times-vs-qualifying-times.html#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb19-7"><a href="practice-times-vs-qualifying-times.html#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Year&#39;</span>,</span>
<span id="cb19-8"><a href="practice-times-vs-qualifying-times.html#cb19-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Best Qualifying Time (secs)&#39;</span>,</span>
<span id="cb19-9"><a href="practice-times-vs-qualifying-times.html#cb19-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="fu">title_color_coder</span>(<span class="st">&quot;&quot;</span>, <span class="st">&quot;Australia&quot;</span>, <span class="st">&#39;#F8766D&#39;</span>, <span class="st">&quot; vs &quot;</span>, <span class="st">&quot;Monaco&quot;</span>, <span class="st">&#39;#00BFC4&#39;</span> ,<span class="st">&quot; Qualifying Time Progression&quot;</span>), </span>
<span id="cb19-10"><a href="practice-times-vs-qualifying-times.html#cb19-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2014 - 2022&#39;</span>,</span>
<span id="cb19-11"><a href="practice-times-vs-qualifying-times.html#cb19-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="st">&#39;&#39;</span>) <span class="sc">+</span> <span class="co"># use the title_color_coder() function</span></span>
<span id="cb19-12"><a href="practice-times-vs-qualifying-times.html#cb19-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> track, <span class="at">scales=</span> <span class="st">&#39;free_y&#39;</span>) <span class="sc">+</span></span>
<span id="cb19-13"><a href="practice-times-vs-qualifying-times.html#cb19-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">2014</span>, <span class="dv">2015</span>, <span class="dv">2016</span>, <span class="dv">2017</span>, <span class="dv">2018</span>, <span class="dv">2019</span>, <span class="dv">2020</span>, <span class="dv">2021</span>)) <span class="sc">+</span> </span>
<span id="cb19-14"><a href="practice-times-vs-qualifying-times.html#cb19-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb19-15"><a href="practice-times-vs-qualifying-times.html#cb19-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb19-16"><a href="practice-times-vs-qualifying-times.html#cb19-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb19-17"><a href="practice-times-vs-qualifying-times.html#cb19-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> ggtext<span class="sc">::</span><span class="fu">element_markdown</span>()) <span class="do">## render the provided text as markdown/html</span></span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p>To quantitatively compare these two progression trends, we can build linear models for each race and compare the output. We should probably remove 2014 data (because Australia times were compromised by the rain), and 2021 data (because the Australian Grand Prix wasn’t held). Below, I’ll re-plot the scatterplot with best-fit linear model lines for each race.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="practice-times-vs-qualifying-times.html#cb20-1" aria-hidden="true" tabindex="-1"></a>starting_and_ending_time_clean <span class="sc">%&gt;%</span></span>
<span id="cb20-2"><a href="practice-times-vs-qualifying-times.html#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(track <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;australia&#39;</span>, <span class="st">&#39;monaco&#39;</span>),</span>
<span id="cb20-3"><a href="practice-times-vs-qualifying-times.html#cb20-3" aria-hidden="true" tabindex="-1"></a>         year <span class="sc">&gt;</span> <span class="dv">2014</span> <span class="sc">&amp;</span> year <span class="sc">&lt;</span> <span class="dv">2020</span>) <span class="sc">%&gt;%</span></span>
<span id="cb20-4"><a href="practice-times-vs-qualifying-times.html#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, Time_grid_secs, <span class="at">col =</span> track)) <span class="sc">+</span></span>
<span id="cb20-5"><a href="practice-times-vs-qualifying-times.html#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">h =</span> <span class="dv">0</span>, <span class="at">w =</span> <span class="fl">0.3</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb20-6"><a href="practice-times-vs-qualifying-times.html#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_smooth</span>(<span class="at">method =</span> <span class="st">&#39;lm&#39;</span>, <span class="at">se =</span> F, <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb20-7"><a href="practice-times-vs-qualifying-times.html#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb20-8"><a href="practice-times-vs-qualifying-times.html#cb20-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Year&#39;</span>,</span>
<span id="cb20-9"><a href="practice-times-vs-qualifying-times.html#cb20-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Best Qualifying Time (secs)&#39;</span>,</span>
<span id="cb20-10"><a href="practice-times-vs-qualifying-times.html#cb20-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="fu">title_color_coder</span>(<span class="st">&quot;&quot;</span>, <span class="st">&quot;Australia&quot;</span>, <span class="st">&#39;#F8766D&#39;</span>, <span class="st">&quot; vs &quot;</span>, <span class="st">&quot;Monaco&quot;</span>, <span class="st">&#39;#00BFC4&#39;</span> ,<span class="st">&quot; Qualifying Time Progression&quot;</span>), </span>
<span id="cb20-11"><a href="practice-times-vs-qualifying-times.html#cb20-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2015 - 2019&#39;</span>,</span>
<span id="cb20-12"><a href="practice-times-vs-qualifying-times.html#cb20-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="st">&#39;&#39;</span>) <span class="sc">+</span> <span class="co"># use the title_color_coder() function</span></span>
<span id="cb20-13"><a href="practice-times-vs-qualifying-times.html#cb20-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> track, <span class="at">scales=</span> <span class="st">&#39;free_y&#39;</span>) <span class="sc">+</span></span>
<span id="cb20-14"><a href="practice-times-vs-qualifying-times.html#cb20-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">2014</span>, <span class="dv">2015</span>, <span class="dv">2016</span>, <span class="dv">2017</span>, <span class="dv">2018</span>, <span class="dv">2019</span>)) <span class="sc">+</span> </span>
<span id="cb20-15"><a href="practice-times-vs-qualifying-times.html#cb20-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb20-16"><a href="practice-times-vs-qualifying-times.html#cb20-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb20-17"><a href="practice-times-vs-qualifying-times.html#cb20-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb20-18"><a href="practice-times-vs-qualifying-times.html#cb20-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> ggtext<span class="sc">::</span><span class="fu">element_markdown</span>()) <span class="do">## render the provided text as markdown/html</span></span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<p>With the naked eye, it looks like Australia’s slope is steeper, suggesting that times improved at a quicker rate relative to Monaco. We can calculate the 95% confidence intervals around the slop estimate, and compare.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="practice-times-vs-qualifying-times.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filter times to include only clean Australian data</span></span>
<span id="cb21-2"><a href="practice-times-vs-qualifying-times.html#cb21-2" aria-hidden="true" tabindex="-1"></a>aus_quali_times <span class="ot">&lt;-</span> starting_and_ending_time_clean <span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="practice-times-vs-qualifying-times.html#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(track <span class="sc">==</span> <span class="st">&#39;australia&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-4"><a href="practice-times-vs-qualifying-times.html#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rain =</span> <span class="fu">ifelse</span>(year <span class="sc">==</span> <span class="dv">2014</span> <span class="sc">&amp;</span> Time_grid_secs <span class="sc">&gt;</span> <span class="dv">100</span>, <span class="st">&#39;rain during Q2&#39;</span>, <span class="st">&#39; &#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb21-5"><a href="practice-times-vs-qualifying-times.html#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rain <span class="sc">==</span> <span class="st">&#39; &#39;</span>,</span>
<span id="cb21-6"><a href="practice-times-vs-qualifying-times.html#cb21-6" aria-hidden="true" tabindex="-1"></a>         <span class="sc">!</span><span class="fu">is.na</span>(Time_grid_secs),</span>
<span id="cb21-7"><a href="practice-times-vs-qualifying-times.html#cb21-7" aria-hidden="true" tabindex="-1"></a>         year <span class="sc">&gt;</span> <span class="dv">2014</span> <span class="sc">&amp;</span> year <span class="sc">&lt;</span> <span class="dv">2020</span>)</span>
<span id="cb21-8"><a href="practice-times-vs-qualifying-times.html#cb21-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-9"><a href="practice-times-vs-qualifying-times.html#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="co"># fit linear model for Australia</span></span>
<span id="cb21-10"><a href="practice-times-vs-qualifying-times.html#cb21-10" aria-hidden="true" tabindex="-1"></a>aus.lm <span class="ot">&lt;-</span> <span class="fu">lm</span>(Time_grid_secs <span class="sc">~</span> year, aus_quali_times)</span>
<span id="cb21-11"><a href="practice-times-vs-qualifying-times.html#cb21-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-12"><a href="practice-times-vs-qualifying-times.html#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 95% CI slope</span></span>
<span id="cb21-13"><a href="practice-times-vs-qualifying-times.html#cb21-13" aria-hidden="true" tabindex="-1"></a>aus_coef_ci <span class="ot">&lt;-</span> <span class="fu">confint</span>(aus.lm)</span>
<span id="cb21-14"><a href="practice-times-vs-qualifying-times.html#cb21-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-15"><a href="practice-times-vs-qualifying-times.html#cb21-15" aria-hidden="true" tabindex="-1"></a><span class="co"># filter times to include only clean Australian data</span></span>
<span id="cb21-16"><a href="practice-times-vs-qualifying-times.html#cb21-16" aria-hidden="true" tabindex="-1"></a>mon_quali_times <span class="ot">&lt;-</span> starting_and_ending_time_clean <span class="sc">%&gt;%</span></span>
<span id="cb21-17"><a href="practice-times-vs-qualifying-times.html#cb21-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(track <span class="sc">==</span> <span class="st">&#39;monaco&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-18"><a href="practice-times-vs-qualifying-times.html#cb21-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Time_grid_secs),</span>
<span id="cb21-19"><a href="practice-times-vs-qualifying-times.html#cb21-19" aria-hidden="true" tabindex="-1"></a>         year <span class="sc">&gt;</span> <span class="dv">2014</span> <span class="sc">&amp;</span> year <span class="sc">&lt;</span> <span class="dv">2020</span>)</span>
<span id="cb21-20"><a href="practice-times-vs-qualifying-times.html#cb21-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-21"><a href="practice-times-vs-qualifying-times.html#cb21-21" aria-hidden="true" tabindex="-1"></a><span class="co"># fit linear model for Monaco</span></span>
<span id="cb21-22"><a href="practice-times-vs-qualifying-times.html#cb21-22" aria-hidden="true" tabindex="-1"></a>mon.lm <span class="ot">&lt;-</span> <span class="fu">lm</span>(Time_grid_secs <span class="sc">~</span> year, <span class="at">data =</span> mon_quali_times)</span>
<span id="cb21-23"><a href="practice-times-vs-qualifying-times.html#cb21-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-24"><a href="practice-times-vs-qualifying-times.html#cb21-24" aria-hidden="true" tabindex="-1"></a><span class="co"># 95% CI slope</span></span>
<span id="cb21-25"><a href="practice-times-vs-qualifying-times.html#cb21-25" aria-hidden="true" tabindex="-1"></a>mon_coef_ci <span class="ot">&lt;-</span> <span class="fu">confint</span>(mon.lm)</span></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="practice-times-vs-qualifying-times.html#cb22-1" aria-hidden="true" tabindex="-1"></a>aus_v_mon <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="fu">data.frame</span>(<span class="at">australia =</span> <span class="fu">cbind</span>(<span class="at">est =</span> <span class="fu">coef</span>(aus.lm), aus_coef_ci)[<span class="dv">2</span>,]), </span>
<span id="cb22-2"><a href="practice-times-vs-qualifying-times.html#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">monaco =</span> <span class="fu">cbind</span>(<span class="at">est =</span> <span class="fu">coef</span>(mon.lm), mon_coef_ci)[<span class="dv">2</span>,])) <span class="sc">%&gt;%</span> <span class="fu">t</span>() <span class="sc">%&gt;%</span></span>
<span id="cb22-3"><a href="practice-times-vs-qualifying-times.html#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb22-4"><a href="practice-times-vs-qualifying-times.html#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>(<span class="at">var =</span> <span class="st">&#39;race&#39;</span>)</span>
<span id="cb22-5"><a href="practice-times-vs-qualifying-times.html#cb22-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-6"><a href="practice-times-vs-qualifying-times.html#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="practice-times-vs-qualifying-times.html#cb22-7" aria-hidden="true" tabindex="-1"></a>aus_v_mon <span class="sc">%&gt;%</span></span>
<span id="cb22-8"><a href="practice-times-vs-qualifying-times.html#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb22-9"><a href="practice-times-vs-qualifying-times.html#cb22-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_pointrange</span>(<span class="fu">aes</span>(<span class="at">x =</span> race, <span class="at">y =</span> est, <span class="at">ymin =</span> <span class="st">`</span><span class="at">2.5 %</span><span class="st">`</span>, <span class="at">ymax =</span> <span class="st">`</span><span class="at">97.5 %</span><span class="st">`</span>, <span class="at">col =</span> race), </span>
<span id="cb22-10"><a href="practice-times-vs-qualifying-times.html#cb22-10" aria-hidden="true" tabindex="-1"></a>                  <span class="at">linewidth =</span> <span class="dv">3</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb22-11"><a href="practice-times-vs-qualifying-times.html#cb22-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb22-12"><a href="practice-times-vs-qualifying-times.html#cb22-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="st">&#39;&#39;</span>, <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;australia&quot;</span> <span class="ot">=</span> <span class="st">&#39;#F8766D&#39;</span>, <span class="st">&quot;monaco&quot;</span> <span class="ot">=</span> <span class="st">&#39;#00BFC4&#39;</span>)) <span class="sc">+</span> </span>
<span id="cb22-13"><a href="practice-times-vs-qualifying-times.html#cb22-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Grand Prix&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Coefficient Estimate \u00b1 95% CI&#39;</span>,</span>
<span id="cb22-14"><a href="practice-times-vs-qualifying-times.html#cb22-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="fu">title_color_coder</span>(<span class="st">&quot;&quot;</span>, <span class="st">&quot;Australia&quot;</span>, <span class="st">&#39;#F8766D&#39;</span>, <span class="st">&quot; vs &quot;</span>, <span class="st">&quot;Monaco&quot;</span>, <span class="st">&#39;#00BFC4&#39;</span> ,<span class="st">&quot; Qualifying Time Progression&quot;</span>), </span>
<span id="cb22-15"><a href="practice-times-vs-qualifying-times.html#cb22-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2015 - 2019&#39;</span>) <span class="sc">+</span> </span>
<span id="cb22-16"><a href="practice-times-vs-qualifying-times.html#cb22-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb22-17"><a href="practice-times-vs-qualifying-times.html#cb22-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb22-18"><a href="practice-times-vs-qualifying-times.html#cb22-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb22-19"><a href="practice-times-vs-qualifying-times.html#cb22-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> ggtext<span class="sc">::</span><span class="fu">element_markdown</span>()) <span class="do">## render the provided text as markdown/html</span></span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<p>So, despite my initial guess that qualifying times decreased at a more rapid rate in Australia, the 95% confidence intervals for the slope estimates largely overlap. This suggests that there’s no statistical evidence that these slopes are different.</p>
<p>But, the proper way to make this comparison is by using an <strong>interaction model</strong>. It can answer the question that we had (i.e. <em>Was qualifying time progression different between the two races?</em>), and it can do a lot more. Below, I’ll fit an interaction model to the 2015 - 2019 data for the Australian and Monaco Grands Prix.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="practice-times-vs-qualifying-times.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filter data</span></span>
<span id="cb23-2"><a href="practice-times-vs-qualifying-times.html#cb23-2" aria-hidden="true" tabindex="-1"></a>aus_mon_data <span class="ot">&lt;-</span> starting_and_ending_time_clean <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="practice-times-vs-qualifying-times.html#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(track <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;australia&#39;</span>, <span class="st">&#39;monaco&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb23-4"><a href="practice-times-vs-qualifying-times.html#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Time_grid_secs),</span>
<span id="cb23-5"><a href="practice-times-vs-qualifying-times.html#cb23-5" aria-hidden="true" tabindex="-1"></a>         year <span class="sc">&gt;</span> <span class="dv">2014</span> <span class="sc">&amp;</span> year <span class="sc">&lt;</span> <span class="dv">2020</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-6"><a href="practice-times-vs-qualifying-times.html#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">track =</span> <span class="fu">factor</span>(track))</span>
<span id="cb23-7"><a href="practice-times-vs-qualifying-times.html#cb23-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-8"><a href="practice-times-vs-qualifying-times.html#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="co"># fit an interaction model</span></span>
<span id="cb23-9"><a href="practice-times-vs-qualifying-times.html#cb23-9" aria-hidden="true" tabindex="-1"></a>aus.mon.int.lm <span class="ot">&lt;-</span> <span class="fu">lm</span>(Time_grid_secs <span class="sc">~</span> year <span class="sc">*</span> track, <span class="at">data =</span> aus_mon_data)</span>
<span id="cb23-10"><a href="practice-times-vs-qualifying-times.html#cb23-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-11"><a href="practice-times-vs-qualifying-times.html#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="co"># print the model output</span></span>
<span id="cb23-12"><a href="practice-times-vs-qualifying-times.html#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(aus.mon.int.lm)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = Time_grid_secs ~ year * track, data = aus_mon_data)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -3.0939 -0.9679 -0.1383  0.7627  9.4007 
## 
## Coefficients:
##                    Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)      3276.52597  233.33030  14.042   &lt;2e-16 ***
## year               -1.58217    0.11568 -13.677   &lt;2e-16 ***
## trackmonaco      -147.73243  327.39385  -0.451    0.652    
## year:trackmonaco    0.06775    0.16232   0.417    0.677    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 1.59 on 189 degrees of freedom
## Multiple R-squared:  0.9344, Adjusted R-squared:  0.9334 
## F-statistic: 897.6 on 3 and 189 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>At first, the output may seem a bit confusing, but it only requires a small adjustment. Basically, this model produces coefficient estimates for a race-specific intercept and slope, relative to the ‘base-level’. In this case, Australia is the base level. Luckily, we can actually use functions from the <strong>emmeans</strong> package to easily estimate the coefficient and confidence intervals by race. <strong>emmeans</strong> stands for <em>estimated marginal means</em>, which are means for treatment levels that are adjusted for means of other factors in the model. In this example, we are interested in the influence of year on qualifying times, but it is also impacted by race.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="practice-times-vs-qualifying-times.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">emtrends</span>(aus.mon.int.lm, pairwise <span class="sc">~</span> track, <span class="at">var =</span> <span class="st">&#39;year&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-2"><a href="practice-times-vs-qualifying-times.html#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="practice-times-vs-qualifying-times.html#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(track <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;australia&#39;</span>, <span class="st">&#39;monaco&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb25-4"><a href="practice-times-vs-qualifying-times.html#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb25-5"><a href="practice-times-vs-qualifying-times.html#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_pointrange</span>(<span class="fu">aes</span>(<span class="at">x =</span> track, <span class="at">y =</span> year.trend, <span class="at">ymin =</span> lower.CL, <span class="at">ymax =</span> upper.CL, <span class="at">col =</span> track), </span>
<span id="cb25-6"><a href="practice-times-vs-qualifying-times.html#cb25-6" aria-hidden="true" tabindex="-1"></a>                  <span class="at">linewidth =</span> <span class="dv">3</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb25-7"><a href="practice-times-vs-qualifying-times.html#cb25-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb25-8"><a href="practice-times-vs-qualifying-times.html#cb25-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="st">&#39;&#39;</span>, <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;australia&quot;</span> <span class="ot">=</span> <span class="st">&#39;#F8766D&#39;</span>, <span class="st">&quot;monaco&quot;</span> <span class="ot">=</span> <span class="st">&#39;#00BFC4&#39;</span>)) <span class="sc">+</span> </span>
<span id="cb25-9"><a href="practice-times-vs-qualifying-times.html#cb25-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Grand Prix&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Coefficient Estimate \u00b1 95% CI&#39;</span>,</span>
<span id="cb25-10"><a href="practice-times-vs-qualifying-times.html#cb25-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="fu">title_color_coder</span>(<span class="st">&quot;&quot;</span>, <span class="st">&quot;Australia&quot;</span>, <span class="st">&#39;#F8766D&#39;</span>, <span class="st">&quot; vs &quot;</span>, <span class="st">&quot;Monaco&quot;</span>, <span class="st">&#39;#00BFC4&#39;</span> ,<span class="st">&quot; Qualifying Time Progression&quot;</span>), </span>
<span id="cb25-11"><a href="practice-times-vs-qualifying-times.html#cb25-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2015 - 2019&#39;</span>) <span class="sc">+</span> </span>
<span id="cb25-12"><a href="practice-times-vs-qualifying-times.html#cb25-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb25-13"><a href="practice-times-vs-qualifying-times.html#cb25-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb25-14"><a href="practice-times-vs-qualifying-times.html#cb25-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb25-15"><a href="practice-times-vs-qualifying-times.html#cb25-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> ggtext<span class="sc">::</span><span class="fu">element_markdown</span>()) <span class="do">## render the provided text as markdown/html</span></span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<p>While the estimates for the slope remain the same to those estimated with individual models, the 95% confidence intervals are wider. Nontheles, it doesn’t change our opinion that the rate of qualifying time improvement is not statistically different between these two races during this time period (2015 - 2019).</p>
<p>As we did for a single race earlier, we use the <code>augment()</code> function to estimate the 95% confidence and 95% prediction intervals for this interaction model.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="practice-times-vs-qualifying-times.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate the 95% confidence interval for the fit line</span></span>
<span id="cb26-2"><a href="practice-times-vs-qualifying-times.html#cb26-2" aria-hidden="true" tabindex="-1"></a>aus_v_mon_aug <span class="ot">&lt;-</span> <span class="fu">augment</span>(aus.mon.int.lm, <span class="at">data =</span> aus_mon_data, <span class="at">interval =</span> <span class="st">&quot;confidence&quot;</span>, <span class="at">se_fit =</span> T)</span>
<span id="cb26-3"><a href="practice-times-vs-qualifying-times.html#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="practice-times-vs-qualifying-times.html#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate the 95% prediction interval for the fit line</span></span>
<span id="cb26-5"><a href="practice-times-vs-qualifying-times.html#cb26-5" aria-hidden="true" tabindex="-1"></a>aus_mon_aug_pr <span class="ot">&lt;-</span> <span class="fu">augment</span>(aus.mon.int.lm, <span class="at">data =</span> aus_mon_data, <span class="at">interval =</span> <span class="st">&quot;prediction&quot;</span>, <span class="at">se_fit =</span> T) <span class="sc">%&gt;%</span></span>
<span id="cb26-6"><a href="practice-times-vs-qualifying-times.html#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="fu">rename</span>(<span class="st">&quot;lower_PI&quot;</span> <span class="ot">=</span> <span class="st">&quot;.lower&quot;</span>, <span class="st">&quot;upper_PI&quot;</span> <span class="ot">=</span> <span class="st">&quot;.upper&quot;</span>)</span>
<span id="cb26-7"><a href="practice-times-vs-qualifying-times.html#cb26-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-8"><a href="practice-times-vs-qualifying-times.html#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="co"># combine the intervals</span></span>
<span id="cb26-9"><a href="practice-times-vs-qualifying-times.html#cb26-9" aria-hidden="true" tabindex="-1"></a>aus_v_mon_aug <span class="ot">&lt;-</span> aus_v_mon_aug <span class="sc">%&gt;%</span></span>
<span id="cb26-10"><a href="practice-times-vs-qualifying-times.html#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="fu">bind_cols</span>(aus_mon_aug_pr <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(lower_PI, upper_PI))</span>
<span id="cb26-11"><a href="practice-times-vs-qualifying-times.html#cb26-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-12"><a href="practice-times-vs-qualifying-times.html#cb26-12" aria-hidden="true" tabindex="-1"></a>aus_v_mon_aug <span class="sc">%&gt;%</span> </span>
<span id="cb26-13"><a href="practice-times-vs-qualifying-times.html#cb26-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, Time_grid_secs, <span class="at">col =</span> track), <span class="at">show.legend =</span> F) <span class="sc">+</span></span>
<span id="cb26-14"><a href="practice-times-vs-qualifying-times.html#cb26-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">seed=</span> <span class="dv">123</span>, <span class="at">h =</span> <span class="dv">0</span>, <span class="at">w =</span> <span class="fl">0.3</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb26-15"><a href="practice-times-vs-qualifying-times.html#cb26-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_smooth</span>(<span class="at">method =</span> <span class="st">&#39;lm&#39;</span>, <span class="at">se =</span> F, <span class="at">size =</span> <span class="fl">0.3</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb26-16"><a href="practice-times-vs-qualifying-times.html#cb26-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb26-17"><a href="practice-times-vs-qualifying-times.html#cb26-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Year&#39;</span>,</span>
<span id="cb26-18"><a href="practice-times-vs-qualifying-times.html#cb26-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Best Qualifying Time (secs)&#39;</span>,</span>
<span id="cb26-19"><a href="practice-times-vs-qualifying-times.html#cb26-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="fu">title_color_coder</span>(<span class="st">&quot;&quot;</span>, <span class="st">&quot;Australia&quot;</span>, <span class="st">&#39;#F8766D&#39;</span>, <span class="st">&quot; vs &quot;</span>, <span class="st">&quot;Monaco&quot;</span>, <span class="st">&#39;#00BFC4&#39;</span> ,<span class="st">&quot; Qualifying Time Progression&quot;</span>),</span>
<span id="cb26-20"><a href="practice-times-vs-qualifying-times.html#cb26-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;Linear Model, 95% CI, and 95% PI (2015 - 2019)&#39;</span>) <span class="sc">+</span></span>
<span id="cb26-21"><a href="practice-times-vs-qualifying-times.html#cb26-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">2014</span>, <span class="dv">2015</span>, <span class="dv">2016</span>, <span class="dv">2017</span>, <span class="dv">2018</span>, <span class="dv">2019</span>, <span class="dv">2022</span>)) <span class="sc">+</span></span>
<span id="cb26-22"><a href="practice-times-vs-qualifying-times.html#cb26-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> lower_PI, <span class="at">ymax =</span> upper_PI), <span class="at">fill =</span> <span class="st">&#39;grey&#39;</span>, <span class="at">alpha =</span> <span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb26-23"><a href="practice-times-vs-qualifying-times.html#cb26-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> .lower, <span class="at">ymax =</span> .upper), <span class="at">fill =</span> <span class="st">&#39;grey&#39;</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb26-24"><a href="practice-times-vs-qualifying-times.html#cb26-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb26-25"><a href="practice-times-vs-qualifying-times.html#cb26-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb26-26"><a href="practice-times-vs-qualifying-times.html#cb26-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb26-27"><a href="practice-times-vs-qualifying-times.html#cb26-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> ggtext<span class="sc">::</span><span class="fu">element_markdown</span>()) <span class="sc">+</span> <span class="do">## render the provided text as markdown/html</span></span>
<span id="cb26-28"><a href="practice-times-vs-qualifying-times.html#cb26-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> track)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
<p>This visual helps highlight that these slopes are not statistically different from eachother.</p>
<p>As a reminder, each Gran Prix’s line describes the linear regression model’s estimate of average qualifying time for each year of the race.The inner band represents the 95% confidence interval of the prediction (confidence in the average response), and the outer band represents the 95% prediction interval of the prediction (confidence in a single response).</p>
<p><strong>The confidence interval is uncertainty surrounding a <em>mean response</em>, and the prediction interval is uncertainty surrounding a prediction of a <em>future observation</em>.</strong></p>
<p>The interpretation of the <strong>95% confidence interval</strong> of a predicted value is: <em>“95% of intervals of this form will contain the expected value of average qualifying time given a particular year”.</em></p>
<p>The interpretation of the <strong>95% prediction interval</strong> of a predicted value is: <em>“95% of intervals of this form will contain the true qualifying time for this particular year”</em></p>
</div>
<div id="multilevel-model-are-there-team-trends-nested-within-race-trends-nested-within-yearly-trends" class="section level2 hasAnchor" number="4.4">
<h2><span class="header-section-number">4.4</span> Multilevel Model: Are there team trends nested within race trends, nested within yearly trends?<a href="practice-times-vs-qualifying-times.html#multilevel-model-are-there-team-trends-nested-within-race-trends-nested-within-yearly-trends" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>With the interaction model, we were able to estimate the interaction of time and track on qualifying times from 2015 to 2019, for two Grands Prix: Australia and Monaco. But, this model structure allows you to make a fairly specific conclusion:</p>
<p>Does progression vary by team? Below, we can look at each team’s progression for the Australian Grand Prix.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="practice-times-vs-qualifying-times.html#cb27-1" aria-hidden="true" tabindex="-1"></a>starting_and_ending_time_clean <span class="sc">%&gt;%</span></span>
<span id="cb27-2"><a href="practice-times-vs-qualifying-times.html#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(track <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;australia&#39;</span>),</span>
<span id="cb27-3"><a href="practice-times-vs-qualifying-times.html#cb27-3" aria-hidden="true" tabindex="-1"></a>         <span class="sc">!</span><span class="fu">is.na</span>(Time_grid_secs),</span>
<span id="cb27-4"><a href="practice-times-vs-qualifying-times.html#cb27-4" aria-hidden="true" tabindex="-1"></a>         year <span class="sc">&gt;</span> <span class="dv">2014</span> <span class="sc">&amp;</span> year <span class="sc">&lt;</span> <span class="dv">2020</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-5"><a href="practice-times-vs-qualifying-times.html#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">track =</span> <span class="fu">factor</span>(track),</span>
<span id="cb27-6"><a href="practice-times-vs-qualifying-times.html#cb27-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">constructor =</span> <span class="fu">case_when</span>(</span>
<span id="cb27-7"><a href="practice-times-vs-qualifying-times.html#cb27-7" aria-hidden="true" tabindex="-1"></a>           Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;Mercedes&#39;</span>) <span class="sc">~</span> <span class="st">&#39;Mercedes&#39;</span>,</span>
<span id="cb27-8"><a href="practice-times-vs-qualifying-times.html#cb27-8" aria-hidden="true" tabindex="-1"></a>           Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;Ferrari&#39;</span>) <span class="sc">~</span> <span class="st">&#39;Ferrari&#39;</span>,</span>
<span id="cb27-9"><a href="practice-times-vs-qualifying-times.html#cb27-9" aria-hidden="true" tabindex="-1"></a>           Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;McLaren Honda&#39;</span>, <span class="st">&#39;McLaren Renault&#39;</span>) <span class="sc">~</span> <span class="st">&#39;McLaren&#39;</span>,</span>
<span id="cb27-10"><a href="practice-times-vs-qualifying-times.html#cb27-10" aria-hidden="true" tabindex="-1"></a>           Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Red Bull Racing Honda&quot;</span>, <span class="st">&quot;Red Bull Racing TAG Heuer&quot;</span>, <span class="st">&quot;Red Bull Racing Renault&quot;</span>) <span class="sc">~</span> <span class="st">&#39;Red Bull&#39;</span>,</span>
<span id="cb27-11"><a href="practice-times-vs-qualifying-times.html#cb27-11" aria-hidden="true" tabindex="-1"></a>           Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Toro Rosso-Ferrari&quot;</span>, <span class="st">&quot;Toro Rosso Ferrari&quot;</span>, <span class="st">&quot;Toro Rosso&quot;</span>, <span class="st">&quot;Scuderia Toro Rosso Honda&quot;</span>) <span class="sc">~</span> <span class="st">&#39;Toro Rosso&#39;</span>,</span>
<span id="cb27-12"><a href="practice-times-vs-qualifying-times.html#cb27-12" aria-hidden="true" tabindex="-1"></a>           Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Williams Mercedes&quot;</span>) <span class="sc">~</span> <span class="st">&quot;Williams&quot;</span>,</span>
<span id="cb27-13"><a href="practice-times-vs-qualifying-times.html#cb27-13" aria-hidden="true" tabindex="-1"></a>           Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Sauber Ferrari&quot;</span>, <span class="st">&quot;Alfa Romeo Racing Ferrari&quot;</span>) <span class="sc">~</span> <span class="st">&#39;Alfa Romeo&#39;</span>,</span>
<span id="cb27-14"><a href="practice-times-vs-qualifying-times.html#cb27-14" aria-hidden="true" tabindex="-1"></a>           Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Renault&quot;</span>) <span class="sc">~</span> <span class="st">&#39;Renault&#39;</span>,</span>
<span id="cb27-15"><a href="practice-times-vs-qualifying-times.html#cb27-15" aria-hidden="true" tabindex="-1"></a>         Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Racing Point BWT Mercedes&quot;</span>, <span class="st">&quot;Force India Mercedes&quot;</span>) <span class="sc">~</span> <span class="st">&quot;Racing Point&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb27-16"><a href="practice-times-vs-qualifying-times.html#cb27-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(constructor)) <span class="sc">%&gt;%</span> </span>
<span id="cb27-17"><a href="practice-times-vs-qualifying-times.html#cb27-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> Time_grid_secs, <span class="at">group =</span> constructor, <span class="at">col =</span> constructor))<span class="sc">+</span></span>
<span id="cb27-18"><a href="practice-times-vs-qualifying-times.html#cb27-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun =</span> mean, <span class="at">geom =</span> <span class="st">&#39;line&#39;</span>, <span class="at">linewidth =</span> <span class="fl">1.5</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb27-19"><a href="practice-times-vs-qualifying-times.html#cb27-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb27-20"><a href="practice-times-vs-qualifying-times.html#cb27-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Year&#39;</span>,</span>
<span id="cb27-21"><a href="practice-times-vs-qualifying-times.html#cb27-21" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Best Qualifying Time (secs)&#39;</span>,</span>
<span id="cb27-22"><a href="practice-times-vs-qualifying-times.html#cb27-22" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Qualifying Time Progression for Nine Constructors&#39;</span>,</span>
<span id="cb27-23"><a href="practice-times-vs-qualifying-times.html#cb27-23" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;Australian Grand Prix: 2015 - 2019&#39;</span>,</span>
<span id="cb27-24"><a href="practice-times-vs-qualifying-times.html#cb27-24" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="st">&#39;&#39;</span>) <span class="sc">+</span></span>
<span id="cb27-25"><a href="practice-times-vs-qualifying-times.html#cb27-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb27-26"><a href="practice-times-vs-qualifying-times.html#cb27-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb27-27"><a href="practice-times-vs-qualifying-times.html#cb27-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="practice-times-vs-qualifying-times.html#cb28-1" aria-hidden="true" tabindex="-1"></a>aus_constructor_clean <span class="ot">&lt;-</span> starting_and_ending_time_clean <span class="sc">%&gt;%</span></span>
<span id="cb28-2"><a href="practice-times-vs-qualifying-times.html#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(track <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;australia&#39;</span>),</span>
<span id="cb28-3"><a href="practice-times-vs-qualifying-times.html#cb28-3" aria-hidden="true" tabindex="-1"></a>         <span class="sc">!</span><span class="fu">is.na</span>(Time_grid_secs),</span>
<span id="cb28-4"><a href="practice-times-vs-qualifying-times.html#cb28-4" aria-hidden="true" tabindex="-1"></a>         year <span class="sc">&gt;</span> <span class="dv">2014</span> <span class="sc">&amp;</span> year <span class="sc">&lt;</span> <span class="dv">2020</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-5"><a href="practice-times-vs-qualifying-times.html#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">track =</span> <span class="fu">factor</span>(track),</span>
<span id="cb28-6"><a href="practice-times-vs-qualifying-times.html#cb28-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">constructor =</span> <span class="fu">case_when</span>(</span>
<span id="cb28-7"><a href="practice-times-vs-qualifying-times.html#cb28-7" aria-hidden="true" tabindex="-1"></a>           Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;Mercedes&#39;</span>) <span class="sc">~</span> <span class="st">&#39;Mercedes&#39;</span>,</span>
<span id="cb28-8"><a href="practice-times-vs-qualifying-times.html#cb28-8" aria-hidden="true" tabindex="-1"></a>           Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;Ferrari&#39;</span>) <span class="sc">~</span> <span class="st">&#39;Ferrari&#39;</span>,</span>
<span id="cb28-9"><a href="practice-times-vs-qualifying-times.html#cb28-9" aria-hidden="true" tabindex="-1"></a>           Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;McLaren Honda&#39;</span>, <span class="st">&#39;McLaren Renault&#39;</span>) <span class="sc">~</span> <span class="st">&#39;McLaren&#39;</span>,</span>
<span id="cb28-10"><a href="practice-times-vs-qualifying-times.html#cb28-10" aria-hidden="true" tabindex="-1"></a>           Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Red Bull Racing Honda&quot;</span>, <span class="st">&quot;Red Bull Racing TAG Heuer&quot;</span>, <span class="st">&quot;Red Bull Racing Renault&quot;</span>) <span class="sc">~</span> <span class="st">&#39;Red Bull&#39;</span>,</span>
<span id="cb28-11"><a href="practice-times-vs-qualifying-times.html#cb28-11" aria-hidden="true" tabindex="-1"></a>           Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Toro Rosso-Ferrari&quot;</span>, <span class="st">&quot;Toro Rosso Ferrari&quot;</span>, <span class="st">&quot;Toro Rosso&quot;</span>, <span class="st">&quot;Scuderia Toro Rosso Honda&quot;</span>) <span class="sc">~</span> <span class="st">&#39;Toro Rosso&#39;</span>,</span>
<span id="cb28-12"><a href="practice-times-vs-qualifying-times.html#cb28-12" aria-hidden="true" tabindex="-1"></a>           Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Williams Mercedes&quot;</span>) <span class="sc">~</span> <span class="st">&quot;Williams&quot;</span>,</span>
<span id="cb28-13"><a href="practice-times-vs-qualifying-times.html#cb28-13" aria-hidden="true" tabindex="-1"></a>           Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Sauber Ferrari&quot;</span>, <span class="st">&quot;Alfa Romeo Racing Ferrari&quot;</span>) <span class="sc">~</span> <span class="st">&#39;Alfa Romeo&#39;</span>,</span>
<span id="cb28-14"><a href="practice-times-vs-qualifying-times.html#cb28-14" aria-hidden="true" tabindex="-1"></a>           Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Renault&quot;</span>) <span class="sc">~</span> <span class="st">&#39;Renault&#39;</span>,</span>
<span id="cb28-15"><a href="practice-times-vs-qualifying-times.html#cb28-15" aria-hidden="true" tabindex="-1"></a>         Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Racing Point BWT Mercedes&quot;</span>, <span class="st">&quot;Force India Mercedes&quot;</span>) <span class="sc">~</span> <span class="st">&quot;Racing Point&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb28-16"><a href="practice-times-vs-qualifying-times.html#cb28-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(constructor))</span>
<span id="cb28-17"><a href="practice-times-vs-qualifying-times.html#cb28-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-18"><a href="practice-times-vs-qualifying-times.html#cb28-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-19"><a href="practice-times-vs-qualifying-times.html#cb28-19" aria-hidden="true" tabindex="-1"></a>aus.constructor.int <span class="ot">&lt;-</span> <span class="fu">lm</span>(Time_grid_secs <span class="sc">~</span> year<span class="sc">:</span>constructor, <span class="at">data =</span> aus_constructor_clean)</span>
<span id="cb28-20"><a href="practice-times-vs-qualifying-times.html#cb28-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-21"><a href="practice-times-vs-qualifying-times.html#cb28-21" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(aus.constructor.int)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = Time_grid_secs ~ year:constructor, data = aus_constructor_clean)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -1.9964 -0.7433 -0.1977  0.6298  3.1889 
## 
## Coefficients:
##                                Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)                  3162.75709  181.90840   17.39   &lt;2e-16 ***
## year:constructorAlfa Romeo     -1.52528    0.09019  -16.91   &lt;2e-16 ***
## year:constructorFerrari        -1.52655    0.09019  -16.93   &lt;2e-16 ***
## year:constructorMcLaren        -1.52536    0.09019  -16.91   &lt;2e-16 ***
## year:constructorMercedes       -1.52692    0.09019  -16.93   &lt;2e-16 ***
## year:constructorRacing Point   -1.52565    0.09019  -16.92   &lt;2e-16 ***
## year:constructorRed Bull       -1.52603    0.09019  -16.92   &lt;2e-16 ***
## year:constructorRenault        -1.52547    0.09017  -16.92   &lt;2e-16 ***
## year:constructorToro Rosso     -1.52582    0.09017  -16.92   &lt;2e-16 ***
## year:constructorWilliams       -1.52545    0.09018  -16.92   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 1.121 on 73 degrees of freedom
## Multiple R-squared:  0.8293, Adjusted R-squared:  0.8082 
## F-statistic:  39.4 on 9 and 73 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>Plot marginal effects</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="practice-times-vs-qualifying-times.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot point estimates</span></span>
<span id="cb30-2"><a href="practice-times-vs-qualifying-times.html#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">emtrends</span>(aus.constructor.int, pairwise <span class="sc">~</span> constructor, <span class="at">var =</span> <span class="st">&#39;year&#39;</span>, <span class="at">contrast =</span> F) <span class="sc">%&gt;%</span></span>
<span id="cb30-3"><a href="practice-times-vs-qualifying-times.html#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb30-4"><a href="practice-times-vs-qualifying-times.html#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(constructor <span class="sc">!=</span> <span class="st">&#39;.&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-5"><a href="practice-times-vs-qualifying-times.html#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb30-6"><a href="practice-times-vs-qualifying-times.html#cb30-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(constructor, year.trend), <span class="at">y =</span> year.trend)) <span class="sc">+</span></span>
<span id="cb30-7"><a href="practice-times-vs-qualifying-times.html#cb30-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb30-8"><a href="practice-times-vs-qualifying-times.html#cb30-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Grand Prix&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Coefficient Estimate&#39;</span>)</span></code></pre></div>
<pre><code>## Warning in as.data.frame.emm_list(.): Note: &#39;as.data.frame&#39; has combined your 2 sets of results into one object,
## and this affects things like adjusted P values. Refer to the annotations.</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="practice-times-vs-qualifying-times.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot estimates and 95% CI</span></span>
<span id="cb32-2"><a href="practice-times-vs-qualifying-times.html#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">emtrends</span>(aus.constructor.int, pairwise <span class="sc">~</span> constructor, <span class="at">var =</span> <span class="st">&#39;year&#39;</span>, <span class="at">contrast =</span> F) <span class="sc">%&gt;%</span></span>
<span id="cb32-3"><a href="practice-times-vs-qualifying-times.html#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb32-4"><a href="practice-times-vs-qualifying-times.html#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(constructor <span class="sc">!=</span> <span class="st">&#39;.&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-5"><a href="practice-times-vs-qualifying-times.html#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb32-6"><a href="practice-times-vs-qualifying-times.html#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_pointrange</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(constructor, year.trend), <span class="at">y =</span> year.trend, <span class="at">ymin =</span> lower.CL, <span class="at">ymax =</span> upper.CL)) <span class="sc">+</span></span>
<span id="cb32-7"><a href="practice-times-vs-qualifying-times.html#cb32-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb32-8"><a href="practice-times-vs-qualifying-times.html#cb32-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Grand Prix&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Coefficient Estimate \u00b1 95% CI&#39;</span>)</span></code></pre></div>
<pre><code>## Warning in as.data.frame.emm_list(.): Note: &#39;as.data.frame&#39; has combined your 2 sets of results into one object,
## and this affects things like adjusted P values. Refer to the annotations.</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="practice-times-vs-qualifying-times.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lme4)</span>
<span id="cb34-2"><a href="practice-times-vs-qualifying-times.html#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom.mixed)</span>
<span id="cb34-3"><a href="practice-times-vs-qualifying-times.html#cb34-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-4"><a href="practice-times-vs-qualifying-times.html#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Australia LMER</span></span>
<span id="cb34-5"><a href="practice-times-vs-qualifying-times.html#cb34-5" aria-hidden="true" tabindex="-1"></a>aus.constructor.lmer <span class="ot">&lt;-</span> <span class="fu">lmer</span>(Time_grid_secs <span class="sc">~</span> year <span class="sc">|</span> constructor, <span class="at">data =</span> aus_constructor_clean)</span></code></pre></div>
<pre><code>## Warning in checkConv(attr(opt, &quot;derivs&quot;), opt$par, ctrl = control$checkConv, :
## Model failed to converge with max|grad| = 0.22437 (tol = 0.002, component 1)</code></pre>
<pre><code>## Warning in checkConv(attr(opt, &quot;derivs&quot;), opt$par, ctrl = control$checkConv, : Model is nearly unidentifiable: very large eigenvalue
##  - Rescale variables?;Model is nearly unidentifiable: large eigenvalue ratio
##  - Rescale variables?</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="practice-times-vs-qualifying-times.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot estimates and 95% CI</span></span>
<span id="cb37-2"><a href="practice-times-vs-qualifying-times.html#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(aus.constructor.lmer, <span class="at">effects =</span> <span class="st">&quot;ran_vals&quot;</span>, <span class="at">conf.int =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb37-3"><a href="practice-times-vs-qualifying-times.html#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb37-4"><a href="practice-times-vs-qualifying-times.html#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(term <span class="sc">==</span> <span class="st">&#39;year&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb37-5"><a href="practice-times-vs-qualifying-times.html#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb37-6"><a href="practice-times-vs-qualifying-times.html#cb37-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_pointrange</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(level, estimate), <span class="at">y =</span> estimate, <span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high), <span class="at">linewidth =</span> <span class="dv">3</span>, <span class="at">alpha =</span> <span class="fl">0.25</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb37-7"><a href="practice-times-vs-qualifying-times.html#cb37-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb37-8"><a href="practice-times-vs-qualifying-times.html#cb37-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Grand Prix&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Coefficient Estimate \u00b1 95% CI&#39;</span>,</span>
<span id="cb37-9"><a href="practice-times-vs-qualifying-times.html#cb37-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Linear Multilevel Model&#39;</span>,</span>
<span id="cb37-10"><a href="practice-times-vs-qualifying-times.html#cb37-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;Australian Grand Prix: 2015 - 2019&#39;</span>,</span>
<span id="cb37-11"><a href="practice-times-vs-qualifying-times.html#cb37-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="st">&#39;&#39;</span>) <span class="sc">+</span></span>
<span id="cb37-12"><a href="practice-times-vs-qualifying-times.html#cb37-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb37-13"><a href="practice-times-vs-qualifying-times.html#cb37-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
<p>If we re-scale the predictor (year), we’ll then be able to interpret the intercept for each constructor as well.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="practice-times-vs-qualifying-times.html#cb38-1" aria-hidden="true" tabindex="-1"></a>aus_constructor_clean <span class="ot">&lt;-</span> starting_and_ending_time_clean <span class="sc">%&gt;%</span></span>
<span id="cb38-2"><a href="practice-times-vs-qualifying-times.html#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(track <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;australia&#39;</span>),</span>
<span id="cb38-3"><a href="practice-times-vs-qualifying-times.html#cb38-3" aria-hidden="true" tabindex="-1"></a>         <span class="sc">!</span><span class="fu">is.na</span>(Time_grid_secs),</span>
<span id="cb38-4"><a href="practice-times-vs-qualifying-times.html#cb38-4" aria-hidden="true" tabindex="-1"></a>         year <span class="sc">&gt;=</span> <span class="dv">2015</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="dv">2019</span>) <span class="sc">%&gt;%</span></span>
<span id="cb38-5"><a href="practice-times-vs-qualifying-times.html#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> year <span class="sc">-</span> <span class="dv">2014</span>,</span>
<span id="cb38-6"><a href="practice-times-vs-qualifying-times.html#cb38-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">track =</span> <span class="fu">factor</span>(track),</span>
<span id="cb38-7"><a href="practice-times-vs-qualifying-times.html#cb38-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">constructor =</span> <span class="fu">case_when</span>(</span>
<span id="cb38-8"><a href="practice-times-vs-qualifying-times.html#cb38-8" aria-hidden="true" tabindex="-1"></a>           Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;Mercedes&#39;</span>) <span class="sc">~</span> <span class="st">&#39;Mercedes&#39;</span>,</span>
<span id="cb38-9"><a href="practice-times-vs-qualifying-times.html#cb38-9" aria-hidden="true" tabindex="-1"></a>           Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;Ferrari&#39;</span>) <span class="sc">~</span> <span class="st">&#39;Ferrari&#39;</span>,</span>
<span id="cb38-10"><a href="practice-times-vs-qualifying-times.html#cb38-10" aria-hidden="true" tabindex="-1"></a>           Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;McLaren Honda&#39;</span>, <span class="st">&#39;McLaren Renault&#39;</span>, <span class="st">&quot;McLaren Mercedes&quot;</span>) <span class="sc">~</span> <span class="st">&#39;McLaren&#39;</span>,</span>
<span id="cb38-11"><a href="practice-times-vs-qualifying-times.html#cb38-11" aria-hidden="true" tabindex="-1"></a>           Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Red Bull Racing Honda&quot;</span>, <span class="st">&quot;Red Bull Racing TAG Heuer&quot;</span>, <span class="st">&quot;Red Bull Racing Renault&quot;</span>) <span class="sc">~</span> <span class="st">&#39;Red Bull&#39;</span>,</span>
<span id="cb38-12"><a href="practice-times-vs-qualifying-times.html#cb38-12" aria-hidden="true" tabindex="-1"></a>           Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Toro Rosso-Ferrari&quot;</span>, <span class="st">&quot;Toro Rosso Ferrari&quot;</span>, <span class="st">&quot;Toro Rosso&quot;</span>, <span class="st">&quot;Scuderia Toro Rosso Honda&quot;</span>, <span class="st">&quot;STR Renault&quot;</span>) <span class="sc">~</span> <span class="st">&#39;Toro Rosso&#39;</span>,</span>
<span id="cb38-13"><a href="practice-times-vs-qualifying-times.html#cb38-13" aria-hidden="true" tabindex="-1"></a>           Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Williams Mercedes&quot;</span>) <span class="sc">~</span> <span class="st">&quot;Williams&quot;</span>,</span>
<span id="cb38-14"><a href="practice-times-vs-qualifying-times.html#cb38-14" aria-hidden="true" tabindex="-1"></a>           Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Sauber Ferrari&quot;</span>, <span class="st">&quot;Alfa Romeo Racing Ferrari&quot;</span>) <span class="sc">~</span> <span class="st">&#39;Alfa Romeo&#39;</span>,</span>
<span id="cb38-15"><a href="practice-times-vs-qualifying-times.html#cb38-15" aria-hidden="true" tabindex="-1"></a>           Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Renault&quot;</span>) <span class="sc">~</span> <span class="st">&#39;Renault&#39;</span>,</span>
<span id="cb38-16"><a href="practice-times-vs-qualifying-times.html#cb38-16" aria-hidden="true" tabindex="-1"></a>         Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Racing Point BWT Mercedes&quot;</span>, <span class="st">&quot;Force India Mercedes&quot;</span>) <span class="sc">~</span> <span class="st">&quot;Racing Point&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb38-17"><a href="practice-times-vs-qualifying-times.html#cb38-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(constructor))</span>
<span id="cb38-18"><a href="practice-times-vs-qualifying-times.html#cb38-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-19"><a href="practice-times-vs-qualifying-times.html#cb38-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Australia LMER</span></span>
<span id="cb38-20"><a href="practice-times-vs-qualifying-times.html#cb38-20" aria-hidden="true" tabindex="-1"></a>aus.constructor.lmer <span class="ot">&lt;-</span> <span class="fu">lmer</span>(Time_grid_secs <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> Year <span class="sc">+</span> (<span class="dv">1</span> <span class="sc">+</span> Year <span class="sc">|</span> constructor), <span class="at">data =</span> aus_constructor_clean)</span>
<span id="cb38-21"><a href="practice-times-vs-qualifying-times.html#cb38-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-22"><a href="practice-times-vs-qualifying-times.html#cb38-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot estimates and 95% CI</span></span>
<span id="cb38-23"><a href="practice-times-vs-qualifying-times.html#cb38-23" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(aus.constructor.lmer, <span class="at">effects =</span> <span class="st">&quot;ran_vals&quot;</span>, <span class="at">conf.int =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb38-24"><a href="practice-times-vs-qualifying-times.html#cb38-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb38-25"><a href="practice-times-vs-qualifying-times.html#cb38-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb38-26"><a href="practice-times-vs-qualifying-times.html#cb38-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_pointrange</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(level, estimate), <span class="at">y =</span> estimate, <span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high), <span class="at">linewidth =</span> <span class="dv">3</span>, <span class="at">alpha =</span> <span class="fl">0.25</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb38-27"><a href="practice-times-vs-qualifying-times.html#cb38-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb38-28"><a href="practice-times-vs-qualifying-times.html#cb38-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Grand Prix&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Coefficient Estimate \u00b1 95% CI&#39;</span>,</span>
<span id="cb38-29"><a href="practice-times-vs-qualifying-times.html#cb38-29" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Linear Multilevel Model&#39;</span>,</span>
<span id="cb38-30"><a href="practice-times-vs-qualifying-times.html#cb38-30" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;Australian Grand Prix: 2015 - 2019&#39;</span>,</span>
<span id="cb38-31"><a href="practice-times-vs-qualifying-times.html#cb38-31" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="st">&#39;&#39;</span>) <span class="sc">+</span></span>
<span id="cb38-32"><a href="practice-times-vs-qualifying-times.html#cb38-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb38-33"><a href="practice-times-vs-qualifying-times.html#cb38-33" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb38-34"><a href="practice-times-vs-qualifying-times.html#cb38-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> term, <span class="at">scales =</span> <span class="st">&#39;free_y&#39;</span>, <span class="at">ncol =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
<p>We need to take this one step further and transform these random effects with respect to the fixed effects (group average). The plot below shows how the coefficient estimates for each constructor compares to the overall average for the Australian Grand Prix.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="practice-times-vs-qualifying-times.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(aus.constructor.lmer, <span class="at">effects =</span> <span class="fu">c</span>(<span class="st">&quot;ran_vals&quot;</span>), <span class="at">conf.int =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb39-2"><a href="practice-times-vs-qualifying-times.html#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb39-3"><a href="practice-times-vs-qualifying-times.html#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="fu">tidy</span>(aus.constructor.lmer, <span class="at">effects =</span> <span class="fu">c</span>(<span class="st">&#39;fixed&#39;</span>), <span class="at">conf.int =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb39-4"><a href="practice-times-vs-qualifying-times.html#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb39-5"><a href="practice-times-vs-qualifying-times.html#cb39-5" aria-hidden="true" tabindex="-1"></a>              dplyr<span class="sc">::</span><span class="fu">select</span>(term, estimate, conf.low, conf.high), <span class="at">by =</span> <span class="st">&#39;term&#39;</span>, </span>
<span id="cb39-6"><a href="practice-times-vs-qualifying-times.html#cb39-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">&#39;&#39;</span>, <span class="st">&#39;_fixed&#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb39-7"><a href="practice-times-vs-qualifying-times.html#cb39-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">estimate =</span> estimate <span class="sc">+</span> estimate_fixed,</span>
<span id="cb39-8"><a href="practice-times-vs-qualifying-times.html#cb39-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">conf.low =</span> conf.low <span class="sc">+</span> conf.low_fixed, </span>
<span id="cb39-9"><a href="practice-times-vs-qualifying-times.html#cb39-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">conf.high =</span> conf.high <span class="sc">+</span> conf.high_fixed) <span class="sc">%&gt;%</span> </span>
<span id="cb39-10"><a href="practice-times-vs-qualifying-times.html#cb39-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb39-11"><a href="practice-times-vs-qualifying-times.html#cb39-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_pointrange</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(level, estimate), <span class="at">y =</span> estimate, <span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high), <span class="at">linewidth =</span> <span class="dv">3</span>, <span class="at">alpha =</span> <span class="fl">0.25</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb39-12"><a href="practice-times-vs-qualifying-times.html#cb39-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(level, estimate), <span class="at">y =</span> estimate_fixed, <span class="at">linetype =</span> <span class="st">&#39;Average&#39;</span>), <span class="at">group =</span> <span class="dv">1</span>, <span class="at">col =</span> <span class="st">&#39;red&#39;</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb39-13"><a href="practice-times-vs-qualifying-times.html#cb39-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb39-14"><a href="practice-times-vs-qualifying-times.html#cb39-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Grand Prix&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Coefficient Estimate \u00b1 95% CI&#39;</span>,</span>
<span id="cb39-15"><a href="practice-times-vs-qualifying-times.html#cb39-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Linear Multilevel Model&#39;</span>,</span>
<span id="cb39-16"><a href="practice-times-vs-qualifying-times.html#cb39-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;Australian Grand Prix: 2015 - 2019&#39;</span>,</span>
<span id="cb39-17"><a href="practice-times-vs-qualifying-times.html#cb39-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="st">&#39;&#39;</span>) <span class="sc">+</span></span>
<span id="cb39-18"><a href="practice-times-vs-qualifying-times.html#cb39-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb39-19"><a href="practice-times-vs-qualifying-times.html#cb39-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb39-20"><a href="practice-times-vs-qualifying-times.html#cb39-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&#39;bottom&#39;</span>) <span class="sc">+</span></span>
<span id="cb39-21"><a href="practice-times-vs-qualifying-times.html#cb39-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> term, <span class="at">scales =</span> <span class="st">&#39;free_y&#39;</span>, <span class="at">ncol =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb39-22"><a href="practice-times-vs-qualifying-times.html#cb39-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_linetype_manual</span>(<span class="st">&#39;&#39;</span>, <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&#39;Average&#39;</span> <span class="ot">=</span> <span class="st">&#39;solid&#39;</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
<p>A loose interpretation of these constructor-specific coefficients is:</p>
<p>*Mercedes began the turbo-hybrid era with the fastest car in Australia and their car development over the years was roughly consistent with the average development. Compare that with Red Bull who started with a slower car, but developed their car better than most throughout the turbo-hybrid era.</p>
<p>We can also make predictions with this multilevel model. Even though the Australian Grand Prix wasn’t held in 2020 or 2021, we can still predict what each constructor’s qualifying times for those years and quantify the uncertainty around that prediction. This multilevel model will also estimate the intercept (qualifying time at the beginning of the hybrid era) for constructors who entered after 2014. Below, I’ll plot the 95% confidence interval for all constructors together, and the 95% confidence and prediction intervals for constructors within their own pane.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="practice-times-vs-qualifying-times.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create theoretical prediction grid</span></span>
<span id="cb40-2"><a href="practice-times-vs-qualifying-times.html#cb40-2" aria-hidden="true" tabindex="-1"></a>aus.constructor.lmer.pred <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">year =</span> <span class="fu">seq</span>(<span class="dv">2014</span>, <span class="dv">2021</span>, <span class="dv">1</span>),</span>
<span id="cb40-3"><a href="practice-times-vs-qualifying-times.html#cb40-3" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">constructor =</span> <span class="fu">unique</span>(aus_constructor_clean<span class="sc">$</span>constructor)) <span class="sc">%&gt;%</span></span>
<span id="cb40-4"><a href="practice-times-vs-qualifying-times.html#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb40-5"><a href="practice-times-vs-qualifying-times.html#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> year <span class="sc">-</span> <span class="dv">2014</span>)</span>
<span id="cb40-6"><a href="practice-times-vs-qualifying-times.html#cb40-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-7"><a href="practice-times-vs-qualifying-times.html#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Try the parametric bootstrap method, and make prediction at the population level</span></span>
<span id="cb40-8"><a href="practice-times-vs-qualifying-times.html#cb40-8" aria-hidden="true" tabindex="-1"></a>aus_lmer_ci <span class="ot">&lt;-</span> <span class="fu">add_ci</span>(aus.constructor.lmer.pred, aus.constructor.lmer, <span class="at">alpha =</span> <span class="fl">0.05</span>, <span class="at">type =</span> <span class="st">&quot;boot&quot;</span>, <span class="at">includeRanef =</span> T, <span class="at">nSims =</span> <span class="dv">1000</span>)</span>
<span id="cb40-9"><a href="practice-times-vs-qualifying-times.html#cb40-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-10"><a href="practice-times-vs-qualifying-times.html#cb40-10" aria-hidden="true" tabindex="-1"></a>aus_lmer_pi <span class="ot">&lt;-</span> <span class="fu">add_pi</span>(aus.constructor.lmer.pred, aus.constructor.lmer, <span class="at">alpha =</span> <span class="fl">0.05</span>, <span class="at">type =</span> <span class="st">&quot;boot&quot;</span>, <span class="at">includeRanef =</span> T, <span class="at">nSims =</span> <span class="dv">1000</span>)</span>
<span id="cb40-11"><a href="practice-times-vs-qualifying-times.html#cb40-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-12"><a href="practice-times-vs-qualifying-times.html#cb40-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot all constructors together</span></span>
<span id="cb40-13"><a href="practice-times-vs-qualifying-times.html#cb40-13" aria-hidden="true" tabindex="-1"></a>aus_lmer_ci <span class="sc">%&gt;%</span> </span>
<span id="cb40-14"><a href="practice-times-vs-qualifying-times.html#cb40-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb40-15"><a href="practice-times-vs-qualifying-times.html#cb40-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(year, pred, <span class="at">group =</span> constructor, <span class="at">col =</span> constructor)) <span class="sc">+</span></span>
<span id="cb40-16"><a href="practice-times-vs-qualifying-times.html#cb40-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb40-17"><a href="practice-times-vs-qualifying-times.html#cb40-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Year&#39;</span>,</span>
<span id="cb40-18"><a href="practice-times-vs-qualifying-times.html#cb40-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Best Qualifying Time (secs)&#39;</span>,</span>
<span id="cb40-19"><a href="practice-times-vs-qualifying-times.html#cb40-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot; Qualifying Time Progression&quot;</span>,</span>
<span id="cb40-20"><a href="practice-times-vs-qualifying-times.html#cb40-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;Linear Multilevel Model Predictions \u00b1 95% CI (2014 - 2021)&#39;</span>) <span class="sc">+</span></span>
<span id="cb40-21"><a href="practice-times-vs-qualifying-times.html#cb40-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">2014</span>, <span class="dv">2015</span>, <span class="dv">2016</span>, <span class="dv">2017</span>, <span class="dv">2018</span>, <span class="dv">2019</span>, <span class="dv">2020</span>, <span class="dv">2021</span>)) <span class="sc">+</span></span>
<span id="cb40-22"><a href="practice-times-vs-qualifying-times.html#cb40-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(year, <span class="at">ymin =</span> LCB0<span class="fl">.025</span>, <span class="at">ymax =</span> UCB0<span class="fl">.975</span>, <span class="at">group =</span> constructor, <span class="at">fill =</span> constructor),  <span class="at">alpha =</span> <span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb40-23"><a href="practice-times-vs-qualifying-times.html#cb40-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb40-24"><a href="practice-times-vs-qualifying-times.html#cb40-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>)) </span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-30-1.png" width="672" /></p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="practice-times-vs-qualifying-times.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># facet</span></span>
<span id="cb41-2"><a href="practice-times-vs-qualifying-times.html#cb41-2" aria-hidden="true" tabindex="-1"></a>aus_lmer_ci <span class="sc">%&gt;%</span></span>
<span id="cb41-3"><a href="practice-times-vs-qualifying-times.html#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(<span class="at">LPB0.025 =</span> aus_lmer_pi<span class="sc">$</span>LPB0<span class="fl">.025</span>,</span>
<span id="cb41-4"><a href="practice-times-vs-qualifying-times.html#cb41-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">UPB0.975 =</span> aus_lmer_pi<span class="sc">$</span>UPB0<span class="fl">.975</span>) <span class="sc">%&gt;%</span></span>
<span id="cb41-5"><a href="practice-times-vs-qualifying-times.html#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb41-6"><a href="practice-times-vs-qualifying-times.html#cb41-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(year, pred, <span class="at">group =</span> constructor, <span class="at">col =</span> constructor)) <span class="sc">+</span></span>
<span id="cb41-7"><a href="practice-times-vs-qualifying-times.html#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb41-8"><a href="practice-times-vs-qualifying-times.html#cb41-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Year&#39;</span>,</span>
<span id="cb41-9"><a href="practice-times-vs-qualifying-times.html#cb41-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Best Qualifying Time (secs)&#39;</span>,</span>
<span id="cb41-10"><a href="practice-times-vs-qualifying-times.html#cb41-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot; Qualifying Time Progression&quot;</span>,</span>
<span id="cb41-11"><a href="practice-times-vs-qualifying-times.html#cb41-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;Linear Multilevel Model Predictions \u00b1 95% CI and 95% PI (2014 - 2021)&#39;</span>) <span class="sc">+</span></span>
<span id="cb41-12"><a href="practice-times-vs-qualifying-times.html#cb41-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">2014</span>, <span class="dv">2015</span>, <span class="dv">2016</span>, <span class="dv">2017</span>, <span class="dv">2018</span>, <span class="dv">2019</span>, <span class="dv">2020</span>, <span class="dv">2021</span>)) <span class="sc">+</span></span>
<span id="cb41-13"><a href="practice-times-vs-qualifying-times.html#cb41-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(year, <span class="at">ymin =</span> LCB0<span class="fl">.025</span>, <span class="at">ymax =</span> UCB0<span class="fl">.975</span>, <span class="at">group =</span> constructor, <span class="at">fill =</span> constructor),  <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb41-14"><a href="practice-times-vs-qualifying-times.html#cb41-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(year, <span class="at">ymin =</span> LPB0<span class="fl">.025</span>, <span class="at">ymax =</span> UPB0<span class="fl">.975</span>, <span class="at">group =</span> constructor, <span class="at">fill =</span> constructor),  <span class="at">alpha =</span> <span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb41-15"><a href="practice-times-vs-qualifying-times.html#cb41-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb41-16"><a href="practice-times-vs-qualifying-times.html#cb41-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb41-17"><a href="practice-times-vs-qualifying-times.html#cb41-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust=</span><span class="dv">1</span>),</span>
<span id="cb41-18"><a href="practice-times-vs-qualifying-times.html#cb41-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb41-19"><a href="practice-times-vs-qualifying-times.html#cb41-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> constructor)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-30-2.png" width="672" /></p>
<p>Let’s add a few more races to our data and plot the average qualifying times per year: Brazil, Austria, and Canada.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="practice-times-vs-qualifying-times.html#cb42-1" aria-hidden="true" tabindex="-1"></a>starting_and_ending_time_clean <span class="sc">%&gt;%</span></span>
<span id="cb42-2"><a href="practice-times-vs-qualifying-times.html#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(track <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;australia&#39;</span>, <span class="st">&#39;monaco&#39;</span>, <span class="st">&#39;brazil&#39;</span>, <span class="st">&#39;austria&#39;</span>, <span class="st">&#39;canada&#39;</span>),</span>
<span id="cb42-3"><a href="practice-times-vs-qualifying-times.html#cb42-3" aria-hidden="true" tabindex="-1"></a>         <span class="sc">!</span><span class="fu">is.na</span>(Time_grid_secs),</span>
<span id="cb42-4"><a href="practice-times-vs-qualifying-times.html#cb42-4" aria-hidden="true" tabindex="-1"></a>         year <span class="sc">&gt;=</span> <span class="dv">2014</span> <span class="sc">&amp;</span> year <span class="sc">&lt;</span> <span class="dv">2022</span>) <span class="sc">%&gt;%</span></span>
<span id="cb42-5"><a href="practice-times-vs-qualifying-times.html#cb42-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">track =</span> <span class="fu">factor</span>(track)) <span class="sc">%&gt;%</span></span>
<span id="cb42-6"><a href="practice-times-vs-qualifying-times.html#cb42-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> Time_grid_secs, <span class="at">group =</span> track, <span class="at">col =</span> track))<span class="sc">+</span></span>
<span id="cb42-7"><a href="practice-times-vs-qualifying-times.html#cb42-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun =</span> mean, <span class="at">geom =</span> <span class="st">&#39;point&#39;</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb42-8"><a href="practice-times-vs-qualifying-times.html#cb42-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun =</span> mean, <span class="at">geom =</span> <span class="st">&#39;line&#39;</span>, <span class="at">linewidth =</span> <span class="dv">2</span>, <span class="at">alpha =</span> <span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb42-9"><a href="practice-times-vs-qualifying-times.html#cb42-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb42-10"><a href="practice-times-vs-qualifying-times.html#cb42-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Year&#39;</span>,</span>
<span id="cb42-11"><a href="practice-times-vs-qualifying-times.html#cb42-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Best Qualifying Time (secs)&#39;</span>,</span>
<span id="cb42-12"><a href="practice-times-vs-qualifying-times.html#cb42-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Qualifying Time Progression for Five Races&#39;</span>,</span>
<span id="cb42-13"><a href="practice-times-vs-qualifying-times.html#cb42-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2015 - 2019&#39;</span>,</span>
<span id="cb42-14"><a href="practice-times-vs-qualifying-times.html#cb42-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="st">&#39;&#39;</span>) <span class="sc">+</span></span>
<span id="cb42-15"><a href="practice-times-vs-qualifying-times.html#cb42-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb42-16"><a href="practice-times-vs-qualifying-times.html#cb42-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb42-17"><a href="practice-times-vs-qualifying-times.html#cb42-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-31-1.png" width="672" /></p>
<p>Model Qualifying Progression for all races and constructors.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="practice-times-vs-qualifying-times.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filter dataframe</span></span>
<span id="cb43-2"><a href="practice-times-vs-qualifying-times.html#cb43-2" aria-hidden="true" tabindex="-1"></a>quali.constructor.df <span class="ot">&lt;-</span> starting_and_ending_time_clean <span class="sc">%&gt;%</span></span>
<span id="cb43-3"><a href="practice-times-vs-qualifying-times.html#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Time_grid_secs),</span>
<span id="cb43-4"><a href="practice-times-vs-qualifying-times.html#cb43-4" aria-hidden="true" tabindex="-1"></a>         year <span class="sc">&gt;=</span> <span class="dv">2014</span> <span class="sc">&amp;</span> year <span class="sc">&lt;</span> <span class="dv">2022</span>) <span class="sc">%&gt;%</span></span>
<span id="cb43-5"><a href="practice-times-vs-qualifying-times.html#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">race =</span> <span class="fu">factor</span>(race_grid),</span>
<span id="cb43-6"><a href="practice-times-vs-qualifying-times.html#cb43-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">Year =</span> year <span class="sc">-</span> <span class="dv">2014</span>,</span>
<span id="cb43-7"><a href="practice-times-vs-qualifying-times.html#cb43-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">constructor =</span> <span class="fu">case_when</span>(</span>
<span id="cb43-8"><a href="practice-times-vs-qualifying-times.html#cb43-8" aria-hidden="true" tabindex="-1"></a>           Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;Mercedes&#39;</span>) <span class="sc">~</span> <span class="st">&#39;Mercedes&#39;</span>,</span>
<span id="cb43-9"><a href="practice-times-vs-qualifying-times.html#cb43-9" aria-hidden="true" tabindex="-1"></a>           Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;Ferrari&#39;</span>) <span class="sc">~</span> <span class="st">&#39;Ferrari&#39;</span>,</span>
<span id="cb43-10"><a href="practice-times-vs-qualifying-times.html#cb43-10" aria-hidden="true" tabindex="-1"></a>           Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;McLaren Honda&#39;</span>, <span class="st">&#39;McLaren Renault&#39;</span>, <span class="st">&quot;McLaren Mercedes&quot;</span>) <span class="sc">~</span> <span class="st">&#39;McLaren&#39;</span>,</span>
<span id="cb43-11"><a href="practice-times-vs-qualifying-times.html#cb43-11" aria-hidden="true" tabindex="-1"></a>           Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Red Bull Racing Honda&quot;</span>, <span class="st">&quot;Red Bull Racing TAG Heuer&quot;</span>, <span class="st">&quot;Red Bull Racing Renault&quot;</span>) <span class="sc">~</span> <span class="st">&#39;Red Bull&#39;</span>,</span>
<span id="cb43-12"><a href="practice-times-vs-qualifying-times.html#cb43-12" aria-hidden="true" tabindex="-1"></a>           Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Toro Rosso-Ferrari&quot;</span>, <span class="st">&quot;Toro Rosso Ferrari&quot;</span>, <span class="st">&quot;Toro Rosso&quot;</span>, <span class="st">&quot;Scuderia Toro Rosso Honda&quot;</span>, <span class="st">&quot;STR Renault&quot;</span>) <span class="sc">~</span> <span class="st">&#39;Toro Rosso&#39;</span>,</span>
<span id="cb43-13"><a href="practice-times-vs-qualifying-times.html#cb43-13" aria-hidden="true" tabindex="-1"></a>           Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Williams Mercedes&quot;</span>) <span class="sc">~</span> <span class="st">&quot;Williams&quot;</span>,</span>
<span id="cb43-14"><a href="practice-times-vs-qualifying-times.html#cb43-14" aria-hidden="true" tabindex="-1"></a>           Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Sauber Ferrari&quot;</span>, <span class="st">&quot;Alfa Romeo Racing Ferrari&quot;</span>) <span class="sc">~</span> <span class="st">&#39;Alfa Romeo&#39;</span>,</span>
<span id="cb43-15"><a href="practice-times-vs-qualifying-times.html#cb43-15" aria-hidden="true" tabindex="-1"></a>           Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Renault&quot;</span>) <span class="sc">~</span> <span class="st">&#39;Renault&#39;</span>,</span>
<span id="cb43-16"><a href="practice-times-vs-qualifying-times.html#cb43-16" aria-hidden="true" tabindex="-1"></a>         Car_grid <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Racing Point BWT Mercedes&quot;</span>, <span class="st">&quot;Force India Mercedes&quot;</span>) <span class="sc">~</span> <span class="st">&quot;Racing Point&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb43-17"><a href="practice-times-vs-qualifying-times.html#cb43-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(constructor),</span>
<span id="cb43-18"><a href="practice-times-vs-qualifying-times.html#cb43-18" aria-hidden="true" tabindex="-1"></a>         <span class="sc">!</span>track <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;netherlands&#39;</span>, <span class="st">&#39;portugal&#39;</span>, <span class="st">&#39;qatar&#39;</span>, <span class="st">&#39;saudi-arabia&#39;</span>, <span class="st">&#39;styria&#39;</span>, <span class="st">&#39;turkey&#39;</span>))</span>
<span id="cb43-19"><a href="practice-times-vs-qualifying-times.html#cb43-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-20"><a href="practice-times-vs-qualifying-times.html#cb43-20" aria-hidden="true" tabindex="-1"></a><span class="co"># fit model</span></span>
<span id="cb43-21"><a href="practice-times-vs-qualifying-times.html#cb43-21" aria-hidden="true" tabindex="-1"></a>quali.constructor.lmer <span class="ot">&lt;-</span> <span class="fu">lmer</span>(Time_grid_secs <span class="sc">~</span> <span class="dv">0</span> <span class="sc">+</span> Year<span class="sc">:</span>race <span class="sc">+</span> (Year <span class="sc">|</span> race<span class="sc">:</span>constructor), <span class="at">data =</span> quali.constructor.df)</span></code></pre></div>
<pre><code>## boundary (singular) fit: see help(&#39;isSingular&#39;)</code></pre>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="practice-times-vs-qualifying-times.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print output</span></span>
<span id="cb45-2"><a href="practice-times-vs-qualifying-times.html#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">display</span>(quali.constructor.lmer, <span class="at">digits =</span> <span class="dv">4</span>)</span></code></pre></div>
<pre><code>## lmer(formula = Time_grid_secs ~ 0 + Year:race + (Year | race:constructor), 
##     data = quali.constructor.df)
##                        coef.est coef.se
## Year:raceabu-dhabi     20.0414   0.1084
## Year:raceaustralia     16.9602   0.1694
## Year:raceaustria       13.8208   0.0977
## Year:raceazerbaijan    21.6741   0.1401
## Year:racebahrain       17.7886   0.0972
## Year:racebelgium       22.9618   0.1115
## Year:racebrazil        14.5073   0.1714
## Year:racecanada        15.1654   0.1684
## Year:racechina         19.0065   0.1735
## Year:raceeurope        52.9557   8.9574
## Year:racefrance        19.2402   0.1666
## Year:racegermany       16.4504   0.1356
## Year:racegreat-britain 18.5318   0.1086
## Year:racehungary       16.8132   0.1093
## Year:raceitaly         17.0791   0.0903
## Year:racejapan         18.7663   0.1714
## Year:racemalaysia      14.9387   0.4025
## Year:racemexico        16.3663   0.1295
## Year:racemonaco        15.2706   0.1285
## Year:racerussia        20.2868   0.1143
## Year:racesingapore     20.7574   0.1702
## Year:racespain         16.6552   0.1079
## Year:raceunited-states 20.0605   0.1302
## 
## Error terms:
##  Groups           Name        Std.Dev. Corr    
##  race:constructor (Intercept) 92.7692          
##                   Year        19.5757  -1.0000 
##  Residual                      4.9484          
## ---
## number of obs: 2384, groups: race:constructor, 207
## AIC = 15877.3, DIC = 15741.6
## deviance = 15782.4</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="practice-times-vs-qualifying-times.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fixef</span>(quali.constructor.lmer)</span></code></pre></div>
<pre><code>##     Year:raceabu-dhabi     Year:raceaustralia       Year:raceaustria 
##               20.04137               16.96022               13.82075 
##    Year:raceazerbaijan       Year:racebahrain       Year:racebelgium 
##               21.67405               17.78855               22.96181 
##        Year:racebrazil        Year:racecanada         Year:racechina 
##               14.50725               15.16535               19.00651 
##        Year:raceeurope        Year:racefrance       Year:racegermany 
##               52.95569               19.24025               16.45043 
## Year:racegreat-britain       Year:racehungary         Year:raceitaly 
##               18.53182               16.81320               17.07905 
##         Year:racejapan      Year:racemalaysia        Year:racemexico 
##               18.76626               14.93875               16.36629 
##        Year:racemonaco        Year:racerussia     Year:racesingapore 
##               15.27059               20.28681               20.75737 
##         Year:racespain Year:raceunited-states 
##               16.65516               20.06046</code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="practice-times-vs-qualifying-times.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ranef</span>(quali.constructor.lmer)</span></code></pre></div>
<pre><code>## $`race:constructor`
##                            (Intercept)         Year
## abu-dhabi:Alfa Romeo       105.3888494 -22.23862156
## abu-dhabi:Ferrari          103.9553518 -21.93613215
## abu-dhabi:McLaren          104.9314262 -22.14209843
## abu-dhabi:Mercedes         102.5668124 -21.64312959
## abu-dhabi:Racing Point     102.7749915 -21.68705849
## abu-dhabi:Red Bull         105.2478021 -22.20885847
## abu-dhabi:Renault          103.8161991 -21.90676885
## abu-dhabi:Toro Rosso       104.1235964 -21.97163427
## abu-dhabi:Williams         103.6145615 -21.86422030
## australia:Alfa Romeo        96.6764939 -20.40018440
## australia:Ferrari           96.4782906 -20.35836055
## australia:McLaren           98.9854665 -20.88741210
## australia:Mercedes          95.4288142 -20.13690535
## australia:Racing Point      98.5765750 -20.80112990
## australia:Red Bull          97.4877518 -20.57137194
## australia:Renault           94.0184059 -19.83928813
## australia:Toro Rosso        98.1800502 -20.71745723
## australia:Williams         100.2678305 -21.15801006
## austria:Alfa Romeo          69.9592213 -14.76244078
## austria:Ferrari             69.9660246 -14.76387637
## austria:McLaren             70.1639453 -14.80564060
## austria:Mercedes            68.7510628 -14.50750128
## austria:Racing Point        70.6338510 -14.90479772
## austria:Red Bull            70.1143492 -14.79517508
## austria:Renault             68.5418912 -14.46336296
## austria:Toro Rosso          69.9322973 -14.75675941
## austria:Williams            69.4209644 -14.64886053
## azerbaijan:Alfa Romeo      106.0945756 -22.38754033
## azerbaijan:Ferrari         102.9064932 -21.71480732
## azerbaijan:McLaren         105.5660712 -22.27601801
## azerbaijan:Mercedes        101.2843708 -21.37251526
## azerbaijan:Racing Point    100.5835904 -21.22464014
## azerbaijan:Red Bull        103.3739216 -21.81344169
## azerbaijan:Renault         104.8257524 -22.11979967
## azerbaijan:Toro Rosso      111.1075041 -23.44534314
## azerbaijan:Williams        102.1669690 -21.55875667
## bahrain:Alfa Romeo          97.3843724 -20.54955734
## bahrain:Ferrari             95.1189068 -20.07151026
## bahrain:McLaren             96.6682908 -20.39845342
## bahrain:Mercedes            94.5962574 -19.96122342
## bahrain:Racing Point        99.0049850 -20.89153082
## bahrain:Red Bull            96.0504572 -20.26808131
## bahrain:Renault            110.3710541 -23.28994118
## bahrain:Toro Rosso          96.8450798 -20.43575855
## bahrain:Williams            94.9008402 -20.02549494
## belgium:Alfa Romeo         115.8438363 -24.44477998
## belgium:Ferrari            116.1755434 -24.51477512
## belgium:McLaren            118.3025878 -24.96361327
## belgium:Mercedes           113.0594973 -23.85724285
## belgium:Racing Point       119.5848441 -25.23418851
## belgium:Red Bull           114.7907434 -24.22256165
## belgium:Renault            110.3004988 -23.27505295
## belgium:Toro Rosso         119.5168976 -25.21985078
## belgium:Williams           114.5947505 -24.18120422
## brazil:Alfa Romeo           73.4426309 -15.49749223
## brazil:Ferrari              71.5964999 -15.10793101
## brazil:McLaren              72.5092070 -15.30052584
## brazil:Mercedes             70.7744572 -14.93446772
## brazil:Racing Point         72.7975666 -15.36137402
## brazil:Red Bull             71.8891371 -15.16968183
## brazil:Renault              74.6963518 -15.76204606
## brazil:Toro Rosso           73.6252219 -15.53602166
## brazil:Williams             72.0537073 -15.20440861
## canada:Alfa Romeo           77.9489953 -16.44840243
## canada:Ferrari              75.7566592 -15.98578677
## canada:McLaren              76.4715765 -16.13664499
## canada:Mercedes             74.4696938 -15.71421784
## canada:Racing Point         76.3347133 -16.10776482
## canada:Red Bull             75.5816539 -15.94885805
## canada:Renault              77.0308722 -16.25466475
## canada:Toro Rosso           77.6820278 -16.39206831
## canada:Williams             76.1507821 -16.06895259
## china:Alfa Romeo           110.8062479 -23.38177358
## china:Ferrari              106.9344751 -22.56477167
## china:McLaren              109.6609828 -23.14010553
## china:Mercedes             106.0228551 -22.37240623
## china:Racing Point         109.6427484 -23.13625779
## china:Red Bull             106.9846348 -22.57535611
## china:Renault              104.0144560 -21.94860402
## china:Toro Rosso           108.6769403 -22.93245785
## china:Williams             107.6026698 -22.70577074
## europe:Alfa Romeo            0.3930099  -0.08293095
## europe:Ferrari              -3.0906048   0.65216378
## europe:McLaren              -0.6450108   0.13610692
## europe:Mercedes             11.1031435  -2.34292915
## europe:Racing Point         -3.0010163   0.63325926
## europe:Red Bull             -1.9698870   0.41567559
## europe:Renault               0.8279655  -0.17471308
## europe:Toro Rosso           -1.8139686   0.38277446
## europe:Williams             -1.8036314   0.38059317
## france:Alfa Romeo           88.8314902 -18.74477143
## france:Ferrari              91.2805013 -19.26154935
## france:McLaren              91.9342398 -19.39949795
## france:Mercedes             92.2078239 -19.45722828
## france:Racing Point         92.4508961 -19.50852014
## france:Red Bull             92.5300470 -19.52522217
## france:Renault              93.5864780 -19.74814488
## france:Toro Rosso           95.4616217 -20.14382822
## france:Williams             89.2303221 -18.82893092
## germany:Alfa Romeo          76.2099236 -16.08143233
## germany:Ferrari             74.4950379 -15.71956584
## germany:McLaren             75.0614091 -15.83907862
## germany:Mercedes            72.1623845 -15.22734111
## germany:Racing Point        74.8681714 -15.79830256
## germany:Red Bull            74.4019031 -15.69991300
## germany:Renault             69.6522802 -14.69767161
## germany:Toro Rosso          77.0756996 -16.26412400
## germany:Williams            74.0744547 -15.63081650
## great-britain:Alfa Romeo    99.8415293 -21.06805414
## great-britain:Ferrari       98.9481132 -20.87953002
## great-britain:McLaren       96.9273473 -20.45311821
## great-britain:Mercedes      94.5395600 -19.94925942
## great-britain:Racing Point  96.7061745 -20.40644745
## great-britain:Red Bull      97.0964104 -20.48879304
## great-britain:Renault       96.4989173 -20.36271309
## great-britain:Toro Rosso    98.0196319 -20.68360658
## great-britain:Williams     100.1013352 -21.12287707
## hungary:Alfa Romeo          86.3682821 -18.22499771
## hungary:Ferrari             85.6511691 -18.07367616
## hungary:McLaren             84.9670846 -17.92932412
## hungary:Mercedes            84.3445337 -17.79795659
## hungary:Racing Point        85.1710252 -17.97235863
## hungary:Red Bull            84.3916334 -17.80789531
## hungary:Renault            110.1325778 -23.23961912
## hungary:Toro Rosso          85.7386546 -18.09213692
## hungary:Williams            86.5065966 -18.25418414
## italy:Alfa Romeo            90.1116287 -19.01489976
## italy:Ferrari               88.4471261 -18.66366487
## italy:McLaren               89.6520638 -18.91792471
## italy:Mercedes              88.0284979 -18.57532805
## italy:Racing Point          88.8975299 -18.75870680
## italy:Red Bull              89.6895518 -18.92583525
## italy:Renault               97.7052585 -20.61726911
## italy:Toro Rosso            89.2288546 -18.82862125
## italy:Williams              88.0383298 -18.57740273
## japan:Alfa Romeo            96.2848540 -20.31754253
## japan:Ferrari               93.5665144 -19.74393226
## japan:McLaren               95.1597873 -20.08013665
## japan:Mercedes              92.1636146 -19.44789945
## japan:Racing Point          94.8884194 -20.02287396
## japan:Red Bull              93.4714653 -19.72387549
## japan:Renault               94.4085017 -19.92160416
## japan:Toro Rosso            95.1120455 -20.07006242
## japan:Williams              93.8227501 -19.79800182
## malaysia:Alfa Romeo        120.0435523 -25.33098279
## malaysia:Ferrari           117.3759161 -24.76807169
## malaysia:McLaren           117.9785267 -24.89523153
## malaysia:Mercedes          118.5325146 -25.01213126
## malaysia:Racing Point      117.6678681 -24.82967793
## malaysia:Red Bull          119.4294242 -25.20139259
## malaysia:Renault           117.5597908 -24.80687201
## malaysia:Toro Rosso        120.1156234 -25.34619087
## malaysia:Williams          121.6835031 -25.67703690
## mexico:Alfa Romeo           81.7606772 -17.25272426
## mexico:Ferrari              80.2741891 -16.93905305
## mexico:McLaren              76.2403359 -16.08784978
## mexico:Mercedes             79.4053248 -16.75570973
## mexico:Racing Point         80.8227334 -17.05480410
## mexico:Red Bull             79.8800678 -16.85588758
## mexico:Renault              79.7782209 -16.83439637
## mexico:Toro Rosso           82.1160370 -17.32771048
## mexico:Williams             80.0789006 -16.89784427
## monaco:Alfa Romeo           78.5874505 -16.58312602
## monaco:Ferrari              76.4362328 -16.12918694
## monaco:McLaren              79.2137750 -16.71528984
## monaco:Mercedes             75.6385755 -15.96086934
## monaco:Racing Point         77.6175583 -16.37846429
## monaco:Red Bull             76.0707905 -16.05207317
## monaco:Renault              78.1505849 -16.49094085
## monaco:Toro Rosso           77.4214743 -16.33708763
## monaco:Williams             78.2689366 -16.51591483
## russia:Alfa Romeo           97.4513113 -20.56368244
## russia:Ferrari              97.4151023 -20.55604180
## russia:McLaren              98.2112612 -20.72404323
## russia:Mercedes             95.6118812 -20.17553522
## russia:Racing Point         99.2962409 -20.95299015
## russia:Red Bull             98.4497520 -20.77436836
## russia:Renault             100.7601014 -21.26188659
## russia:Toro Rosso           99.0546353 -20.90200776
## russia:Williams             98.6944517 -20.82600363
## singapore:Alfa Romeo       109.6791361 -23.14393615
## singapore:Ferrari          106.4642292 -22.46554276
## singapore:McLaren          107.6190398 -22.70922504
## singapore:Mercedes         105.8564513 -22.33729255
## singapore:Racing Point     107.9077901 -22.77015567
## singapore:Red Bull         105.6415104 -22.29193681
## singapore:Renault          110.4752459 -23.31192720
## singapore:Toro Rosso       107.7909906 -22.74550924
## singapore:Williams         107.6971359 -22.72570449
## spain:Alfa Romeo            87.9954374 -18.56835181
## spain:Ferrari               86.0067821 -18.14871582
## spain:McLaren               87.3408439 -18.43022279
## spain:Mercedes              84.9414106 -17.92390653
## spain:Racing Point          88.3776966 -18.64901419
## spain:Red Bull              86.0003757 -18.14736397
## spain:Renault               87.2161025 -18.40390049
## spain:Toro Rosso            87.8356078 -18.53462537
## spain:Williams              86.3799017 -18.22744963
## united-states:Alfa Romeo   107.1268096 -22.60535711
## united-states:Ferrari      104.4308758 -22.03647482
## united-states:McLaren      105.8037090 -22.32616313
## united-states:Mercedes     102.8369491 -21.70013248
## united-states:Racing Point 106.1133804 -22.39150841
## united-states:Red Bull     105.8805207 -22.34237156
## united-states:Renault       98.7075520 -20.82876799
## united-states:Toro Rosso   108.5441116 -22.90442902
## united-states:Williams     105.3788046 -22.23650195
## 
## with conditional variances for &quot;race:constructor&quot;</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="practice-times-vs-qualifying-times.html#cb51-1" aria-hidden="true" tabindex="-1"></a>quali.constructor.grid <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">year =</span> <span class="fu">seq</span>(<span class="dv">2014</span>, <span class="dv">2021</span>, <span class="dv">1</span>),</span>
<span id="cb51-2"><a href="practice-times-vs-qualifying-times.html#cb51-2" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">constructor =</span> <span class="fu">unique</span>(quali.constructor.df<span class="sc">$</span>constructor),</span>
<span id="cb51-3"><a href="practice-times-vs-qualifying-times.html#cb51-3" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">race =</span> <span class="fu">unique</span>(quali.constructor.df<span class="sc">$</span>race)) <span class="sc">%&gt;%</span></span>
<span id="cb51-4"><a href="practice-times-vs-qualifying-times.html#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb51-5"><a href="practice-times-vs-qualifying-times.html#cb51-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> year <span class="sc">-</span> <span class="dv">2014</span>)</span>
<span id="cb51-6"><a href="practice-times-vs-qualifying-times.html#cb51-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-7"><a href="practice-times-vs-qualifying-times.html#cb51-7" aria-hidden="true" tabindex="-1"></a><span class="co"># create confidence intervals around the predicted mean</span></span>
<span id="cb51-8"><a href="practice-times-vs-qualifying-times.html#cb51-8" aria-hidden="true" tabindex="-1"></a>quali.constructor.lmer.pred <span class="ot">&lt;-</span> <span class="fu">add_ci</span>(quali.constructor.grid, quali.constructor.lmer, <span class="at">alpha =</span> <span class="fl">0.05</span>,</span>
<span id="cb51-9"><a href="practice-times-vs-qualifying-times.html#cb51-9" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">allow.new.levels =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-10"><a href="practice-times-vs-qualifying-times.html#cb51-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-11"><a href="practice-times-vs-qualifying-times.html#cb51-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-12"><a href="practice-times-vs-qualifying-times.html#cb51-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot all constructors together</span></span>
<span id="cb51-13"><a href="practice-times-vs-qualifying-times.html#cb51-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-14"><a href="practice-times-vs-qualifying-times.html#cb51-14" aria-hidden="true" tabindex="-1"></a><span class="co"># facet</span></span>
<span id="cb51-15"><a href="practice-times-vs-qualifying-times.html#cb51-15" aria-hidden="true" tabindex="-1"></a>quali.constructor.lmer.pred <span class="sc">%&gt;%</span> </span>
<span id="cb51-16"><a href="practice-times-vs-qualifying-times.html#cb51-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(race <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;australia&#39;</span>, <span class="st">&#39;monaco&#39;</span>, <span class="st">&#39;brazil&#39;</span>, <span class="st">&#39;austria&#39;</span>),</span>
<span id="cb51-17"><a href="practice-times-vs-qualifying-times.html#cb51-17" aria-hidden="true" tabindex="-1"></a>         constructor <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;Red Bull&#39;</span>, <span class="st">&#39;Mercedes&#39;</span>, <span class="st">&#39;Ferrari&#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb51-18"><a href="practice-times-vs-qualifying-times.html#cb51-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb51-19"><a href="practice-times-vs-qualifying-times.html#cb51-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(year, pred, <span class="at">group =</span> constructor, <span class="at">col =</span> constructor)) <span class="sc">+</span></span>
<span id="cb51-20"><a href="practice-times-vs-qualifying-times.html#cb51-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb51-21"><a href="practice-times-vs-qualifying-times.html#cb51-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Year&#39;</span>,</span>
<span id="cb51-22"><a href="practice-times-vs-qualifying-times.html#cb51-22" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Best Qualifying Time (secs)&#39;</span>,</span>
<span id="cb51-23"><a href="practice-times-vs-qualifying-times.html#cb51-23" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot; Qualifying Time Progression&quot;</span>,</span>
<span id="cb51-24"><a href="practice-times-vs-qualifying-times.html#cb51-24" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;Linear Multilevel Model Predictions \u00b1 95% CI and 95% PI (2014 - 2021)&#39;</span>) <span class="sc">+</span></span>
<span id="cb51-25"><a href="practice-times-vs-qualifying-times.html#cb51-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">2014</span>, <span class="dv">2015</span>, <span class="dv">2016</span>, <span class="dv">2017</span>, <span class="dv">2018</span>, <span class="dv">2019</span>, <span class="dv">2020</span>, <span class="dv">2021</span>)) <span class="sc">+</span></span>
<span id="cb51-26"><a href="practice-times-vs-qualifying-times.html#cb51-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(year, <span class="at">ymin =</span> LCB0<span class="fl">.025</span>, <span class="at">ymax =</span> UCB0<span class="fl">.975</span>, <span class="at">group =</span> constructor, <span class="at">fill =</span> constructor),  <span class="at">alpha =</span> <span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb51-27"><a href="practice-times-vs-qualifying-times.html#cb51-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb51-28"><a href="practice-times-vs-qualifying-times.html#cb51-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb51-29"><a href="practice-times-vs-qualifying-times.html#cb51-29" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust=</span><span class="dv">1</span>),</span>
<span id="cb51-30"><a href="practice-times-vs-qualifying-times.html#cb51-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb51-31"><a href="practice-times-vs-qualifying-times.html#cb51-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> race, <span class="at">scales =</span> <span class="st">&#39;free_y&#39;</span>)  <span class="sc">+</span></span>
<span id="cb51-32"><a href="practice-times-vs-qualifying-times.html#cb51-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&#39;Red Bull&#39;</span> <span class="ot">=</span> <span class="st">&#39;blue&#39;</span>, <span class="st">&#39;Mercedes&#39;</span> <span class="ot">=</span> <span class="st">&#39;green&#39;</span>, <span class="st">&#39;Ferrari&#39;</span> <span class="ot">=</span> <span class="st">&#39;red&#39;</span>))  <span class="sc">+</span></span>
<span id="cb51-33"><a href="practice-times-vs-qualifying-times.html#cb51-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&#39;Red Bull&#39;</span> <span class="ot">=</span> <span class="st">&#39;blue&#39;</span>, <span class="st">&#39;Mercedes&#39;</span> <span class="ot">=</span> <span class="st">&#39;green&#39;</span>, <span class="st">&#39;Ferrari&#39;</span> <span class="ot">=</span> <span class="st">&#39;red&#39;</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-33-1.png" width="672" /></p>
<div id="qualifying-times-by-driver" class="section level3 hasAnchor" number="4.4.1">
<h3><span class="header-section-number">4.4.1</span> Qualifying times by Driver<a href="practice-times-vs-qualifying-times.html#qualifying-times-by-driver" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="section" class="section level4 hasAnchor" number="4.4.1.1">
<h4><span class="header-section-number">4.4.1.1</span> 2014<a href="practice-times-vs-qualifying-times.html#section" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="practice-times-vs-qualifying-times.html#cb52-1" aria-hidden="true" tabindex="-1"></a>starting_and_ending_time_clean <span class="sc">%&gt;%</span></span>
<span id="cb52-2"><a href="practice-times-vs-qualifying-times.html#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Time_grid_secs),</span>
<span id="cb52-3"><a href="practice-times-vs-qualifying-times.html#cb52-3" aria-hidden="true" tabindex="-1"></a>         year <span class="sc">==</span> <span class="dv">2014</span>) <span class="sc">%&gt;%</span></span>
<span id="cb52-4"><a href="practice-times-vs-qualifying-times.html#cb52-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(track) <span class="sc">%&gt;%</span></span>
<span id="cb52-5"><a href="practice-times-vs-qualifying-times.html#cb52-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">track_mean =</span> <span class="fu">mean</span>(Time_grid_secs, <span class="at">na.rm =</span> T),</span>
<span id="cb52-6"><a href="practice-times-vs-qualifying-times.html#cb52-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">Time_std_track =</span> Time_grid_secs <span class="sc">-</span> track_mean) <span class="sc">%&gt;%</span> </span>
<span id="cb52-7"><a href="practice-times-vs-qualifying-times.html#cb52-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb52-8"><a href="practice-times-vs-qualifying-times.html#cb52-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Abbr) <span class="sc">%&gt;%</span> </span>
<span id="cb52-9"><a href="practice-times-vs-qualifying-times.html#cb52-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">driver_n =</span> <span class="fu">n</span>(),</span>
<span id="cb52-10"><a href="practice-times-vs-qualifying-times.html#cb52-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">mean =</span> <span class="fu">mean</span>(Time_std_track, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span></span>
<span id="cb52-11"><a href="practice-times-vs-qualifying-times.html#cb52-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb52-12"><a href="practice-times-vs-qualifying-times.html#cb52-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(driver_n <span class="sc">&gt;</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb52-13"><a href="practice-times-vs-qualifying-times.html#cb52-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(Time_std_track, <span class="at">y =</span> <span class="fu">fct_reorder</span>(Abbr, <span class="fu">desc</span>(mean)))) <span class="sc">+</span></span>
<span id="cb52-14"><a href="practice-times-vs-qualifying-times.html#cb52-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">w =</span> <span class="dv">0</span>, <span class="at">h =</span> <span class="fl">0.1</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb52-15"><a href="practice-times-vs-qualifying-times.html#cb52-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb52-16"><a href="practice-times-vs-qualifying-times.html#cb52-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Standardized Qualifying Time (secs)&#39;</span>,</span>
<span id="cb52-17"><a href="practice-times-vs-qualifying-times.html#cb52-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Driver&#39;</span>,</span>
<span id="cb52-18"><a href="practice-times-vs-qualifying-times.html#cb52-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Standardized Qualifying Time&#39;</span>,</span>
<span id="cb52-19"><a href="practice-times-vs-qualifying-times.html#cb52-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2014&#39;</span>,</span>
<span id="cb52-20"><a href="practice-times-vs-qualifying-times.html#cb52-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&#39;*Times are subtracted from the average time for each Grand Prix&#39;</span>) <span class="sc">+</span></span>
<span id="cb52-21"><a href="practice-times-vs-qualifying-times.html#cb52-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">col =</span> <span class="st">&#39;red&#39;</span>) <span class="sc">+</span></span>
<span id="cb52-22"><a href="practice-times-vs-qualifying-times.html#cb52-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb52-23"><a href="practice-times-vs-qualifying-times.html#cb52-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb52-24"><a href="practice-times-vs-qualifying-times.html#cb52-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-34-1.png" width="672" /></p>
</div>
<div id="section-1" class="section level4 hasAnchor" number="4.4.1.2">
<h4><span class="header-section-number">4.4.1.2</span> 2015<a href="practice-times-vs-qualifying-times.html#section-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="practice-times-vs-qualifying-times.html#cb53-1" aria-hidden="true" tabindex="-1"></a>starting_and_ending_time_clean <span class="sc">%&gt;%</span></span>
<span id="cb53-2"><a href="practice-times-vs-qualifying-times.html#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Time_grid_secs),</span>
<span id="cb53-3"><a href="practice-times-vs-qualifying-times.html#cb53-3" aria-hidden="true" tabindex="-1"></a>         year <span class="sc">==</span> <span class="dv">2015</span>) <span class="sc">%&gt;%</span></span>
<span id="cb53-4"><a href="practice-times-vs-qualifying-times.html#cb53-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(track) <span class="sc">%&gt;%</span></span>
<span id="cb53-5"><a href="practice-times-vs-qualifying-times.html#cb53-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">track_mean =</span> <span class="fu">mean</span>(Time_grid_secs, <span class="at">na.rm =</span> T),</span>
<span id="cb53-6"><a href="practice-times-vs-qualifying-times.html#cb53-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">Time_std_track =</span> Time_grid_secs <span class="sc">-</span> track_mean) <span class="sc">%&gt;%</span> </span>
<span id="cb53-7"><a href="practice-times-vs-qualifying-times.html#cb53-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb53-8"><a href="practice-times-vs-qualifying-times.html#cb53-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Abbr) <span class="sc">%&gt;%</span> </span>
<span id="cb53-9"><a href="practice-times-vs-qualifying-times.html#cb53-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">driver_n =</span> <span class="fu">n</span>(),</span>
<span id="cb53-10"><a href="practice-times-vs-qualifying-times.html#cb53-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">mean =</span> <span class="fu">mean</span>(Time_std_track, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span></span>
<span id="cb53-11"><a href="practice-times-vs-qualifying-times.html#cb53-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb53-12"><a href="practice-times-vs-qualifying-times.html#cb53-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(driver_n <span class="sc">&gt;</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb53-13"><a href="practice-times-vs-qualifying-times.html#cb53-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(Time_std_track, <span class="at">y =</span> <span class="fu">fct_reorder</span>(Abbr, <span class="fu">desc</span>(mean)))) <span class="sc">+</span></span>
<span id="cb53-14"><a href="practice-times-vs-qualifying-times.html#cb53-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">w =</span> <span class="dv">0</span>, <span class="at">h =</span> <span class="fl">0.1</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb53-15"><a href="practice-times-vs-qualifying-times.html#cb53-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb53-16"><a href="practice-times-vs-qualifying-times.html#cb53-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Standardized Qualifying Time (secs)&#39;</span>,</span>
<span id="cb53-17"><a href="practice-times-vs-qualifying-times.html#cb53-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Driver&#39;</span>,</span>
<span id="cb53-18"><a href="practice-times-vs-qualifying-times.html#cb53-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Standardized Qualifying Time&#39;</span>,</span>
<span id="cb53-19"><a href="practice-times-vs-qualifying-times.html#cb53-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2015&#39;</span>,</span>
<span id="cb53-20"><a href="practice-times-vs-qualifying-times.html#cb53-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&#39;*Times are subtracted from the average time for each Grand Prix&#39;</span>) <span class="sc">+</span></span>
<span id="cb53-21"><a href="practice-times-vs-qualifying-times.html#cb53-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">col =</span> <span class="st">&#39;red&#39;</span>) <span class="sc">+</span></span>
<span id="cb53-22"><a href="practice-times-vs-qualifying-times.html#cb53-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb53-23"><a href="practice-times-vs-qualifying-times.html#cb53-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb53-24"><a href="practice-times-vs-qualifying-times.html#cb53-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-35-1.png" width="672" /></p>
</div>
<div id="section-2" class="section level4 hasAnchor" number="4.4.1.3">
<h4><span class="header-section-number">4.4.1.3</span> 2016<a href="practice-times-vs-qualifying-times.html#section-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="practice-times-vs-qualifying-times.html#cb54-1" aria-hidden="true" tabindex="-1"></a>starting_and_ending_time_clean <span class="sc">%&gt;%</span></span>
<span id="cb54-2"><a href="practice-times-vs-qualifying-times.html#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Time_grid_secs),</span>
<span id="cb54-3"><a href="practice-times-vs-qualifying-times.html#cb54-3" aria-hidden="true" tabindex="-1"></a>         year <span class="sc">==</span> <span class="dv">2016</span>) <span class="sc">%&gt;%</span></span>
<span id="cb54-4"><a href="practice-times-vs-qualifying-times.html#cb54-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(track) <span class="sc">%&gt;%</span></span>
<span id="cb54-5"><a href="practice-times-vs-qualifying-times.html#cb54-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">track_mean =</span> <span class="fu">mean</span>(Time_grid_secs, <span class="at">na.rm =</span> T),</span>
<span id="cb54-6"><a href="practice-times-vs-qualifying-times.html#cb54-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">Time_std_track =</span> Time_grid_secs <span class="sc">-</span> track_mean) <span class="sc">%&gt;%</span> </span>
<span id="cb54-7"><a href="practice-times-vs-qualifying-times.html#cb54-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb54-8"><a href="practice-times-vs-qualifying-times.html#cb54-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Abbr) <span class="sc">%&gt;%</span> </span>
<span id="cb54-9"><a href="practice-times-vs-qualifying-times.html#cb54-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">driver_n =</span> <span class="fu">n</span>(),</span>
<span id="cb54-10"><a href="practice-times-vs-qualifying-times.html#cb54-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">mean =</span> <span class="fu">mean</span>(Time_std_track, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span></span>
<span id="cb54-11"><a href="practice-times-vs-qualifying-times.html#cb54-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb54-12"><a href="practice-times-vs-qualifying-times.html#cb54-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(driver_n <span class="sc">&gt;</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb54-13"><a href="practice-times-vs-qualifying-times.html#cb54-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(Time_std_track, <span class="at">y =</span> <span class="fu">fct_reorder</span>(Abbr, <span class="fu">desc</span>(mean)))) <span class="sc">+</span></span>
<span id="cb54-14"><a href="practice-times-vs-qualifying-times.html#cb54-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">w =</span> <span class="dv">0</span>, <span class="at">h =</span> <span class="fl">0.1</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb54-15"><a href="practice-times-vs-qualifying-times.html#cb54-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb54-16"><a href="practice-times-vs-qualifying-times.html#cb54-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Standardized Qualifying Time (secs)&#39;</span>,</span>
<span id="cb54-17"><a href="practice-times-vs-qualifying-times.html#cb54-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Driver&#39;</span>,</span>
<span id="cb54-18"><a href="practice-times-vs-qualifying-times.html#cb54-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Standardized Qualifying Time&#39;</span>,</span>
<span id="cb54-19"><a href="practice-times-vs-qualifying-times.html#cb54-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2016&#39;</span>,</span>
<span id="cb54-20"><a href="practice-times-vs-qualifying-times.html#cb54-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&#39;*Times are subtracted from the average time for each Grand Prix&#39;</span>) <span class="sc">+</span></span>
<span id="cb54-21"><a href="practice-times-vs-qualifying-times.html#cb54-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">col =</span> <span class="st">&#39;red&#39;</span>) <span class="sc">+</span></span>
<span id="cb54-22"><a href="practice-times-vs-qualifying-times.html#cb54-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb54-23"><a href="practice-times-vs-qualifying-times.html#cb54-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb54-24"><a href="practice-times-vs-qualifying-times.html#cb54-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-36-1.png" width="672" /></p>
</div>
<div id="section-3" class="section level4 hasAnchor" number="4.4.1.4">
<h4><span class="header-section-number">4.4.1.4</span> 2017<a href="practice-times-vs-qualifying-times.html#section-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="practice-times-vs-qualifying-times.html#cb55-1" aria-hidden="true" tabindex="-1"></a>starting_and_ending_time_clean <span class="sc">%&gt;%</span></span>
<span id="cb55-2"><a href="practice-times-vs-qualifying-times.html#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Time_grid_secs),</span>
<span id="cb55-3"><a href="practice-times-vs-qualifying-times.html#cb55-3" aria-hidden="true" tabindex="-1"></a>         year <span class="sc">==</span> <span class="dv">2017</span>) <span class="sc">%&gt;%</span></span>
<span id="cb55-4"><a href="practice-times-vs-qualifying-times.html#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(track) <span class="sc">%&gt;%</span></span>
<span id="cb55-5"><a href="practice-times-vs-qualifying-times.html#cb55-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">track_mean =</span> <span class="fu">mean</span>(Time_grid_secs, <span class="at">na.rm =</span> T),</span>
<span id="cb55-6"><a href="practice-times-vs-qualifying-times.html#cb55-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">Time_std_track =</span> Time_grid_secs <span class="sc">-</span> track_mean) <span class="sc">%&gt;%</span> </span>
<span id="cb55-7"><a href="practice-times-vs-qualifying-times.html#cb55-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb55-8"><a href="practice-times-vs-qualifying-times.html#cb55-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Abbr) <span class="sc">%&gt;%</span> </span>
<span id="cb55-9"><a href="practice-times-vs-qualifying-times.html#cb55-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">driver_n =</span> <span class="fu">n</span>(),</span>
<span id="cb55-10"><a href="practice-times-vs-qualifying-times.html#cb55-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">mean =</span> <span class="fu">mean</span>(Time_std_track, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span></span>
<span id="cb55-11"><a href="practice-times-vs-qualifying-times.html#cb55-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb55-12"><a href="practice-times-vs-qualifying-times.html#cb55-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(driver_n <span class="sc">&gt;</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb55-13"><a href="practice-times-vs-qualifying-times.html#cb55-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(Time_std_track, <span class="at">y =</span> <span class="fu">fct_reorder</span>(Abbr, <span class="fu">desc</span>(mean)))) <span class="sc">+</span></span>
<span id="cb55-14"><a href="practice-times-vs-qualifying-times.html#cb55-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">w =</span> <span class="dv">0</span>, <span class="at">h =</span> <span class="fl">0.1</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb55-15"><a href="practice-times-vs-qualifying-times.html#cb55-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb55-16"><a href="practice-times-vs-qualifying-times.html#cb55-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Standardized Qualifying Time (secs)&#39;</span>,</span>
<span id="cb55-17"><a href="practice-times-vs-qualifying-times.html#cb55-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Driver&#39;</span>,</span>
<span id="cb55-18"><a href="practice-times-vs-qualifying-times.html#cb55-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Standardized Qualifying Time&#39;</span>,</span>
<span id="cb55-19"><a href="practice-times-vs-qualifying-times.html#cb55-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2017&#39;</span>,</span>
<span id="cb55-20"><a href="practice-times-vs-qualifying-times.html#cb55-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&#39;*Times are subtracted from the average time for each Grand Prix&#39;</span>) <span class="sc">+</span></span>
<span id="cb55-21"><a href="practice-times-vs-qualifying-times.html#cb55-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">col =</span> <span class="st">&#39;red&#39;</span>) <span class="sc">+</span></span>
<span id="cb55-22"><a href="practice-times-vs-qualifying-times.html#cb55-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb55-23"><a href="practice-times-vs-qualifying-times.html#cb55-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb55-24"><a href="practice-times-vs-qualifying-times.html#cb55-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-37-1.png" width="672" /></p>
</div>
<div id="section-4" class="section level4 hasAnchor" number="4.4.1.5">
<h4><span class="header-section-number">4.4.1.5</span> 2018<a href="practice-times-vs-qualifying-times.html#section-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="practice-times-vs-qualifying-times.html#cb56-1" aria-hidden="true" tabindex="-1"></a>starting_and_ending_time_clean <span class="sc">%&gt;%</span></span>
<span id="cb56-2"><a href="practice-times-vs-qualifying-times.html#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Time_grid_secs),</span>
<span id="cb56-3"><a href="practice-times-vs-qualifying-times.html#cb56-3" aria-hidden="true" tabindex="-1"></a>         year <span class="sc">==</span> <span class="dv">2018</span>) <span class="sc">%&gt;%</span></span>
<span id="cb56-4"><a href="practice-times-vs-qualifying-times.html#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(track) <span class="sc">%&gt;%</span></span>
<span id="cb56-5"><a href="practice-times-vs-qualifying-times.html#cb56-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">track_mean =</span> <span class="fu">mean</span>(Time_grid_secs, <span class="at">na.rm =</span> T),</span>
<span id="cb56-6"><a href="practice-times-vs-qualifying-times.html#cb56-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">Time_std_track =</span> Time_grid_secs <span class="sc">-</span> track_mean) <span class="sc">%&gt;%</span> </span>
<span id="cb56-7"><a href="practice-times-vs-qualifying-times.html#cb56-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb56-8"><a href="practice-times-vs-qualifying-times.html#cb56-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Abbr) <span class="sc">%&gt;%</span> </span>
<span id="cb56-9"><a href="practice-times-vs-qualifying-times.html#cb56-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">driver_n =</span> <span class="fu">n</span>(),</span>
<span id="cb56-10"><a href="practice-times-vs-qualifying-times.html#cb56-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">mean =</span> <span class="fu">mean</span>(Time_std_track, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span></span>
<span id="cb56-11"><a href="practice-times-vs-qualifying-times.html#cb56-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb56-12"><a href="practice-times-vs-qualifying-times.html#cb56-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(driver_n <span class="sc">&gt;</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb56-13"><a href="practice-times-vs-qualifying-times.html#cb56-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(Time_std_track, <span class="at">y =</span> <span class="fu">fct_reorder</span>(Abbr, <span class="fu">desc</span>(mean)))) <span class="sc">+</span></span>
<span id="cb56-14"><a href="practice-times-vs-qualifying-times.html#cb56-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">w =</span> <span class="dv">0</span>, <span class="at">h =</span> <span class="fl">0.1</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb56-15"><a href="practice-times-vs-qualifying-times.html#cb56-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb56-16"><a href="practice-times-vs-qualifying-times.html#cb56-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Standardized Qualifying Time (secs)&#39;</span>,</span>
<span id="cb56-17"><a href="practice-times-vs-qualifying-times.html#cb56-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Driver&#39;</span>,</span>
<span id="cb56-18"><a href="practice-times-vs-qualifying-times.html#cb56-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Standardized Qualifying Time&#39;</span>,</span>
<span id="cb56-19"><a href="practice-times-vs-qualifying-times.html#cb56-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2018&#39;</span>,</span>
<span id="cb56-20"><a href="practice-times-vs-qualifying-times.html#cb56-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&#39;*Times are subtracted from the average time for each Grand Prix&#39;</span>) <span class="sc">+</span></span>
<span id="cb56-21"><a href="practice-times-vs-qualifying-times.html#cb56-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">col =</span> <span class="st">&#39;red&#39;</span>) <span class="sc">+</span></span>
<span id="cb56-22"><a href="practice-times-vs-qualifying-times.html#cb56-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb56-23"><a href="practice-times-vs-qualifying-times.html#cb56-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb56-24"><a href="practice-times-vs-qualifying-times.html#cb56-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-38-1.png" width="672" /></p>
</div>
<div id="section-5" class="section level4 hasAnchor" number="4.4.1.6">
<h4><span class="header-section-number">4.4.1.6</span> 2019<a href="practice-times-vs-qualifying-times.html#section-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="practice-times-vs-qualifying-times.html#cb57-1" aria-hidden="true" tabindex="-1"></a>starting_and_ending_time_clean <span class="sc">%&gt;%</span></span>
<span id="cb57-2"><a href="practice-times-vs-qualifying-times.html#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Time_grid_secs),</span>
<span id="cb57-3"><a href="practice-times-vs-qualifying-times.html#cb57-3" aria-hidden="true" tabindex="-1"></a>         year <span class="sc">==</span> <span class="dv">2019</span>) <span class="sc">%&gt;%</span></span>
<span id="cb57-4"><a href="practice-times-vs-qualifying-times.html#cb57-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(track) <span class="sc">%&gt;%</span></span>
<span id="cb57-5"><a href="practice-times-vs-qualifying-times.html#cb57-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">track_mean =</span> <span class="fu">mean</span>(Time_grid_secs, <span class="at">na.rm =</span> T),</span>
<span id="cb57-6"><a href="practice-times-vs-qualifying-times.html#cb57-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">Time_std_track =</span> Time_grid_secs <span class="sc">-</span> track_mean) <span class="sc">%&gt;%</span> </span>
<span id="cb57-7"><a href="practice-times-vs-qualifying-times.html#cb57-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb57-8"><a href="practice-times-vs-qualifying-times.html#cb57-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Abbr) <span class="sc">%&gt;%</span> </span>
<span id="cb57-9"><a href="practice-times-vs-qualifying-times.html#cb57-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">driver_n =</span> <span class="fu">n</span>(),</span>
<span id="cb57-10"><a href="practice-times-vs-qualifying-times.html#cb57-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">mean =</span> <span class="fu">mean</span>(Time_std_track, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span></span>
<span id="cb57-11"><a href="practice-times-vs-qualifying-times.html#cb57-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb57-12"><a href="practice-times-vs-qualifying-times.html#cb57-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(driver_n <span class="sc">&gt;</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb57-13"><a href="practice-times-vs-qualifying-times.html#cb57-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(Time_std_track, <span class="at">y =</span> <span class="fu">fct_reorder</span>(Abbr, <span class="fu">desc</span>(mean)))) <span class="sc">+</span></span>
<span id="cb57-14"><a href="practice-times-vs-qualifying-times.html#cb57-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">w =</span> <span class="dv">0</span>, <span class="at">h =</span> <span class="fl">0.1</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb57-15"><a href="practice-times-vs-qualifying-times.html#cb57-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb57-16"><a href="practice-times-vs-qualifying-times.html#cb57-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Standardized Qualifying Time (secs)&#39;</span>,</span>
<span id="cb57-17"><a href="practice-times-vs-qualifying-times.html#cb57-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Driver&#39;</span>,</span>
<span id="cb57-18"><a href="practice-times-vs-qualifying-times.html#cb57-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Standardized Qualifying Time&#39;</span>,</span>
<span id="cb57-19"><a href="practice-times-vs-qualifying-times.html#cb57-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2019&#39;</span>,</span>
<span id="cb57-20"><a href="practice-times-vs-qualifying-times.html#cb57-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&#39;*Times are subtracted from the average time for each Grand Prix&#39;</span>) <span class="sc">+</span></span>
<span id="cb57-21"><a href="practice-times-vs-qualifying-times.html#cb57-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">col =</span> <span class="st">&#39;red&#39;</span>) <span class="sc">+</span></span>
<span id="cb57-22"><a href="practice-times-vs-qualifying-times.html#cb57-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb57-23"><a href="practice-times-vs-qualifying-times.html#cb57-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb57-24"><a href="practice-times-vs-qualifying-times.html#cb57-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-39-1.png" width="672" /></p>
</div>
<div id="section-6" class="section level4 hasAnchor" number="4.4.1.7">
<h4><span class="header-section-number">4.4.1.7</span> 2020<a href="practice-times-vs-qualifying-times.html#section-6" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="practice-times-vs-qualifying-times.html#cb58-1" aria-hidden="true" tabindex="-1"></a>starting_and_ending_time_clean <span class="sc">%&gt;%</span></span>
<span id="cb58-2"><a href="practice-times-vs-qualifying-times.html#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Time_grid_secs),</span>
<span id="cb58-3"><a href="practice-times-vs-qualifying-times.html#cb58-3" aria-hidden="true" tabindex="-1"></a>         year <span class="sc">==</span> <span class="dv">2020</span>) <span class="sc">%&gt;%</span></span>
<span id="cb58-4"><a href="practice-times-vs-qualifying-times.html#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(track) <span class="sc">%&gt;%</span></span>
<span id="cb58-5"><a href="practice-times-vs-qualifying-times.html#cb58-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">track_mean =</span> <span class="fu">mean</span>(Time_grid_secs, <span class="at">na.rm =</span> T),</span>
<span id="cb58-6"><a href="practice-times-vs-qualifying-times.html#cb58-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">Time_std_track =</span> Time_grid_secs <span class="sc">-</span> track_mean) <span class="sc">%&gt;%</span> </span>
<span id="cb58-7"><a href="practice-times-vs-qualifying-times.html#cb58-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb58-8"><a href="practice-times-vs-qualifying-times.html#cb58-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Abbr) <span class="sc">%&gt;%</span> </span>
<span id="cb58-9"><a href="practice-times-vs-qualifying-times.html#cb58-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">driver_n =</span> <span class="fu">n</span>(),</span>
<span id="cb58-10"><a href="practice-times-vs-qualifying-times.html#cb58-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">mean =</span> <span class="fu">mean</span>(Time_std_track, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span></span>
<span id="cb58-11"><a href="practice-times-vs-qualifying-times.html#cb58-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb58-12"><a href="practice-times-vs-qualifying-times.html#cb58-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(driver_n <span class="sc">&gt;</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb58-13"><a href="practice-times-vs-qualifying-times.html#cb58-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(Time_std_track, <span class="at">y =</span> <span class="fu">fct_reorder</span>(Abbr, <span class="fu">desc</span>(mean)))) <span class="sc">+</span></span>
<span id="cb58-14"><a href="practice-times-vs-qualifying-times.html#cb58-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">w =</span> <span class="dv">0</span>, <span class="at">h =</span> <span class="fl">0.1</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb58-15"><a href="practice-times-vs-qualifying-times.html#cb58-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb58-16"><a href="practice-times-vs-qualifying-times.html#cb58-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Standardized Qualifying Time (secs)&#39;</span>,</span>
<span id="cb58-17"><a href="practice-times-vs-qualifying-times.html#cb58-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Driver&#39;</span>,</span>
<span id="cb58-18"><a href="practice-times-vs-qualifying-times.html#cb58-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Standardized Qualifying Time&#39;</span>,</span>
<span id="cb58-19"><a href="practice-times-vs-qualifying-times.html#cb58-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2020&#39;</span>,</span>
<span id="cb58-20"><a href="practice-times-vs-qualifying-times.html#cb58-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&#39;*Times are subtracted from the average time for each Grand Prix&#39;</span>) <span class="sc">+</span></span>
<span id="cb58-21"><a href="practice-times-vs-qualifying-times.html#cb58-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">col =</span> <span class="st">&#39;red&#39;</span>) <span class="sc">+</span></span>
<span id="cb58-22"><a href="practice-times-vs-qualifying-times.html#cb58-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb58-23"><a href="practice-times-vs-qualifying-times.html#cb58-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb58-24"><a href="practice-times-vs-qualifying-times.html#cb58-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-40-1.png" width="672" /></p>
</div>
<div id="section-7" class="section level4 hasAnchor" number="4.4.1.8">
<h4><span class="header-section-number">4.4.1.8</span> 2021<a href="practice-times-vs-qualifying-times.html#section-7" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="practice-times-vs-qualifying-times.html#cb59-1" aria-hidden="true" tabindex="-1"></a>starting_and_ending_time_clean <span class="sc">%&gt;%</span></span>
<span id="cb59-2"><a href="practice-times-vs-qualifying-times.html#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Time_grid_secs),</span>
<span id="cb59-3"><a href="practice-times-vs-qualifying-times.html#cb59-3" aria-hidden="true" tabindex="-1"></a>         year <span class="sc">==</span> <span class="dv">2021</span>) <span class="sc">%&gt;%</span></span>
<span id="cb59-4"><a href="practice-times-vs-qualifying-times.html#cb59-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(track) <span class="sc">%&gt;%</span></span>
<span id="cb59-5"><a href="practice-times-vs-qualifying-times.html#cb59-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">track_mean =</span> <span class="fu">mean</span>(Time_grid_secs, <span class="at">na.rm =</span> T),</span>
<span id="cb59-6"><a href="practice-times-vs-qualifying-times.html#cb59-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">Time_std_track =</span> Time_grid_secs <span class="sc">-</span> track_mean) <span class="sc">%&gt;%</span> </span>
<span id="cb59-7"><a href="practice-times-vs-qualifying-times.html#cb59-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb59-8"><a href="practice-times-vs-qualifying-times.html#cb59-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Abbr) <span class="sc">%&gt;%</span> </span>
<span id="cb59-9"><a href="practice-times-vs-qualifying-times.html#cb59-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">driver_n =</span> <span class="fu">n</span>(),</span>
<span id="cb59-10"><a href="practice-times-vs-qualifying-times.html#cb59-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">mean =</span> <span class="fu">mean</span>(Time_std_track, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span></span>
<span id="cb59-11"><a href="practice-times-vs-qualifying-times.html#cb59-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb59-12"><a href="practice-times-vs-qualifying-times.html#cb59-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(driver_n <span class="sc">&gt;</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb59-13"><a href="practice-times-vs-qualifying-times.html#cb59-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(Time_std_track, <span class="at">y =</span> <span class="fu">fct_reorder</span>(Abbr, <span class="fu">desc</span>(mean)))) <span class="sc">+</span></span>
<span id="cb59-14"><a href="practice-times-vs-qualifying-times.html#cb59-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">w =</span> <span class="dv">0</span>, <span class="at">h =</span> <span class="fl">0.1</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb59-15"><a href="practice-times-vs-qualifying-times.html#cb59-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb59-16"><a href="practice-times-vs-qualifying-times.html#cb59-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Standardized Qualifying Time (secs)&#39;</span>,</span>
<span id="cb59-17"><a href="practice-times-vs-qualifying-times.html#cb59-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Driver&#39;</span>,</span>
<span id="cb59-18"><a href="practice-times-vs-qualifying-times.html#cb59-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Standardized Qualifying Time&#39;</span>,</span>
<span id="cb59-19"><a href="practice-times-vs-qualifying-times.html#cb59-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2021&#39;</span>,</span>
<span id="cb59-20"><a href="practice-times-vs-qualifying-times.html#cb59-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&#39;*Times are subtracted from the average time for each Grand Prix&#39;</span>) <span class="sc">+</span></span>
<span id="cb59-21"><a href="practice-times-vs-qualifying-times.html#cb59-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">col =</span> <span class="st">&#39;red&#39;</span>) <span class="sc">+</span></span>
<span id="cb59-22"><a href="practice-times-vs-qualifying-times.html#cb59-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb59-23"><a href="practice-times-vs-qualifying-times.html#cb59-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb59-24"><a href="practice-times-vs-qualifying-times.html#cb59-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-41-1.png" width="672" /></p>
</div>
<div id="section-8" class="section level4 hasAnchor" number="4.4.1.9">
<h4><span class="header-section-number">4.4.1.9</span> 2022<a href="practice-times-vs-qualifying-times.html#section-8" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="practice-times-vs-qualifying-times.html#cb60-1" aria-hidden="true" tabindex="-1"></a>starting_and_ending_time_clean <span class="sc">%&gt;%</span></span>
<span id="cb60-2"><a href="practice-times-vs-qualifying-times.html#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Time_grid_secs),</span>
<span id="cb60-3"><a href="practice-times-vs-qualifying-times.html#cb60-3" aria-hidden="true" tabindex="-1"></a>         year <span class="sc">==</span> <span class="dv">2022</span>) <span class="sc">%&gt;%</span></span>
<span id="cb60-4"><a href="practice-times-vs-qualifying-times.html#cb60-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(track) <span class="sc">%&gt;%</span></span>
<span id="cb60-5"><a href="practice-times-vs-qualifying-times.html#cb60-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">track_mean =</span> <span class="fu">mean</span>(Time_grid_secs, <span class="at">na.rm =</span> T),</span>
<span id="cb60-6"><a href="practice-times-vs-qualifying-times.html#cb60-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">Time_std_track =</span> Time_grid_secs <span class="sc">-</span> track_mean) <span class="sc">%&gt;%</span> </span>
<span id="cb60-7"><a href="practice-times-vs-qualifying-times.html#cb60-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb60-8"><a href="practice-times-vs-qualifying-times.html#cb60-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Abbr) <span class="sc">%&gt;%</span> </span>
<span id="cb60-9"><a href="practice-times-vs-qualifying-times.html#cb60-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">driver_n =</span> <span class="fu">n</span>(),</span>
<span id="cb60-10"><a href="practice-times-vs-qualifying-times.html#cb60-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">mean =</span> <span class="fu">mean</span>(Time_std_track, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span></span>
<span id="cb60-11"><a href="practice-times-vs-qualifying-times.html#cb60-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb60-12"><a href="practice-times-vs-qualifying-times.html#cb60-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(driver_n <span class="sc">&gt;</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb60-13"><a href="practice-times-vs-qualifying-times.html#cb60-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(Time_std_track, <span class="at">y =</span> <span class="fu">fct_reorder</span>(Abbr, <span class="fu">desc</span>(mean)))) <span class="sc">+</span></span>
<span id="cb60-14"><a href="practice-times-vs-qualifying-times.html#cb60-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">w =</span> <span class="dv">0</span>, <span class="at">h =</span> <span class="fl">0.1</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb60-15"><a href="practice-times-vs-qualifying-times.html#cb60-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb60-16"><a href="practice-times-vs-qualifying-times.html#cb60-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Standardized Qualifying Time (secs)&#39;</span>,</span>
<span id="cb60-17"><a href="practice-times-vs-qualifying-times.html#cb60-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Driver&#39;</span>,</span>
<span id="cb60-18"><a href="practice-times-vs-qualifying-times.html#cb60-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Standardized Qualifying Time&#39;</span>,</span>
<span id="cb60-19"><a href="practice-times-vs-qualifying-times.html#cb60-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2022&#39;</span>,</span>
<span id="cb60-20"><a href="practice-times-vs-qualifying-times.html#cb60-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&#39;*Times are subtracted from the average time for each Grand Prix&#39;</span>) <span class="sc">+</span></span>
<span id="cb60-21"><a href="practice-times-vs-qualifying-times.html#cb60-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">col =</span> <span class="st">&#39;red&#39;</span>) <span class="sc">+</span></span>
<span id="cb60-22"><a href="practice-times-vs-qualifying-times.html#cb60-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb60-23"><a href="practice-times-vs-qualifying-times.html#cb60-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb60-24"><a href="practice-times-vs-qualifying-times.html#cb60-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-42-1.png" width="672" /></p>
</div>
</div>
</div>
<div id="do-practice-times-correlate-to-qualifying-times" class="section level2 hasAnchor" number="4.5">
<h2><span class="header-section-number">4.5</span> Do practice times correlate to qualifying times?<a href="practice-times-vs-qualifying-times.html#do-practice-times-correlate-to-qualifying-times" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="section-9" class="section level4 hasAnchor" number="4.5.0.1">
<h4><span class="header-section-number">4.5.0.1</span> 2014<a href="practice-times-vs-qualifying-times.html#section-9" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="practice-times-vs-qualifying-times.html#cb61-1" aria-hidden="true" tabindex="-1"></a>combined_historical <span class="sc">%&gt;%</span></span>
<span id="cb61-2"><a href="practice-times-vs-qualifying-times.html#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2014</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb61-3"><a href="practice-times-vs-qualifying-times.html#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(Time_1, Q1)) <span class="sc">+</span></span>
<span id="cb61-4"><a href="practice-times-vs-qualifying-times.html#cb61-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">slope =</span> <span class="dv">1</span>, <span class="at">col =</span> <span class="st">&#39;red&#39;</span>) <span class="sc">+</span></span>
<span id="cb61-5"><a href="practice-times-vs-qualifying-times.html#cb61-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb61-6"><a href="practice-times-vs-qualifying-times.html#cb61-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb61-7"><a href="practice-times-vs-qualifying-times.html#cb61-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Best Lap Time in Free Practice 1 (secs)&#39;</span>,</span>
<span id="cb61-8"><a href="practice-times-vs-qualifying-times.html#cb61-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Best Lap Time in Q1 (secs)&#39;</span>,</span>
<span id="cb61-9"><a href="practice-times-vs-qualifying-times.html#cb61-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Practice vs Qualifying Times&#39;</span>,</span>
<span id="cb61-10"><a href="practice-times-vs-qualifying-times.html#cb61-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;2014&#39;</span>) <span class="sc">+</span></span>
<span id="cb61-11"><a href="practice-times-vs-qualifying-times.html#cb61-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb61-12"><a href="practice-times-vs-qualifying-times.html#cb61-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb61-13"><a href="practice-times-vs-qualifying-times.html#cb61-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>))</span></code></pre></div>
<pre><code>## Warning: Removed 44 rows containing missing values (`geom_point()`).</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-43-1.png" width="672" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="qualifying.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="exploratory-data-analysis-and-modeling.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/03-pracice_v_qualifying.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
